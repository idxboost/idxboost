var originalPositionY,IB_CURRENT_LEFT_CLICKS,IB_MODAL_SLIDER,IB_TRACKING_IFRAME,initial_href=document.URL,ib_path_filters=__flex_idx_filter_regular.searchFilterPermalink,IB_HAS_LEFT_CLICKS=__flex_g_settings.hasOwnProperty("signup_left_clicks")&&null!=__flex_g_settings.signup_left_clicks,$=jQuery,IB_ACCESS_TOKEN=__flex_idx_filter_regular.accessToken,IB_MODAL_WRAPPER=$("#flex_idx_modal_wrapper"),IB_MODAL_TPL=$("#ib-modal-template"),IB_LISTINGS_CT=$(".ib-listings-ct:eq(0)"),IB_HEADING_CT=$(".ib-heading-ct:eq(0)"),style_map=[];function markPropertyAsFavorite(a,b,c){var d=__flex_idx_filter_regular.trackListingsDetail.replace(/{{mlsNumber}}/g,a);console.dir([a,b,c]),$.ajax({type:"POST",url:d,data:{access_token:IB_ACCESS_TOKEN,flex_credentials:Cookies.get("ib_lead_token"),url_origin:location.origin,url_referer:document.referrer,user_agent:navigator.userAgent,registration_key:"undefined"!=typeof IB_AGENT_REGISTRATION_KEY?IB_AGENT_REGISTRATION_KEY:null},success:function(b){"add"===b.type?$(this).data("token-alert",b.token_alert):$(this).data("token-alert",""),"modal"===c&&("add"===b.type?($(".ib-filter-slider-building .js-flex-favorite-btn").each(function(){console.log($(this).parent().attr("data-mls")+"--"+a),$(this).parent().attr("data-mls")==a&&(console.log("ingreso add 1"),$(this).addClass("active"))}),$(".ib_content_views_building .flex-favorite-btn").each(function(){if(void 0!=$(this).parent().data("mls"))var b=$(this).parent().data("mls");else var b=$(this).parent().parent().data("mls");b==a&&(console.log("ingreso add 2"),$(this).find("span").addClass("active flex-active-fav"))}),IB_LISTINGS_CT.find(".ib-pfavorite").each(function(){$(this).data("mls")===a&&($(this).addClass("ib-pf-active"),$(this).data("token-alert",b.token_alert))}),$("#wrap-list-result ul#result-search").find("li.propertie").each(function(){$(this).data("mls")==a&&($(this).find(".clidxboost-icon-check").addClass("active"),$(this).find(".flex-favorite-btn").data("alert-token",b.token_alert),$(this).attr("data-token-alert",b.token_alert))})):($(".ib_content_views_building .flex-favorite-btn").each(function(){if(void 0!=$(this).parent().data("mls"))var b=$(this).parent().data("mls");else var b=$(this).parent().parent().data("mls");b==a&&$(this).find("span").removeClass("active flex-active-fav")}),$(".ib-filter-slider-building .js-flex-favorite-btn").each(function(){$(this).parent().attr("data-mls")==a&&$(this).removeClass("active flex-active-fav")}),IB_LISTINGS_CT.find(".ib-pfavorite").each(function(){$(this).data("mls")===a&&$(this).removeClass("ib-pf-active")}),$("#wrap-list-result ul#result-search").find("li.propertie").each(function(){$(this).data("mls")==a&&($(this).find(".clidxboost-icon-check").removeClass("active"),$(this).find(".flex-favorite-btn").data("alert-token",""),$(this).attr("data-token-alert",""))}))),jQuery("#_ib_lead_activity_tab").length&&jQuery("#_ib_lead_activity_tab button:eq(1)").click()}}),console.log("Track #"+a+" as favorite.")}function calculate_mortgage(a,b,d,c){console.log("mortgage calculator"),a=a.replace(/[^\d]/g,""),b=parseFloat(b),d=d.replace(/[^\d]/g,""),c=parseFloat(c);var f=0,g=a*(b/100);c/=100;for(var e=a-g,h=1+c/12,i=h,j=0;j<12*d;j++)f+=1/i,i*=h;var k=e/f,l=0;return b<20&&(l=55*(e/1e5)),{mortgage:_.formatPrice(e),down_payment:_.formatPrice(g),monthly:_.formatPrice(k,2),total_monthly:_.formatPrice(k+l,2)}}if(void 0!=style_map_idxboost&&""!=style_map_idxboost&&(style_map=JSON.parse(style_map_idxboost)),_.mixin({formatPrice:function(f,b,g,h,c,a,d){var e=Number(f).toFixed(Math.max(0,~~b));return(a&&d?a:"")+(c?e.replace(".",c):e).replace(new RegExp("\\d(?=(\\d{"+(g||3)+"})+"+(b>0?"\\D":"$")+")","g"),"$&"+(h||","))+(a&&!d?a:"")},formatShortPrice:function(c){var a,b=Number(c);return b<1e3?b:b<1e4?(a=Math.ceil(b/100)/10)+"K":b<1e6?(a=Math.ceil(b/1e3))<100?String(a).substr(0,2)+"K":a>=1e3?"1M":a+"K":(-1!==String(a=b<1e7?Math.ceil(b/1e4)/100:Math.ceil(b/1e5)/10,".")&&(a=String(a).substr(0,4)),a+"M")},getMLSImage:function(a,b){return["https://retsimages.s3.amazonaws.com",a.substr(-2),b].join("/")},getMLSListImage:function(a,c,b){return["https://retsimages.s3.amazonaws.com",a.substr(-2),a].join("/")+"_"+b+".jpg"}}),Handlebars.registerHelper("formatPrice",function(a){return"$"+_.formatPrice(a)}),Handlebars.registerHelper("formatSqft",function(a){return _.formatPrice(a)}),Handlebars.registerHelper("propertyPermalink",function(a){return"undefined"!=typeof IB_AGENT_PERMALINK?IB_AGENT_PERMALINK+"/property/"+a:__flex_idx_filter_regular.propertyDetailPermalink+"/"+a}),Handlebars.registerHelper("agentPhoto",function(a){return"undefined"!=typeof IB_AGENT_AVATAR_IMAGE?IB_AGENT_AVATAR_IMAGE.length?IB_AGENT_AVATAR_IMAGE:"https://idxboost-spw-assets.idxboost.us/photos/avatar.jpg":__flex_idx_filter_regular.agentPhoto}),Handlebars.registerHelper("agentFullName",function(a){return"undefined"!=typeof IB_AGENT_FULL_NAME?IB_AGENT_FULL_NAME:__flex_idx_filter_regular.agentFullName}),Handlebars.registerHelper("agentPhoneNumber",function(a){return"undefined"!=typeof IB_AGENT_PHONE_NUMBER?IB_AGENT_PHONE_NUMBER.replace(/[^\d+]/g,""):__flex_idx_filter_regular.agentPhone.replace(/[^\d+]/g,"")}),Handlebars.registerHelper("agentPhone",function(a){return"undefined"!=typeof IB_AGENT_PHONE_NUMBER?IB_AGENT_PHONE_NUMBER:__flex_idx_filter_regular.agentPhone}),Handlebars.registerHelper("idxReduced",function(a){return a<0?'<div class="ib-pipanumber ib-pipadown">'+a+"%</div>":a>0?'<div class="ib-pipanumber">'+a+"%</div>":""}),Handlebars.registerHelper("leadFirstName",function(a){return __flex_idx_filter_regular.leadFirstName}),Handlebars.registerHelper("leadLastName",function(a){return __flex_idx_filter_regular.leadLastName}),Handlebars.registerHelper("leadEmailAddress",function(a){return __flex_idx_filter_regular.leadEmailAddress}),Handlebars.registerHelper("leadPhoneNumber",function(a){return __flex_idx_filter_regular.leadPhoneNumber}),Handlebars.registerHelper("markClassActiveTab",function(a){return parseInt(a.img_cnt,10)>0?"ib-pva-photos":"ib-pva-map"}),Handlebars.registerHelper("idxFavoriteText",function(a){return""===a.token_alert?word_translate.save:word_translate.remove}),Handlebars.registerHelper("formatPriceSqft",function(a){return a.sqft>0&&a.price>0?_.formatPrice(a.price/a.sqft):""}),Handlebars.registerHelper("idxImage",function(a){return a.img_cnt>0?_.getMLSImage(a.mls_num,a.image):"https://www.idxboost.com/i/default_thumbnail.jpg"}),Handlebars.registerHelper("idxRelatedImage",function(a){return""!=a.image?_.getMLSImage(a.mls_num,a.image):"https://www.idxboost.com/i/default_thumbnail.jpg"}),Handlebars.registerHelper("idxImageEmpty",function(a){return a.img_cnt<2?"ib-piwoimgs":""}),Handlebars.registerHelper("markPhotosActive",function(a){return parseInt(a.img_cnt,10)>0?"ib-pvi-active":""}),Handlebars.registerHelper("markMapActive",function(a){return 0==parseInt(a.img_cnt,10)?"ib-pvi-active":""}),Handlebars.registerHelper("idxFavoriteClass",function(b){var c=["ib-pfheart","ib-pfstar","ib-pfcube"][__flex_idx_filter_regular.search.view_icon_type],a=[];return a.push(c),b.hasOwnProperty("token_alert")&&b.token_alert.length&&a.push("ib-pf-active"),a.join(" ")}),Handlebars.registerHelper("isRentalType",function(a){return a.hasOwnProperty("is_rental")&&"1"==a.is_rental?"/"+word_translate.month:""}),Handlebars.registerHelper("idxSliderLoop",function(a){sliderItems=[];var b=a.gallery.length;return a.gallery.length>0&&(a.gallery.forEach(function(a){sliderItems.push('<img class="ib-pvsitem" src="'+a+'">')}),1==b?(sliderItems.push('<img class="ib-pvsitem" src="https://www.idxboost.com/i/default_thumbnail.jpg">'),sliderItems.push('<img class="ib-pvsitem" src="https://www.idxboost.com/i/default_thumbnail.jpg">')):2==b&&sliderItems.push('<img class="ib-pvsitem" src="https://www.idxboost.com/i/default_thumbnail.jpg">')),sliderItems.join("")}),$(document).ready(function(){var c=window.location.search.split("&"),b=new URLSearchParams(window.location.search);if(c.forEach(function(a){-1!=a.split("=")[0].indexOf("savesearch")&&"yes"!=flex_idx_filter_params.anonymous&&active_modal($("#modal_login"))}),idxboost_filter_countacti=!0,b.has("show")){var d=b.get("show");originalPositionY=Math.max(window.pageYOffset,document.documentElement.scrollTop,document.body.scrollTop),console.log("opening..."),a(d)}}),$(document).on("click",".ib-mmclose",function(){var a=$(event.target).parents(".ib-modal-master");a.addClass("ib-md-hiding"),setTimeout(function(){a.removeClass("ib-md-active ib-md-hiding")},250)}),$(".ib-dbsave").on("click",function(){if("yes"===__flex_g_settings.anonymous){if($(".register").length){$(".register").click();var a=$(".header-tab a[data-tab='tabRegister']").attr("data-text");$("#modal_login .modal_cm .content_md .heder_md .ms-title-modal").html(a)}return}$("#ib-fsearch-save-modal").addClass("ib-md-active")}),$(".ib-listings-ct:eq(0)").on("click",".gs-next-arrow",function(){var a=$(this).parents(".ib-pislider");if(!a.hasClass("gs-builded")){var d="",b=a.attr("data-mls"),c=a.attr("data-img-cnt");if(void 0==b)return console.log("MLS code no found!");if(void 0==c)return console.log("Counter not found!");$.each(getGallery(b,c,2),function(b,a){d+='<img data-lazy="'+a+'" class="gs-lazy">'}),a.html(d),a.greatSlider({type:"fade",nav:!0,bullets:!1,autoHeight:!1,lazyLoad:!0,layout:{arrowDefaultStyles:!1}})}}),$("body").on("click",".ib-pshared",function(){$(this).toggleClass("ib-ps-active")}),void 0===a){function a(a){/webOS|iPhone|iPad/i.test(navigator.userAgent)&&$("body").addClass("only-mobile"),lastOpenedProperty=a,"undefined"!=typeof infoWindow&&infoWindow.isOpen()&&infoWindow.close();var b=__flex_idx_filter_regular.lookupListingsDetail.replace(/{{mlsNumber}}/g,a);$.ajax({type:"POST",url:b,data:{access_token:IB_ACCESS_TOKEN,flex_credentials:Cookies.get("ib_lead_token"),registration_key:"undefined"!=typeof IB_AGENT_REGISTRATION_KEY?IB_AGENT_REGISTRATION_KEY:null},success:function(a){if(jQuery("#_ib_lead_activity_tab").length&&jQuery("#_ib_lead_activity_tab button:eq(0)").click(),void 0!==IB_TRACKING_IFRAME&&$(IB_TRACKING_IFRAME).remove(),"undefined"!=typeof dataLayer&&__flex_g_settings.hasOwnProperty("has_dynamic_ads")&&"1"==__flex_g_settings.has_dynamic_ads&&a.hasOwnProperty("mls_num")&&a.hasOwnProperty("price")){var j=parseInt(a.price.replace(/[^\d+]/g,""));dataLayer.push({event:"view_item",value:j,items:[{id:a.mls_num,google_business_vertical:"real_estate"}]})}if(setTimeout(function(){if($(".ib-property-mortage-submit").length>0){var b=a.price;$(".ib-property-mortgage-f:eq(0)").trigger("reset");var c=$(".ib-property-mc-dp:eq(0)").val(),d=$(".ib-property-mc-ty:eq(0)").val(),e=$(".ib-property-mc-ir:eq(0)").val(),f=calculate_mortgage(b,c,d,e);$(".ib-price-calculator").text("$"+f.monthly+"/mo"),$(".js-est-payment").hide(),"0"==a.is_rental&&$(".js-est-payment").show()}},1e3),(IB_TRACKING_IFRAME=document.createElement("iframe")).setAttribute("id","__ib-tracking-iframe"),"undefined"!=typeof IB_AGENT_PERMALINK?IB_TRACKING_IFRAME.setAttribute("src",IB_AGENT_PERMALINK+"/property/"+a.slug):IB_TRACKING_IFRAME.setAttribute("src",__flex_g_settings.propertyDetailPermalink+"/"+a.slug),IB_TRACKING_IFRAME.style.width="1px",IB_TRACKING_IFRAME.style.height="1px",document.body.appendChild(IB_TRACKING_IFRAME),IB_TRACKING_IFRAME.onload=function(){setTimeout(function(){$(IB_TRACKING_IFRAME).remove()},3e3)},a.hasOwnProperty("development")&&""==a.development&&a.hasOwnProperty("complex")&&(a.development=a.complex),IB_MODAL_WRAPPER.length&&IB_MODAL_TPL.length){var c,k=Handlebars.compile(IB_MODAL_TPL.html());if(a.oh_bool=!1,"1"==a.oh&&(a.oh_bool=!0),a.hasOwnProperty("oh")&&"1"==a.oh&&a.hasOwnProperty("oh_info")){var b=JSON.parse(a.oh_info);(null!=b|| void 0!=b)&&"object"==typeof b&&b.hasOwnProperty("date")&&b.hasOwnProperty("timer")&&(a.oh_info_parce_date=b.date,a.oh_info_parce_timer=b.timer)}IB_MODAL_WRAPPER.html(k(a));var l=void 0!==Cookies.get("_ib_user_firstname")?Cookies.get("_ib_user_firstname"):"",m=void 0!==Cookies.get("_ib_user_lastname")?Cookies.get("_ib_user_lastname"):"",n=void 0!==Cookies.get("_ib_user_email")?Cookies.get("_ib_user_email"):"",o=void 0!==Cookies.get("_ib_user_phone")&&"null"!=Cookies.get("_ib_user_phone")?Cookies.get("_ib_user_phone"):"";if((c=$(".ib-propery-inquiry-f")).find('[name="first_name"]').val(l),c.find('[name="last_name"]').val(m),c.find('[name="email_address"]').val(n),c.find('[name="phone_number"]').val(o),parseInt(a.img_cnt,10)>0&&(IB_MODAL_SLIDER=(IB_MODAL_SLIDER=IB_MODAL_WRAPPER.find(".ib-pvslider:eq(0)")).greatSlider({type:"swipe",nav:!0,bullets:!1,lazyLoad:!0,navSpeed:150,layout:{arrowDefaultStyles:!1},fullscreen:!0,layout:{fsButtonDefaultStyles:!1,fsButtonClass:"ib-btnfs"},breakPoints:{640:{items:2},1024:{items:3}},onInited:function(){$(window).width()>767&&IB_MODAL_WRAPPER.find(".gs-item-slider").on("click",function(){IB_MODAL_SLIDER.fullscreen("in",$(this).index()+1)});let a=IB_MODAL_WRAPPER.find(".ib-pvsinumber");a.length?IB_MODAL_WRAPPER.find(".ib-pvsinumber").text(IB_MODAL_WRAPPER.find(".gs-item-active").index()+1+" of "+IB_MODAL_WRAPPER.find(".ib-pvsitem").length):IB_MODAL_WRAPPER.find(".gs-container-items").append('<span class="ib-pvsinumber">'+(IB_MODAL_WRAPPER.find(".gs-item-active").index()+1)+" of "+IB_MODAL_WRAPPER.find(".ib-pvsitem").length+"</span>")},onFullscreenIn(){let a=IB_MODAL_WRAPPER.find(".ib-pvsititle");a.length||IB_MODAL_WRAPPER.find(".gs-container-items").append('<span class="ib-pvsititle">'+$(".ib-ptitle").text()+" "+$(".ib-pstitle").text()+"</span>")},onStepEnd(b,a){IB_MODAL_WRAPPER.find(".ib-pvsinumber").text(a+" of "+IB_MODAL_WRAPPER.find(".ib-pvsitem").length)}})),0===parseInt(a.img_cnt,10)){var e={lat:parseFloat(a.lat),lng:parseFloat(a.lng)},f=new google.maps.Map(IB_MODAL_WRAPPER.find(".ib-pmap")[0],{zoom:18,center:e,styles:style_map,gestureHandling:"cooperative",panControl:!1,scrollwheel:!1,disableDoubleClickZoom:!0,disableDefaultUI:!0,streetViewControl:!0});function p(a){a.stopPropagation(),a.preventDefault(),f.setMapTypeId(google.maps.MapTypeId.HYBRID),$(this).hasClass("is-active")?($(this).removeClass("is-active"),f.setMapTypeId(google.maps.MapTypeId.ROADMAP)):($(this).addClass("is-active"),f.setMapTypeId(google.maps.MapTypeId.HYBRID))}function q(a){a.stopPropagation(),a.preventDefault(),f.setZoom(f.getZoom()+1)}function r(a){a.stopPropagation(),a.preventDefault(),f.setZoom(f.getZoom()-1)}function s(){var a=f.getDiv().firstChild;t(a)?v():u(a),document.onwebkitfullscreenchange=document.onmsfullscreenchange=document.onmozfullscreenchange=document.onfullscreenchange=function(){t(a)?fullscreenControl.classList.add("is-fullscreen"):fullscreenControl.classList.remove("is-fullscreen")}}function t(a){return(document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement||document.msFullscreenElement)==a}function u(a){a.requestFullscreen?a.requestFullscreen():a.webkitRequestFullScreen?a.webkitRequestFullScreen():a.mozRequestFullScreen?a.mozRequestFullScreen():a.msRequestFullScreen&&a.msRequestFullScreen()}function v(){document.exitFullscreen?document.exitFullscreen():document.webkitExitFullscreen?document.webkitExitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.msExitFullscreen&&document.msExitFullscreen()}new google.maps.Marker({position:e,map:f}),google.maps.event.addListenerOnce(f,"tilesloaded",function(){(mapButtonsWrapper=document.createElement("div")).classList.add("flex-map-controls-ct"),(fullscreenControl=document.createElement("div")).classList.add("flex-map-fullscreen"),mapButtonsWrapper.appendChild(fullscreenControl),(mapZoomInButton=document.createElement("div")).classList.add("flex-map-zoomIn"),mapButtonsWrapper.appendChild(mapZoomInButton),(mapZoomOutButton=document.createElement("div")).classList.add("flex-map-zoomOut"),mapButtonsWrapper.appendChild(mapZoomOutButton),(satelliteMapButton=document.createElement("div")).classList.add("flex-satellite-button"),mapButtonsWrapper.appendChild(satelliteMapButton),google.maps.event.addDomListener(mapZoomInButton,"click",q),google.maps.event.addDomListener(mapZoomOutButton,"click",r),google.maps.event.addDomListener(fullscreenControl,"click",s),google.maps.event.addDomListener(satelliteMapButton,"click",p),f.controls[google.maps.ControlPosition.TOP_RIGHT].push(mapButtonsWrapper)})}if($("#ib-modal-property-map").length){var g={lat:parseFloat(a.lat),lng:parseFloat(a.lng)},h=new google.maps.Map(document.getElementById("ib-modal-property-map"),{zoom:18,center:g,styles:style_map,gestureHandling:"cooperative",panControl:!1,scrollwheel:!1,disableDoubleClickZoom:!0,disableDefaultUI:!0,streetViewControl:!0});function w(a){a.stopPropagation(),a.preventDefault(),h.setMapTypeId(google.maps.MapTypeId.HYBRID),$(this).hasClass("is-active")?($(this).removeClass("is-active"),h.setMapTypeId(google.maps.MapTypeId.ROADMAP)):($(this).addClass("is-active"),h.setMapTypeId(google.maps.MapTypeId.HYBRID))}function x(a){a.stopPropagation(),a.preventDefault(),h.setZoom(h.getZoom()+1)}function y(a){a.stopPropagation(),a.preventDefault(),h.setZoom(h.getZoom()-1)}function z(){var a=h.getDiv().firstChild;A(a)?C():B(a),document.onwebkitfullscreenchange=document.onmsfullscreenchange=document.onmozfullscreenchange=document.onfullscreenchange=function(){A(a)?fullscreenControl.classList.add("is-fullscreen"):fullscreenControl.classList.remove("is-fullscreen")}}function A(a){return(document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement||document.msFullscreenElement)==a}function B(a){a.requestFullscreen?a.requestFullscreen():a.webkitRequestFullScreen?a.webkitRequestFullScreen():a.mozRequestFullScreen?a.mozRequestFullScreen():a.msRequestFullScreen&&a.msRequestFullScreen()}function C(){document.exitFullscreen?document.exitFullscreen():document.webkitExitFullscreen?document.webkitExitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.msExitFullscreen&&document.msExitFullscreen()}new google.maps.Marker({position:g,map:h}),google.maps.event.addListenerOnce(h,"tilesloaded",function(){(mapButtonsWrapper=document.createElement("div")).classList.add("flex-map-controls-ct"),(fullscreenControl=document.createElement("div")).classList.add("flex-map-fullscreen"),mapButtonsWrapper.appendChild(fullscreenControl),(mapZoomInButton=document.createElement("div")).classList.add("flex-map-zoomIn"),mapButtonsWrapper.appendChild(mapZoomInButton),(mapZoomOutButton=document.createElement("div")).classList.add("flex-map-zoomOut"),mapButtonsWrapper.appendChild(mapZoomOutButton),(satelliteMapButton=document.createElement("div")).classList.add("flex-satellite-button"),mapButtonsWrapper.appendChild(satelliteMapButton),google.maps.event.addDomListener(mapZoomInButton,"click",x),google.maps.event.addDomListener(mapZoomOutButton,"click",y),google.maps.event.addDomListener(fullscreenControl,"click",z),google.maps.event.addDomListener(satelliteMapButton,"click",w),h.controls[google.maps.ControlPosition.TOP_RIGHT].push(mapButtonsWrapper)})}if(/iPhone|iPad|iPod|Android/i.test(navigator.userAgent))document.title="Checkout this property #"+a.mls_num+" "+a.address_short+" "+a.address_large,"undefined"!=typeof IB_AGENT_PERMALINK?history.pushState(null,null,IB_AGENT_PERMALINK+"/property/"+a.slug):history.pushState(null,null,__flex_g_settings.propertyDetailPermalink+"/"+a.slug);else{var i=new URLSearchParams(window.location.search);i.set("show",a.mls_num),history.pushState(null,null,"?"+i.toString())}if(void 0===Cookies.get("_ib_disabled_forcereg")){if(!0===IB_HAS_LEFT_CLICKS){if(IB_CURRENT_LEFT_CLICKS=parseInt(Cookies.get("_ib_left_click_force_registration"),10)-1,Cookies.set("_ib_left_click_force_registration",IB_CURRENT_LEFT_CLICKS),!1!=typeof idxboost_force_registration&& void 0!=idxboost_force_registration&& !0==idxboost_force_registration&&0>=parseInt(Cookies.get("_ib_left_click_force_registration"),10)&&"yes"===__flex_g_settings.anonymous){$("#modal_login").addClass("active_modal").find("[data-tab]").removeClass("active"),$("#modal_login").addClass("active_modal").find("[data-tab]:eq(1)").addClass("active"),$("#modal_login").find(".item_tab").removeClass("active"),$("#tabRegister").addClass("active"),$("#modal_login #msRst").empty().html($("#mstextRst").html()),$("button.close-modal").addClass("ib-close-mproperty"),$(".overlay_modal").css("background-color","rgba(0,0,0,0.8);"),$("#modal_login h2").html($("#modal_login").find("[data-tab]:eq(1)").data("text-force"));var d=$(".header-tab a[data-tab='tabRegister']").attr("data-text");$("#modal_login .modal_cm .content_md .heder_md .ms-title-modal").html(d)}}else if("yes"===__flex_g_settings.anonymous&&(__flex_g_settings.hasOwnProperty("force_registration")&&1==__flex_g_settings.force_registration|| !1!=typeof idxboost_force_registration&&"undefined"!=typeof idxboost_force_registration&& void 0!=idxboost_force_registration&& !0==idxboost_force_registration)){$("#modal_login").addClass("active_modal").find("[data-tab]").removeClass("active"),$("#modal_login").addClass("active_modal").find("[data-tab]:eq(1)").addClass("active"),$("#modal_login").find(".item_tab").removeClass("active"),$("#tabRegister").addClass("active"),$("#modal_login #msRst").empty().html($("#mstextRst").html()),$("button.close-modal").addClass("ib-close-mproperty"),$(".overlay_modal").css("background-color","rgba(0,0,0,0.8);"),$("#modal_login h2").html($("#modal_login").find("[data-tab]:eq(1)").data("text-force"));var d=$(".header-tab a[data-tab='tabRegister']").attr("data-text");$("#modal_login .modal_cm .content_md .heder_md .ms-title-modal").html(d)}}__flex_g_settings.hasOwnProperty("google_recaptcha_public_key")&&""!=__flex_g_settings.google_recaptcha_public_key&&($(".ib-propery-inquiry-f:eq(0)").find('input[name="recaptcha_response"]').remove(),grecaptcha.execute(__flex_g_settings.google_recaptcha_public_key).then(function(a){$(".ib-propery-inquiry-f:eq(0)").append('<input type="hidden" name="recaptcha_response" value="'+a+'">'),console.dir(a)}))}}}),console.log("Open Property #"+a+" in modal.")}window.loadPropertyInModal=a}IB_MODAL_WRAPPER.length&&(IB_MODAL_WRAPPER.on("click",".ib-rel-property",function(b){b.preventDefault();var c=$(this).data("mls");a(c)}),IB_MODAL_WRAPPER.on("click",".ib-pfavorite",function(a){if("yes"===__flex_g_settings.anonymous){if($(".register").length){$(".register").click();var b=$(".header-tab a[data-tab='tabRegister']").attr("data-text");$("#modal_login .modal_cm .content_md .heder_md .ms-title-modal").html(b)}return}var c=$(this).data("mls");$(this).data("token-alert"),$(this).hasClass("ib-pf-active")?$(this).children().html(word_translate.save):$(this).children().html(word_translate.remove),$(this).toggleClass("ib-pf-active"),markPropertyAsFavorite(c,a.target,"modal")}),IB_MODAL_WRAPPER.on("click",".ib-pbtnopen",function(){var a=$(this).data("permalink");"undefined"!=typeof is_references_active&&"yes"==is_references_active&&Cookies.set("reference_force_registration","yes"),window.open(a)}),IB_MODAL_WRAPPER.on("click",".ib-pbtnclose",function(){if(IB_MODAL_WRAPPER.find(".ib-modal-master").removeClass("ib-md-active"),IB_MODAL_WRAPPER.empty(),$("body").removeClass("only-mobile"),/iPhone|iPad|iPod|Android/i.test(navigator.userAgent))document.title=initial_title,history.pushState(null,null,initial_href);else{var a=new URLSearchParams(window.location.search);a.delete("show"),""===a.toString()?history.pushState(null,null,ib_path_filters):history.pushState(null,null,"?"+a.toString())}$("html").removeClass("ib-mpropertie-open"),void 0!==originalPositionY&&(console.log("restoring to: "+originalPositionY),window.scrollTo(0,originalPositionY))}),IB_MODAL_WRAPPER.on("click",".ib-plsifb",function(e){e.preventDefault();var a="https://www.facebook.com/sharer/sharer.php?",b={u:$(this).attr("href")};for(var c in b)a+="&"+c+"="+encodeURIComponent(b[c]);var d=window.open(a,"","left=0,top=0,width=550,height=450,personalbar=0,toolbar=0,scrollbars=0,resizable=0");d.focus&&d.focus()}),IB_MODAL_WRAPPER.on("click",".ib-plsitw",function(f){f.preventDefault();var b="http://twitter.com/share?",a=[],g=1==$(this).data("rental")?"Rent ":"Sale ";a.push($(this).data("type")),a.push(" for "+g),a.push($(this).data("price")),a.push(" #"+$(this).data("mls")),a.push(" in "),a.push($(this).data("address")+" ");var c={url:$(this).attr("href"),text:a.join("")};for(var d in c)b+="&"+d+"="+encodeURIComponent(c[d]);var e=window.open(b,"","left=0,top=0,width=550,height=450,personalbar=0,toolbar=0,scrollbars=0,resizable=0");e.focus&&e.focus()}),IB_MODAL_WRAPPER.on("click",".ib-pscalculator",function(){var b=$(this).data("price").replace(/[^\d]/g,"");$(".ib-property-mortgage-f:eq(0)").trigger("reset");var c=$(".ib-property-mc-dp:eq(0)").val(),d=$(".ib-property-mc-ty:eq(0)").val(),e=$(".ib-property-mc-ir:eq(0)").val();$(".ib-property-mc-pp").val("$"+_.formatPrice(b));var a=calculate_mortgage(b,c,d,e);$(".ib-calc-mc-mortgage").html("$"+a.mortgage),$(".ib-calc-mc-down-payment").html("$"+a.down_payment),$(".ib-calc-mc-monthly").html("$"+a.monthly),$(".ib-calc-mc-totalmonthly").html("$"+a.total_monthly),console.dir(a),console.log("open mortgage calculator"),$("#ib-mortage-calculator").addClass("ib-md-active")}),$(".ib-property-mortage-submit").on("click",function(){var b=$(".ib-property-mc-pp:eq(0)").val(),c=$(".ib-property-mc-dp:eq(0)").val(),d=$(".ib-property-mc-ty:eq(0)").val(),e=$(".ib-property-mc-ir:eq(0)").val(),a=calculate_mortgage(b,c,d,e);$(".ib-calc-mc-mortgage").html("$"+a.mortgage),$(".ib-calc-mc-down-payment").html("$"+a.down_payment),$(".ib-calc-mc-monthly").html("$"+a.monthly),$(".ib-calc-mc-totalmonthly").html("$"+a.total_monthly),$(".ib-price-calculator").text("$"+a.monthly+"/mo")}),IB_MODAL_WRAPPER.on("click",".ib-psemailfriend",function(){var a=$(this).data("mls");$(".ib-property-share-friend-f:eq(0)").trigger("reset"),$(".ib-property-share-mls-num:eq(0)").val(a),$("#ib-email-to-friend").addClass("ib-md-active")}),$(".ib-property-share-friend-f").on("submit",function(a){a.preventDefault();var b=$(this);__flex_g_settings.hasOwnProperty("has_enterprise_recaptcha")?"1"==__flex_g_settings.has_enterprise_recaptcha||grecaptcha.ready(function(){grecaptcha.execute(__flex_g_settings.google_recaptcha_public_key,{action:"share_property_with_friend"}).then(function(e){b.prepend('<input type="hidden" name="recaptcha_response" value="'+e+'">');var a=b.serialize(),f=b.find("input[name='mls_number']:eq(0)").val(),c=__flex_idx_filter_regular.shareWithFriendEndpoint.replace(/{{mlsNumber}}/g,f),d=$("#idxboost_collection_xr").find('[name="building_id"]').val();void 0!=d&&(c=__flex_idx_filter_regular.shareWithFriendBuildingEndpoint.replace(/{{codBuilding}}/g,d),a=a+"&url="+encodeURIComponent(window.location.href)),$.ajax({type:"POST",url:c,data:{access_token:IB_ACCESS_TOKEN,flex_credentials:Cookies.get("ib_lead_token"),form_data:a},success:function(a){}}),$("#ib-email-to-friend").removeClass("ib-md-active"),$("#ib-email-thankyou").addClass("ib-md-active")})}):grecaptcha.ready(function(){grecaptcha.execute(__flex_g_settings.google_recaptcha_public_key,{action:"share_property_with_friend"}).then(function(a){b.prepend('<input type="hidden" name="recaptcha_response" value="'+a+'">');var c=b.serialize(),d=b.find("input[name='mls_number']:eq(0)").val(),e=__flex_idx_filter_regular.shareWithFriendEndpoint.replace(/{{mlsNumber}}/g,d);$.ajax({type:"POST",url:e,data:{access_token:IB_ACCESS_TOKEN,flex_credentials:Cookies.get("ib_lead_token"),form_data:c},success:function(a){}}),$("#ib-email-to-friend").removeClass("ib-md-active"),$("#ib-email-thankyou").addClass("ib-md-active")})})}),IB_MODAL_WRAPPER.on("click",".ib-psprint",function(){var a=$("#printMessageBox"),b=$(".ib-property-detail:eq(0)");a.fadeIn(),b.addClass("ib-phw-print").printArea({onClose:function(){a.fadeOut("fast"),b.removeClass("ib-phw-print")}})}),IB_MODAL_WRAPPER.on("submit",".ib-propery-inquiry-f",function(c){c.preventDefault();var a=$(this).serialize();console.log(a),console.log("handle share property");var d=$(this).find("input[name='mls_number']:eq(0)").val(),b=__flex_idx_filter_regular.requestInformationEndpoint.replace(/{{mlsNumber}}/g,d);console.log(b),$.ajax({type:"POST",url:b,data:{access_token:IB_ACCESS_TOKEN,flex_credentials:Cookies.get("ib_lead_token"),form_data:a},success:function(a){}}),$(".ib-propery-inquiry-f:eq(0)").trigger("reset"),$("#ib-email-thankyou").addClass("ib-md-active")}),IB_MODAL_WRAPPER.on("click",".ib-btnfs",function(){void 0!==IB_MODAL_SLIDER&&IB_MODAL_SLIDER.fullscreen("in")}),IB_MODAL_WRAPPER.on("click",".ib-paitem",function(){$(this).toggleClass("ib-pai-active")}),IB_MODAL_WRAPPER.on("click",".ib-pvitem",function(g){var a=$(this).data("id");if(!$(this).hasClass("ib-pvi-active")&&"video"!=a&&($(this).parent().find(">li").removeClass("ib-pvi-active"),$(this).addClass("ib-pvi-active"),$(this).parent().parent().parent().removeClass("ib-pva-photos ib-pva-map").addClass("ib-pva-"+a),"map"===a)){var d=$(this).data("lat"),e=$(this).data("lng"),f=$(this).data("loaded");if("no"===f){var b={lat:parseFloat(d),lng:parseFloat(e)},c=new google.maps.Map(IB_MODAL_WRAPPER.find(".ib-pmap")[0],{zoom:18,center:b,styles:style_map,gestureHandling:"cooperative",panControl:!1,scrollwheel:!1,disableDoubleClickZoom:!0,disableDefaultUI:!0,streetViewControl:!0});function h(a){a.stopPropagation(),a.preventDefault(),c.setMapTypeId(google.maps.MapTypeId.HYBRID),$(this).hasClass("is-active")?($(this).removeClass("is-active"),c.setMapTypeId(google.maps.MapTypeId.ROADMAP)):($(this).addClass("is-active"),c.setMapTypeId(google.maps.MapTypeId.HYBRID))}function i(a){a.stopPropagation(),a.preventDefault(),c.setZoom(c.getZoom()+1)}function j(a){a.stopPropagation(),a.preventDefault(),c.setZoom(c.getZoom()-1)}function k(){var a=c.getDiv().firstChild;l(a)?n():m(a),document.onwebkitfullscreenchange=document.onmsfullscreenchange=document.onmozfullscreenchange=document.onfullscreenchange=function(){l(a)?fullscreenControl.classList.add("is-fullscreen"):fullscreenControl.classList.remove("is-fullscreen")}}function l(a){return(document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement||document.msFullscreenElement)==a}function m(a){a.requestFullscreen?a.requestFullscreen():a.webkitRequestFullScreen?a.webkitRequestFullScreen():a.mozRequestFullScreen?a.mozRequestFullScreen():a.msRequestFullScreen&&a.msRequestFullScreen()}function n(){document.exitFullscreen?document.exitFullscreen():document.webkitExitFullscreen?document.webkitExitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.msExitFullscreen&&document.msExitFullscreen()}new google.maps.Marker({position:b,map:c}),google.maps.event.addListenerOnce(c,"tilesloaded",function(){(mapButtonsWrapper=document.createElement("div")).classList.add("flex-map-controls-ct"),(fullscreenControl=document.createElement("div")).classList.add("flex-map-fullscreen"),mapButtonsWrapper.appendChild(fullscreenControl),(mapZoomInButton=document.createElement("div")).classList.add("flex-map-zoomIn"),mapButtonsWrapper.appendChild(mapZoomInButton),(mapZoomOutButton=document.createElement("div")).classList.add("flex-map-zoomOut"),mapButtonsWrapper.appendChild(mapZoomOutButton),(satelliteMapButton=document.createElement("div")).classList.add("flex-satellite-button"),mapButtonsWrapper.appendChild(satelliteMapButton),google.maps.event.addDomListener(mapZoomInButton,"click",i),google.maps.event.addDomListener(mapZoomOutButton,"click",j),google.maps.event.addDomListener(fullscreenControl,"click",k),google.maps.event.addDomListener(satelliteMapButton,"click",h),c.controls[google.maps.ControlPosition.TOP_RIGHT].push(mapButtonsWrapper)})}}}))