var ajax_request_filter,myLazyLoad,baths_slider,beds_slider,sqft_slider,lotsize_slider,price_sale_slider,price_rent_slider,year_built_slider,flex_filter_sort,flex_pagination,flex_search_rental_switch,flex_waterfront_switch,flex_parking_switch,flex_autocomplete,flex_autocomplete_inner,IB_COMMERCIAL=$("#ib-template-property"),$viewFilter=$(".filter-views"),$wrapResult=$(".wrap-result"),IB_PAGINATION=$("#ib-template-display-pagination"),flex_ui_loaded=!1,$cuerpo=jQuery("body"),$ventana=jQuery(window),arraytest_pryueba="",currentfiltemid="",xDown=null,yDown=null,scrollTopElement=$(".clidxboost-sc-filters");function filter_refresh_search(){$(".flex-idx-filter-form:eq(0)").attr("filtemid"),$("input[name='idx[oh]']").val();void 0!==ajax_request_filter&&ajax_request_filter.abort(),ajax_request_filter=$.ajax({url:flex_idx_filter_params.ajaxUrl,type:"POST",data:filter_metadata,dataType:"json",success:function(e){"yes"===__flex_g_settings.anonymous&&(t={search_url:location.href,search_count:e.counter,name:e.title,search_query:e.condition},localStorage.setItem("IB_SAVE_FILTER_PAYLOAD",JSON.stringify(t))),e.items;var t=e.pagination,a={},s=(1<t.total_pages_count&&(a={pagination:e.pagination}),{properties:e.items}),s=Handlebars.compile(IB_COMMERCIAL.html())(s);$(".result-search-commercial").html(s);s=Handlebars.compile(IB_PAGINATION.html())(a);$("#nav-results").html(s),$("html, body").animate({scrollTop:scrollTopElement},0),$("#info-subfilters").html(word_translate.showing+" "+t.offset.start+" "+word_translate.to+" "+t.offset.end+" "+word_translate.of+" "+_.formatPrice(e.counter)+" "+word_translate.properties+"."),myLazyLoad.update()}})}function mutaSelectViews(e){var t,a;e?$viewFilter.find("ul").length||(e=$viewFilter.find("option:selected").val(),$viewFilter.find("option").each(function(){$(this).replaceWith('<li class="'+$(this).val()+'">'+$(this).text()+"</li>")}),(t=$viewFilter.find("select")).replaceWith("<ul>"+t.html()+"</ul>"),$viewFilter.find("."+e).addClass("active"),$viewFilter.removeClass(e)):$viewFilter.find("select").length||(t=$viewFilter.find(".active").index(),e=$viewFilter.find(".active").attr("class").split(" ")[0],$viewFilter.find("li").each(function(){$(this).replaceWith('<option value="'+$(this).attr("class").split(" ")[0]+'">'+$(this).text()+"</option>")}),(a=$viewFilter.find("ul")).replaceWith("<select>"+a.html()+"</select>"),$viewFilter.find("option").eq(t).prop("selected",!0).siblings().prop("selected",!1),$viewFilter.addClass(e))}scrollTopElement=scrollTopElement.length?+$(".clidxboost-sc-filters").offset().top-100:0,$(document).ready(function(){void 0===myLazyLoad&&(myLazyLoad=new LazyLoad({elements_selector:".flex-lazy-image",callback_load:function(){},callback_error:function(e){$(e).attr("src","https://idxboost.com/i/default_thumbnail.jpg").removeClass("error").addClass("loaded"),$(e).attr("data-origin","https://idxboost.com/i/default_thumbnail.jpg")}})),filter_refresh_search()}),Handlebars.registerHelper("paginationBlock",function(e){console.log(e);var t=[];e.has_prev_page&&1<e.total_pages_count&&(t.push('<a href="#" data-page="1" title="First Page" id="firstp" class="ad visible">'),t.push('<span class="clidxboost-icon-arrow-select"></span>'),t.push('<span class="clidxboost-icon-arrow-select"></span>'),t.push("<span>First page</span>"),t.push("</a>")),e.has_prev_page&&(t.push('<a href="#" data-page="'+(e.current_page_number-1)+'" title="Prev Page" id="prevn" class="arrow clidxboost-icon-arrow-select prevn visible">'),t.push("<span>Previous page</span>"),t.push("</a>")),t.push('<ul id="principal-nav">');for(var a=0,s=e.range.length;a<s;a++){var i=e.range[a];e.current_page_number===i?t.push('<li class="active"><a href="#" data-page="'+i+'">'+i+"</a></li>"):t.push('<li><a href="#" data-page="'+i+'">'+i+"</a></li>")}return t.push("</ul>"),e.has_next_page&&(t.push('<a href="#" data-page="'+(e.current_page_number+1)+'" title="Prev Page" id="nextn" class="arrow clidxboost-icon-arrow-select nextn visible">'),t.push("<span>Next page</span>"),t.push("</a>")),e.has_next_page&&1<e.total_pages_count&&(t.push('<a href="#" data-page="'+e.total_pages_count+'" title="First Page" id="lastp" class="ad visible">'),t.push('<span class="clidxboost-icon-arrow-select"></span>'),t.push('<span class="clidxboost-icon-arrow-select"></span>'),t.push("<span>Last page</span>"),t.push("</a>")),t.join("")}),Handlebars.registerHelper("DFformatBathsHalf",function(e){return 0<e?".5":""}),Handlebars.registerHelper("DFhandleStatusProperty",function(e){return"yes"===e.recently_listed?0<e.min_ago&&""!=e.min_ago_txt?'<div class="flex-property-new-listing">'+e.min_ago_txt+"</div>":'<div class="flex-property-new-listing">'+word_translate.new_listing+"</div>":1!=e.status?'<div class="flex-property-new-listing">'+e.status_name+"</div>":void 0}),Handlebars.registerHelper("DFhandleTypeView",function(e){return'<h2 title="'+e.full_address+'" class="ms-property-address"><div class="ms-title-address -address-top">'+e.full_address_top+'</div><div class="ms-br-line">,</div><div class="ms-title-address -address-bottom">'+e.full_address_bottom+"</div></h2>"}),Handlebars.registerHelper("DFhandleOhContent",function(e){if(e.hasOwnProperty("oh_info")&&null!=e.oh_info){e=JSON.parse(e.oh_info);if("object"==typeof e&&e.hasOwnProperty("date")&&e.hasOwnProperty("timer"))return'<div class="ms-open"><span class="ms-wrap-open"><span class="ms-open-title">Open House</span><span class="ms-open-date">'+e.date+'</span><span class="ms-open-time">'+e.timer+"</span></span></div>"}}),Handlebars.registerHelper("DFhandleFormatAddress",function(e){var t=e.address_large.split(", ");return" <span>"+e.address_short.replace(/# /,"#")+", "+t[0]+", "+t[1]+"</span>"}),Handlebars.registerHelper("DFformatPrice",function(e){return"$"+_.formatPrice(e)}),Handlebars.registerHelper("DFrentalType",function(e){var t="";return t="1"==e?"/"+word_translate.month:t}),Handlebars.registerHelper("DFidxReduced",function(e){return""==e?'<li class="pr">'+e+"</li>":e<0?'<li class="pr down">'+e+"%</li>":'<li class="pr up">'+e+"%</li>"}),Handlebars.registerHelper("DFhandleDevelopment",function(e){return""!==e.development&&null!==e.development?'<li class="development"><span>'+e.development+"</span></li>":""!==e.complex&&null!==e.complex?'<li class="development"><span>'+e.complex+"</span></li>":'<li class="development"><span>'+e.subdivision+"</span></li>"}),Handlebars.registerHelper("DFidxGalleryImages",function(e){var t=[],a="";e.gallery.length<=1&&(a="no-zoom"),t.push('<div class="wrap-slider '+a+'">'),t.push("<ul>");for(var s=0,i=e.gallery.length;s<i;s++)t.push(s<=0?'<li class="flex-slider-current"><img class="flex-lazy-image" data-original="'+e.gallery[s]+'"></li>':'<li class="flex-slider-item-hidden"><img class="flex-lazy-image" data-original="'+e.gallery[s]+'"></li>');return t.push("</ul>"),1<e.gallery.length&&(t.push('<button class="prev flex-slider-prev"><span class="clidxboost-icon-arrow-select"></span></button>'),t.push('<button class="next flex-slider-next"><span class="clidxboost-icon-arrow-select"></span></button>')),e.hasOwnProperty("status")&&(e.is_favorite?t.push('<button class="clidxboost-btn-check flex-favorite-btn"><span class="clidxboost-icon-check active"></span></button>'):t.push('<button class="clidxboost-btn-check flex-favorite-btn"><span class="clidxboost-icon-check"></span></button>')),t.push("</div>"),t.join("")}),Handlebars.registerHelper("DFformatSqft",function(e){return _.formatPrice(e)}),Handlebars.registerHelper("DFidxPermalinkModal",function(e){return __flex_idx_search_filter.propertyDetailPermalink+"/"+e}),Handlebars.registerHelper("DFformatLotSize",function(e){return _.formatPrice(e)}),Handlebars.registerHelper("DFidxPermalink",function(e){return flex_idx_filter_params.propertyDetailPermalink+"/"+e}),$(document).on("click",".flex-slider-next",function(e){e.stopPropagation();var e=$(this).prev().prev().find("li.flex-slider-current").index();$(this).prev().prev().find("li").length-1<=e?e=0:e+=1,$(this).prev().prev().find("li").removeClass("flex-slider-current"),$(this).prev().prev().find("li").addClass("flex-slider-item-hidden"),$(this).prev().prev().find("li").eq(e).removeClass("flex-slider-item-hidden").addClass("flex-slider-current"),myLazyLoad.update(),"yes"===__flex_g_settings.anonymous&&__flex_g_settings.hasOwnProperty("force_registration")&&1==__flex_g_settings.force_registration&&3<=++countClickAnonymous&&($("#modal_login").addClass("active_modal").find("[data-tab]").removeClass("active"),$("#modal_login").addClass("active_modal").find("[data-tab]:eq(1)").addClass("active"),$("#modal_login").find(".item_tab").removeClass("active"),$("#tabRegister").addClass("active"),$("#modal_login #msRst").empty().html($("#mstextRst").html()),$("button.close-modal").addClass("ib-close-mproperty"),e=$(".header-tab a[data-tab='tabRegister']").attr("data-text"),$("#modal_login .modal_cm .content_md .heder_md .ms-title-modal").html(e),countClickAnonymous=0)}),$(document).on("click",".flex-slider-prev",function(e){e.stopPropagation();var e=$(this).prev().find("li.flex-slider-current").index(),t=$(this).prev().find("li").length,e=0===e?t-1:e-1;$(this).prev().find("li").removeClass("flex-slider-current"),$(this).prev().find("li").addClass("flex-slider-item-hidden"),$(this).prev().find("li").eq(e).removeClass("flex-slider-item-hidden").addClass("flex-slider-current"),myLazyLoad.update(),"yes"===__flex_g_settings.anonymous&&__flex_g_settings.hasOwnProperty("force_registration")&&1==__flex_g_settings.force_registration&&3<=++countClickAnonymous&&($("#modal_login").addClass("active_modal").find("[data-tab]").removeClass("active"),$("#modal_login").addClass("active_modal").find("[data-tab]:eq(1)").addClass("active"),$("#modal_login").find(".item_tab").removeClass("active"),$("#tabRegister").addClass("active"),$("#modal_login #msRst").empty().html($("#mstextRst").html()),$("button.close-modal").addClass("ib-close-mproperty"),t=$(".header-tab a[data-tab='tabRegister']").attr("data-text"),$("#modal_login .modal_cm .content_md .heder_md .ms-title-modal").html(t),countClickAnonymous=0)}),$viewFilter.on("change","select",function(){switch(console.log($viewFilter),$(this).find("option:selected").val()){case"grid":$viewFilter.removeClass("list map").addClass("grid"),$wrapResult.removeClass("view-list view-map").addClass("view-grid"),$cuerpo.removeClass("view-list view-map"),$("#idx_view").val("grid");break;case"list":$viewFilter.removeClass("grid map").addClass("list"),$wrapResult.removeClass("view-grid view-map").addClass("view-list"),$cuerpo.addClass("view-list").removeClass("view-map"),$("#idx_view").val("list");break;case"map":$viewFilter.removeClass("list grid").addClass("map"),$wrapResult.removeClass("view-list view-grid").addClass("view-map"),$cuerpo.removeClass("view-list").addClass("view-map"),$("#idx_view").val("map"),setTimeout(function(){var e=map.getCenter(),t=map.getZoom();if(google.maps.event.trigger(map,"resize"),!1===renderedMarkers){for(var a=new google.maps.LatLngBounds,s=0,i=markers.length;s<i;s++)a.extend(markers[s].position);map.fitBounds(a)}else map.setCenter(e),map.setZoom(t)},100)}new LazyLoad({callback_error:function(e){$(e).attr("src","https://idxboost.com/i/default_thumbnail.jpg").removeClass("error").addClass("loaded"),$(e).attr("data-origin","https://idxboost.com/i/default_thumbnail.jpg")}})}),$viewFilter.on("click","li",function(){switch(currentfiltemid=$(this).parent("ul").parent("li").attr("filtemid"),$(this).addClass("active").siblings().removeClass("active"),$(this).attr("class").split(" ")[0]){case"grid":$(".idxboost-content-filter-"+currentfiltemid+" ").find($wrapResult).removeClass("view-list view-map").addClass("view-grid"),$cuerpo.removeClass("view-list view-map");break;case"list":$(".idxboost-content-filter-"+currentfiltemid+" ").find($wrapResult).removeClass("view-grid view-map").addClass("view-list"),$cuerpo.addClass("view-list").removeClass("view-map");break;case"map":$(".idxboost-content-filter-"+currentfiltemid+" ").find($wrapResult).removeClass("view-list view-grid").addClass("view-map"),$cuerpo.removeClass("view-list").addClass("view-map")}new LazyLoad({callback_error:function(e){$(e).attr("src","https://idxboost.com/i/default_thumbnail.jpg").removeClass("error").addClass("loaded"),$(e).attr("data-origin","https://idxboost.com/i/default_thumbnail.jpg")}})}),$("#filter-views").on("click","li",function(){$(this).hasClass("map")?(mapIsVisible=!0,setTimeout(function(){var e=map.getCenter(),t=map.getZoom();if(google.maps.event.trigger(map,"resize"),!1===renderedMarkers){for(var a=new google.maps.LatLngBounds,s=0,i=markers.length;s<i;s++)a.extend(markers[s].position);map.fitBounds(a)}else map.setCenter(e),map.setZoom(t)},100)):mapIsVisible=!1,new LazyLoad({callback_error:function(e){$(e).attr("src","https://idxboost.com/i/default_thumbnail.jpg").removeClass("error").addClass("loaded"),$(e).attr("data-origin","https://idxboost.com/i/default_thumbnail.jpg")}})}),FILTER_PAGE_URL=$("#flex_idx_sort").data("permalink"),FILTER_PAGE_CURRENT=$("#flex_idx_sort").data("currpage"),view_options=$(".filter-views li"),sort_options=$(".flex_idx_sort"),view_options.length&&view_options.on("click",function(){currentfiltemid=$(this).attr("filtemid"),$(this).hasClass("active")||($(this).html().toLowerCase(),sort_options.val())}),sort_options.length&&sort_options.on("change",function(){currentfiltemid=$(this).attr("filtemid");$("#filter-views li.active:eq(0)").html();var e=$(this).val();filter_metadata.order_by=e,filter_refresh_search()}),flex_ui_loaded=!0,768<=$ventana.width()&&mutaSelectViews(!0),$ventana.on("resize",function(){var e=$ventana.width();768<=e?mutaSelectViews(!0):e<768&&mutaSelectViews(!1)}),$("#wrap-list-result").on("scroll",function(){myLazyLoad.update()}),$("#result-search, .result-search-commercial").on("click",".view-detail",function(e){e.stopPropagation(),e.preventDefault();e=$(this).parent("li").data("mls");loadPropertyInModal(e)}),$("#result-search, .result-search-commercial").on("click",".flex-favorite-btn",function(e){e.stopPropagation(),e.preventDefault();var t,a,s,i=$(this);"yes"===__flex_g_settings.anonymous?($("#modal_login").addClass("active_modal").find("[data-tab]").removeClass("active"),$("#modal_login").addClass("active_modal").find("[data-tab]:eq(1)").addClass("active"),$("#modal_login").find(".item_tab").removeClass("active"),$("#tabRegister").addClass("active"),$("button.close-modal").addClass("ib-close-mproperty"),$(".overlay_modal").css("background-color","rgba(0,0,0,0.8);"),$("#modal_login h2").html($("#modal_login").find("[data-tab]:eq(1)").data("text-force")),e=$(".header-tab a[data-tab='tabRegister']").attr("data-text"),$("#modal_login .modal_cm .content_md .heder_md .ms-title-modal").html(e)):(e=$(this).parents(".propertie").data("class-id"),t=$(this).parents(".propertie").data("mls"),a=$(this).parents(".propertie").data("address"),$(this).find(".clidxboost-icon-check").hasClass("active")?($(this).find(".clidxboost-icon-check").removeClass("active"),s=$(this).attr("data-alert-token"),$.ajax({url:flex_idx_filter_params.ajaxUrl,method:"POST",data:{action:"flex_favorite",class_id:e,mls_num:t,type_action:"remove",token_alert:s},dataType:"json",success:function(e){$(i).attr("data-alert-token","")}})):($(this).find(".clidxboost-icon-check").addClass("active"),$.ajax({url:flex_idx_filter_params.ajaxUrl,method:"POST",data:{action:"flex_favorite",class_id:e,mls_num:t,subject:a,search_url:window.location.href,type_action:"add"},dataType:"json",success:function(e){$(i).attr("data-alert-token",e.token_alert)}})))});