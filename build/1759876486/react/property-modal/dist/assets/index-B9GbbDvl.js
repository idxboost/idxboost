import{e,u as a,j as s,f as t,g as l,h as o,r as i,I as n,M as d,P as r,i as c,o as m,k as p,l as f}from"./bootstrap-D1xkZDE8.js";import{u as h}from"./state-BCq8qzba.js";import{u,r as v}from"./i18n-D0PRNWcO.js";import{g as j,c as x}from"./index-BpLq4uhv.js";const b=({typeView:l,onChangeTypeView:o,onlyVisualizer:i=!1,property:n,handleFavorite:d,handleOpenContact:r,handleOpenShare:c,handleCloseModal:m})=>{const{isFavorite:p}=e(),{favoriteIcon:f}=a();return s.jsx("div",{className:"ms-sf-modal-header",children:s.jsxs("div",{className:"ms-sf-flex",children:[s.jsx("h3",{className:"ms-sf-title ms-sf-ellipsis",children:!i&&n&&s.jsxs(s.Fragment,{children:[n.address_short,s.jsx("span",{children:n.address_large})]})}),s.jsxs("div",{className:"ms-sf-action-buttons",children:[!t&&!i&&s.jsx("div",{className:"ms-sf-item",children:s.jsx("button",{className:"ms-sf-btn -favorite "+(p?"active":""),"aria-label":"Favorite",type:"button","data-tool":"tooltip","data-tool-detail":"Save","data-tool-position":"bottom",onClick:e=>{e.stopPropagation(),d?.()},children:s.jsx("i",{className:`sf-icon-${f}`})})}),!i&&s.jsx("div",{className:"ms-sf-item",children:s.jsx("button",{className:"ms-sf-btn -circle -standard "+("view-slider"===l?"active":""),"aria-label":"Photos","data-tool":"tooltip","data-tool-detail":"Photos","data-tool-position":"bottom","data-view":"view-slider","data-parent":"#fullScreenMediaContent",onClick:()=>o("view-slider"),children:s.jsx("i",{className:"sf-icon-camera"})})}),!i&&s.jsx("div",{className:"ms-sf-item",children:s.jsx("button",{className:"ms-sf-btn -circle -standard "+("view-map"===l?"active":""),"aria-label":"Map","data-tool":"tooltip","data-tool-detail":"Map","data-tool-position":"bottom","data-view":"view-map","data-parent":"#fullScreenMediaContent",onClick:()=>o("view-map"),children:s.jsx("i",{className:"sf-icon-map"})})}),!t&&!i&&s.jsx("div",{className:"ms-sf-item",children:s.jsx("button",{className:"ms-sf-btn -circle -standard","aria-label":"Contact Agent","data-id":"#contactModal","data-tool":"tooltip","data-tool-detail":"Contact Agent","data-tool-position":"bottom",onClick:r,children:s.jsx("i",{className:"sf-icon-envelope-active"})})}),!t&&!i&&s.jsx("div",{className:"ms-sf-item",children:s.jsx("button",{className:"ms-sf-btn -circle -standard","data-id":"#shareModal","aria-label":"Share","data-tool":"tooltip","data-tool-detail":"Share","data-tool-position":"bottom",onClick:c,children:s.jsx("i",{className:"sf-icon-shared"})})}),s.jsx("div",{className:"ms-sf-item",children:s.jsx("button",{className:"ms-sf-btn -circle -standard js-close-st-modal","data-id":"#galleryModal","aria-label":"Close Modal","data-tool":"tooltip","data-tool-detail":"Close","data-tool-position":"bottom",onClick:m,children:s.jsx("i",{className:"sf-icon-close"})})})]})]})})},N=()=>{const e=h(),{t:a}=u(),t=document.getElementById("wpadminbar"),N=t?.offsetHeight,[y,w]=v.useState(!1),[g,C]=v.useState(null),[M]=l(),[S,k]=v.useState(!1),[E,V]=v.useState("view-slider");v.useEffect(()=>{const e=e=>{const a=e.detail;a&&(C(a),w(!0))},a=()=>{w(!1),C(null)};return window.addEventListener(j,e),window.addEventListener(x,a),()=>{window.removeEventListener(j,e),window.removeEventListener(x,a)}},[e]);const _=v.useCallback(()=>{k(!1),V("view-slider"),setTimeout(()=>{o()},300)},[e]);if(v.useEffect(()=>{y&&setTimeout(()=>k(!0),100)},[y]),!y||!g)return null;const I=document.getElementById("gallery-modal")||document.createElement("div");return I.id||(I.id="gallery-modal",document.body.appendChild(I)),i.createPortal(s.jsx("div",{className:"ms-sf-modal active "+(S?"in":""),tabIndex:-1,role:"dialog",id:"galleryModal",children:s.jsx("div",{className:"ms-sf-modal-dialog",role:"document",children:s.jsxs("div",{className:"ms-sf-modal-content "+(S?"active":""),style:{top:N},children:[s.jsx(b,{typeView:E,onChangeTypeView:e=>V(e),onlyVisualizer:g.onlyVisualizer,property:g.property,handleFavorite:function(){g?.property&&f()&&M(g?.property.mls_num)},handleOpenContact:function(){e(p(!0))},handleOpenShare:function(){if(!g?.property)return;const e=c(g?.property,a);m(e)},handleCloseModal:_}),s.jsx("div",{className:"ms-sf-modal-body",children:s.jsxs("div",{className:`ms-sf-media ${E}`,id:"fullScreenMediaContent",children:[s.jsx("div",{className:"ms-sf-wrapper-slider",children:g.image_urls&&s.jsx(n,{thumbnail:g.image_urls[0],images:g.image_urls,showControls:!0,selectedItem:g.selected_image_pos,infiniteLoop:!0})}),!g.onlyVisualizer&&s.jsx("div",{className:"ms-sf-wrapper-map",children:s.jsx(v.Suspense,{fallback:null,children:s.jsx(d,{strategy:"onInteraction",enabled:!0,children:s.jsx(r,{lat:Number(g.property?.lat),lng:Number(g.property?.lng),address:g.property?.address_large||"",id:"propertyViewerMapGallery"})})})}),s.jsx("div",{className:"ms-sf-wrapper-video",children:"video"})]})})]})})}),I)};export{N as default};
