import{a as t,f as n,b as e}from"./index-CcKEQ2Od.js";import{earthRadius as r,featureCollection as i,polygon as o}from"./index-DOZZYVIg.js";import{b as a,c as s}from"./index-Deo1LwyQ.js";function h(t,n,e,r,i){l(t,n,e||0,r||t.length-1,i||f)}function l(t,n,e,r,i){for(;r>e;){if(r-e>600){var o=r-e+1,a=n-e+1,s=Math.log(o),h=.5*Math.exp(2*s/3),f=.5*Math.sqrt(s*h*(o-h)/o)*(a-o/2<0?-1:1);l(t,n,Math.max(e,Math.floor(n-a*h/o+f)),Math.min(r,Math.floor(n+(o-a)*h/o+f)),i)}var g=t[n],u=e,d=r;for(c(t,e,n),i(t[r],g)>0&&c(t,e,r);u<d;){for(c(t,u,d),u++,d--;i(t[u],g)<0;)u++;for(;i(t[d],g)>0;)d--}0===i(t[e],g)?c(t,e,d):c(t,++d,r),d<=n&&(e=d+1),n<=d&&(r=d-1)}}function c(t,n,e){var r=t[n];t[n]=t[e],t[e]=r}function f(t,n){return t<n?-1:t>n?1:0}class g{constructor(t=9){this._maxEntries=Math.max(4,t),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),this.clear()}all(){return this._all(this.data,[])}search(t){let n=this.data;const e=[];if(!Y(t,n))return e;const r=this.toBBox,i=[];for(;n;){for(let o=0;o<n.children.length;o++){const a=n.children[o],s=n.leaf?r(a):a;Y(t,s)&&(n.leaf?e.push(a):X(t,s)?this._all(a,e):i.push(a))}n=i.pop()}return e}collides(t){let n=this.data;if(!Y(t,n))return!1;const e=[];for(;n;){for(let r=0;r<n.children.length;r++){const i=n.children[r],o=n.leaf?this.toBBox(i):i;if(Y(t,o)){if(n.leaf||X(t,o))return!0;e.push(i)}}n=e.pop()}return!1}load(t){if(!t||!t.length)return this;if(t.length<this._minEntries){for(let n=0;n<t.length;n++)this.insert(t[n]);return this}let n=this._build(t.slice(),0,t.length-1,0);if(this.data.children.length)if(this.data.height===n.height)this._splitRoot(this.data,n);else{if(this.data.height<n.height){const t=this.data;this.data=n,n=t}this._insert(n,this.data.height-n.height-1,!0)}else this.data=n;return this}insert(t){return t&&this._insert(t,this.data.height-1),this}clear(){return this.data=w([]),this}remove(t,n){if(!t)return this;let e=this.data;const r=this.toBBox(t),i=[],o=[];let a,s,h;for(;e||i.length;){if(e||(e=i.pop(),s=i[i.length-1],a=o.pop(),h=!0),e.leaf){const r=u(t,e.children,n);if(-1!==r)return e.children.splice(r,1),i.push(e),this._condense(i),this}h||e.leaf||!X(e,r)?s?(a++,e=s.children[a],h=!1):e=null:(i.push(e),o.push(a),a=0,s=e,e=e.children[0])}return this}toBBox(t){return t}compareMinX(t,n){return t.minX-n.minX}compareMinY(t,n){return t.minY-n.minY}toJSON(){return this.data}fromJSON(t){return this.data=t,this}_all(t,n){const e=[];for(;t;)t.leaf?n.push(...t.children):e.push(...t.children),t=e.pop();return n}_build(t,n,e,r){const i=e-n+1;let o,a=this._maxEntries;if(i<=a)return o=w(t.slice(n,e+1)),d(o,this.toBBox),o;r||(r=Math.ceil(Math.log(i)/Math.log(a)),a=Math.ceil(i/Math.pow(a,r-1))),o=w([]),o.leaf=!1,o.height=r;const s=Math.ceil(i/a),h=s*Math.ceil(Math.sqrt(a));B(t,n,e,h,this.compareMinX);for(let l=n;l<=e;l+=h){const n=Math.min(l+h-1,e);B(t,l,n,s,this.compareMinY);for(let e=l;e<=n;e+=s){const i=Math.min(e+s-1,n);o.children.push(this._build(t,e,i,r-1))}}return d(o,this.toBBox),o}_chooseSubtree(t,n,e,r){for(;r.push(n),!n.leaf&&r.length-1!==e;){let e,r=1/0,i=1/0;for(let o=0;o<n.children.length;o++){const a=n.children[o],s=A(a),h=M(t,a)-s;h<i?(i=h,r=s<r?s:r,e=a):h===i&&s<r&&(r=s,e=a)}n=e||n.children[0]}return n}_insert(t,n,e){const r=e?t:this.toBBox(t),i=[],o=this._chooseSubtree(r,this.data,n,i);for(o.children.push(t),p(o,r);n>=0&&i[n].children.length>this._maxEntries;)this._split(i,n),n--;this._adjustParentBBoxes(r,i,n)}_split(t,n){const e=t[n],r=e.children.length,i=this._minEntries;this._chooseSplitAxis(e,i,r);const o=this._chooseSplitIndex(e,i,r),a=w(e.children.splice(o,e.children.length-o));a.height=e.height,a.leaf=e.leaf,d(e,this.toBBox),d(a,this.toBBox),n?t[n-1].children.push(a):this._splitRoot(e,a)}_splitRoot(t,n){this.data=w([t,n]),this.data.height=t.height+1,this.data.leaf=!1,d(this.data,this.toBBox)}_chooseSplitIndex(t,n,e){let r,i=1/0,o=1/0;for(let a=n;a<=e-n;a++){const n=m(t,0,a,this.toBBox),s=m(t,a,e,this.toBBox),h=E(n,s),l=A(n)+A(s);h<i?(i=h,r=a,o=l<o?l:o):h===i&&l<o&&(o=l,r=a)}return r||e-n}_chooseSplitAxis(t,n,e){const r=t.leaf?this.compareMinX:x,i=t.leaf?this.compareMinY:v;this._allDistMargin(t,n,e,r)<this._allDistMargin(t,n,e,i)&&t.children.sort(r)}_allDistMargin(t,n,e,r){t.children.sort(r);const i=this.toBBox,o=m(t,0,n,i),a=m(t,e-n,e,i);let s=y(o)+y(a);for(let h=n;h<e-n;h++){const n=t.children[h];p(o,t.leaf?i(n):n),s+=y(o)}for(let h=e-n-1;h>=n;h--){const n=t.children[h];p(a,t.leaf?i(n):n),s+=y(a)}return s}_adjustParentBBoxes(t,n,e){for(let r=e;r>=0;r--)p(n[r],t)}_condense(t){for(let n,e=t.length-1;e>=0;e--)0===t[e].children.length?e>0?(n=t[e-1].children,n.splice(n.indexOf(t[e]),1)):this.clear():d(t[e],this.toBBox)}}function u(t,n,e){if(!e)return n.indexOf(t);for(let r=0;r<n.length;r++)if(e(t,n[r]))return r;return-1}function d(t,n){m(t,0,t.children.length,n,t)}function m(t,n,e,r,i){i||(i=w(null)),i.minX=1/0,i.minY=1/0,i.maxX=-1/0,i.maxY=-1/0;for(let o=n;o<e;o++){const n=t.children[o];p(i,t.leaf?r(n):n)}return i}function p(t,n){return t.minX=Math.min(t.minX,n.minX),t.minY=Math.min(t.minY,n.minY),t.maxX=Math.max(t.maxX,n.maxX),t.maxY=Math.max(t.maxY,n.maxY),t}function x(t,n){return t.minX-n.minX}function v(t,n){return t.minY-n.minY}function A(t){return(t.maxX-t.minX)*(t.maxY-t.minY)}function y(t){return t.maxX-t.minX+(t.maxY-t.minY)}function M(t,n){return(Math.max(n.maxX,t.maxX)-Math.min(n.minX,t.minX))*(Math.max(n.maxY,t.maxY)-Math.min(n.minY,t.minY))}function E(t,n){const e=Math.max(t.minX,n.minX),r=Math.max(t.minY,n.minY),i=Math.min(t.maxX,n.maxX),o=Math.min(t.maxY,n.maxY);return Math.max(0,i-e)*Math.max(0,o-r)}function X(t,n){return t.minX<=n.minX&&t.minY<=n.minY&&n.maxX<=t.maxX&&n.maxY<=t.maxY}function Y(t,n){return n.minX<=t.maxX&&n.minY<=t.maxY&&n.maxX>=t.minX&&n.maxY>=t.minY}function w(t){return{children:t,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function B(t,n,e,r,i){const o=[n,e];for(;o.length;){if((e=o.pop())-(n=o.pop())<=r)continue;const a=n+Math.ceil((e-n)/r/2)*r;h(t,a,n,e,i),o.push(n,a,a,e)}}function _(n){return t(n,(t,n)=>t+function(t){let n,e=0;switch(t.type){case"Polygon":return b(t.coordinates);case"MultiPolygon":for(n=0;n<t.coordinates.length;n++)e+=b(t.coordinates[n]);return e;case"Point":case"MultiPoint":case"LineString":case"MultiLineString":return 0}return 0}(n),0)}function b(t){let n=0;if(t&&t.length>0){n+=Math.abs(P(t[0]));for(let e=1;e<t.length;e++)n-=Math.abs(P(t[e]))}return n}var I=r*r/2,R=Math.PI/180;function P(t){const n=t.length-1;if(n<=2)return 0;let e=0,r=0;for(;r<n;){const i=t[r],o=t[r+1===n?0:r+1],a=t[r+2>=n?(r+2)%n:r+2],s=i[0]*R,h=o[1]*R;e+=(a[0]*R-s)*Math.sin(h),r++}return e*I}const j=11102230246251565e-32,k=134217729,S=(3+8*j)*j;function W(t,n,e,r,i){let o,a,s,h,l=n[0],c=r[0],f=0,g=0;c>l==c>-l?(o=l,l=n[++f]):(o=c,c=r[++g]);let u=0;if(f<t&&g<e)for(c>l==c>-l?(a=l+o,s=o-(a-l),l=n[++f]):(a=c+o,s=o-(a-c),c=r[++g]),o=a,0!==s&&(i[u++]=s);f<t&&g<e;)c>l==c>-l?(a=o+l,h=a-o,s=o-(a-h)+(l-h),l=n[++f]):(a=o+c,h=a-o,s=o-(a-h)+(c-h),c=r[++g]),o=a,0!==s&&(i[u++]=s);for(;f<t;)a=o+l,h=a-o,s=o-(a-h)+(l-h),l=n[++f],o=a,0!==s&&(i[u++]=s);for(;g<e;)a=o+c,h=a-o,s=o-(a-h)+(c-h),c=r[++g],o=a,0!==s&&(i[u++]=s);return 0===o&&0!==u||(i[u++]=o),u}function O(t){return new Float64Array(t)}const T=O(4),q=O(8),F=O(12),D=O(16),J=O(4);function L(t,n,e,r,i,o){const a=(n-o)*(e-i),s=(t-i)*(r-o),h=a-s,l=Math.abs(a+s);return Math.abs(h)>=33306690738754716e-32*l?h:-function(t,n,e,r,i,o,a){let s,h,l,c,f,g,u,d,m,p,x,v,A,y,M,E,X,Y;const w=t-i,B=e-i,_=n-o,b=r-o;y=w*b,g=k*w,u=g-(g-w),d=w-u,g=k*b,m=g-(g-b),p=b-m,M=d*p-(y-u*m-d*m-u*p),E=_*B,g=k*_,u=g-(g-_),d=_-u,g=k*B,m=g-(g-B),p=B-m,X=d*p-(E-u*m-d*m-u*p),x=M-X,f=M-x,T[0]=M-(x+f)+(f-X),v=y+x,f=v-y,A=y-(v-f)+(x-f),x=A-E,f=A-x,T[1]=A-(x+f)+(f-E),Y=v+x,f=Y-v,T[2]=v-(Y-f)+(x-f),T[3]=Y;let I=function(t,n){let e=n[0];for(let r=1;r<4;r++)e+=n[r];return e}(0,T),R=22204460492503146e-32*a;if(I>=R||-I>=R)return I;if(f=t-w,s=t-(w+f)+(f-i),f=e-B,l=e-(B+f)+(f-i),f=n-_,h=n-(_+f)+(f-o),f=r-b,c=r-(b+f)+(f-o),0===s&&0===h&&0===l&&0===c)return I;if(R=11093356479670487e-47*a+S*Math.abs(I),I+=w*c+b*s-(_*l+B*h),I>=R||-I>=R)return I;y=s*b,g=k*s,u=g-(g-s),d=s-u,g=k*b,m=g-(g-b),p=b-m,M=d*p-(y-u*m-d*m-u*p),E=h*B,g=k*h,u=g-(g-h),d=h-u,g=k*B,m=g-(g-B),p=B-m,X=d*p-(E-u*m-d*m-u*p),x=M-X,f=M-x,J[0]=M-(x+f)+(f-X),v=y+x,f=v-y,A=y-(v-f)+(x-f),x=A-E,f=A-x,J[1]=A-(x+f)+(f-E),Y=v+x,f=Y-v,J[2]=v-(Y-f)+(x-f),J[3]=Y;const P=W(4,T,4,J,q);y=w*c,g=k*w,u=g-(g-w),d=w-u,g=k*c,m=g-(g-c),p=c-m,M=d*p-(y-u*m-d*m-u*p),E=_*l,g=k*_,u=g-(g-_),d=_-u,g=k*l,m=g-(g-l),p=l-m,X=d*p-(E-u*m-d*m-u*p),x=M-X,f=M-x,J[0]=M-(x+f)+(f-X),v=y+x,f=v-y,A=y-(v-f)+(x-f),x=A-E,f=A-x,J[1]=A-(x+f)+(f-E),Y=v+x,f=Y-v,J[2]=v-(Y-f)+(x-f),J[3]=Y;const j=W(P,q,4,J,F);y=s*c,g=k*s,u=g-(g-s),d=s-u,g=k*c,m=g-(g-c),p=c-m,M=d*p-(y-u*m-d*m-u*p),E=h*l,g=k*h,u=g-(g-h),d=h-u,g=k*l,m=g-(g-l),p=l-m,X=d*p-(E-u*m-d*m-u*p),x=M-X,f=M-x,J[0]=M-(x+f)+(f-X),v=y+x,f=v-y,A=y-(v-f)+(x-f),x=A-E,f=A-x,J[1]=A-(x+f)+(f-E),Y=v+x,f=Y-v,J[2]=v-(Y-f)+(x-f),J[3]=Y;const O=W(j,F,4,J,D);return D[O-1]}(t,n,e,r,i,o,l)}function N(t,n){var e,r,i,o,a,s,h,l,c,f=0,g=t[0],u=t[1],d=n.length;for(e=0;e<d;e++){r=0;var m=n[e],p=m.length-1;if((l=m[0])[0]!==m[p][0]&&l[1]!==m[p][1])throw new Error("First and last coordinates in a ring must be the same");for(o=l[0]-g,a=l[1]-u;r<p;r++){if(s=(c=m[r+1])[0]-g,h=c[1]-u,0===a&&0===h){if(s<=0&&o>=0||o<=0&&s>=0)return 0}else if(h>=0&&a<=0||h<=0&&a>=0){if(0===(i=L(o,s,a,h,0,0)))return 0;(i>0&&h>0&&a<=0||i<0&&h<=0&&a>0)&&f++}l=c,a=h,o=s}}return f%2!=0}function z(t,n,e={}){if(!t)throw new Error("point is required");if(!n)throw new Error("polygon is required");const r=a(t),i=s(n),o=i.type,h=n.bbox;let l=i.coordinates;if(h&&!1===function(t,n){return n[0]<=t[0]&&n[1]<=t[1]&&n[2]>=t[0]&&n[3]>=t[1]}(r,h))return!1;"Polygon"===o&&(l=[l]);let c=!1;for(var f=0;f<l.length;++f){const t=N(r,l[f]);if(0===t)return!e.ignoreBoundary;t&&(c=!0)}return c}function C(t,n){if(!t||!n)return!1;if(t.length!==n.length)return!1;for(var e=0,r=t.length;e<r;e++)if(t[e]instanceof Array&&n[e]instanceof Array){if(!C(t[e],n[e]))return!1}else if(t[e]!==n[e])return!1;return!0}function G(t){if("Feature"!=t.type)throw new Error("The input must a geojson object of type Feature");if(void 0===t.geometry||null==t.geometry)throw new Error("The input must a geojson object with a non-empty geometry");if("Polygon"!=t.geometry.type)throw new Error("The input must be a geojson Polygon");for(var n=t.geometry.coordinates.length,e=[],r=0;r<n;r++){var a=t.geometry.coordinates[r];V(a[0],a[a.length-1])||a.push(a[0]);for(var s=0;s<a.length-1;s++)e.push(a[s])}if(!function(t){for(var n={},e=1,r=0,i=t.length;r<i;++r){if(Object.prototype.hasOwnProperty.call(n,t[r])){e=0;break}n[t[r]]=1}return e}(e))throw new Error("The input polygon may not have duplicate vertices (except for the first and last vertex of each ring)");var h=e.length,l=function(t,n,e){if("Polygon"!==t.geometry.type)throw new Error("The input feature must be a Polygon");void 0===e&&(e=1);var r=t.geometry.coordinates,i=[],o={};if(e){for(var a=[],s=0;s<r.length;s++)for(var h=0;h<r[s].length-1;h++)a.push(p(s,h));var l=new g;l.load(a)}for(var c=0;c<r.length;c++)for(var f=0;f<r[c].length-1;f++)if(e)l.search(p(c,f)).forEach(function(t){var n=t.ring,e=t.edge;m(c,f,n,e)});else for(var u=0;u<r.length;u++)for(var d=0;d<r[u].length-1;d++)m(c,f,u,d);return n||(i={type:"Feature",geometry:{type:"MultiPoint",coordinates:i}}),i;function m(t,e,a,s){var h,l,c=r[t][e],f=r[t][e+1],g=r[a][s],u=r[a][s+1],d=function(t,n,e,r){if(C(t,e)||C(t,r)||C(n,e)||C(r,e))return null;var i=t[0],o=t[1],a=n[0],s=n[1],h=e[0],l=e[1],c=r[0],f=r[1],g=(i-a)*(l-f)-(o-s)*(h-c);return 0===g?null:[((i*s-o*a)*(h-c)-(i-a)*(h*f-l*c))/g,((i*s-o*a)*(l-f)-(o-s)*(h*f-l*c))/g]}(c,f,g,u);if(null!==d&&(h=f[0]!==c[0]?(d[0]-c[0])/(f[0]-c[0]):(d[1]-c[1])/(f[1]-c[1]),l=u[0]!==g[0]?(d[0]-g[0])/(u[0]-g[0]):(d[1]-g[1])/(u[1]-g[1]),!(h>=1||h<=0||l>=1||l<=0))){var m=d,p=!o[m];p&&(o[m]=!0),n?i.push(n(d,t,e,c,f,h,a,s,g,u,l,p)):i.push(d)}}function p(t,n){var e,i,o,a,s=r[t][n],h=r[t][n+1];return s[0]<h[0]?(e=s[0],i=h[0]):(e=h[0],i=s[0]),s[1]<h[1]?(o=s[1],a=h[1]):(o=h[1],a=s[1]),{minX:e,minY:o,maxX:i,maxY:a,ring:t,edge:n}}}(t,function(t,n,e,r,i,o,a,s,h,l,c,f){return[t,n,e,r,i,o,a,s,h,l,c,f]}),c=l.length;if(0==c){var f=[];for(r=0;r<n;r++)f.push(o([t.geometry.coordinates[r]],{parent:-1,winding:U(t.geometry.coordinates[r])}));var u=i(f);return D(),J(),u}var d=[],m=[];for(r=0;r<n;r++)for(d.push([]),s=0;s<t.geometry.coordinates[r].length-1;s++)d[r].push([new H(t.geometry.coordinates[r][Z(s+1,t.geometry.coordinates[r].length-1)],1,[r,s],[r,Z(s+1,t.geometry.coordinates[r].length-1)],void 0)]),m.push(new K(t.geometry.coordinates[r][s],[r,Z(s-1,t.geometry.coordinates[r].length-1)],[r,s],void 0,void 0,!1,!0));for(r=0;r<c;r++)d[l[r][1]][l[r][2]].push(new H(l[r][0],l[r][5],[l[r][1],l[r][2]],[l[r][6],l[r][7]],void 0)),l[r][11]&&m.push(new K(l[r][0],[l[r][1],l[r][2]],[l[r][6],l[r][7]],void 0,void 0,!0,!0));var p=m.length;for(r=0;r<d.length;r++)for(s=0;s<d[r].length;s++)d[r][s].sort(function(t,n){return t.param<n.param?-1:1});var x=[];for(r=0;r<p;r++)x.push({minX:m[r].coord[0],minY:m[r].coord[1],maxX:m[r].coord[0],maxY:m[r].coord[1],index:r});var v=new g;for(v.load(x),r=0;r<d.length;r++)for(s=0;s<d[r].length;s++)for(var A=0;A<d[r][s].length;A++){M=A==d[r][s].length-1?d[r][Z(s+1,t.geometry.coordinates[r].length-1)][0].coord:d[r][s][A+1].coord;var y=v.search({minX:M[0],minY:M[1],maxX:M[0],maxY:M[1]})[0];d[r][s][A].nxtIsectAlongEdgeIn=y.index}for(r=0;r<d.length;r++)for(s=0;s<d[r].length;s++)for(A=0;A<d[r][s].length;A++){var M=d[r][s][A].coord,E=(y=v.search({minX:M[0],minY:M[1],maxX:M[0],maxY:M[1]})[0]).index;E<h?m[E].nxtIsectAlongRingAndEdge2=d[r][s][A].nxtIsectAlongEdgeIn:V(m[E].ringAndEdge1,d[r][s][A].ringAndEdgeIn)?m[E].nxtIsectAlongRingAndEdge1=d[r][s][A].nxtIsectAlongEdgeIn:m[E].nxtIsectAlongRingAndEdge2=d[r][s][A].nxtIsectAlongEdgeIn}var X=[];for(r=0,s=0;s<n;s++){var Y=r;for(A=0;A<t.geometry.coordinates[s].length-1;A++)m[r].coord[0]<m[Y].coord[0]&&(Y=r),r++;var w=m[Y].nxtIsectAlongRingAndEdge2;for(A=0;A<m.length;A++)if(m[A].nxtIsectAlongRingAndEdge1==Y||m[A].nxtIsectAlongRingAndEdge2==Y){var B=A;break}var b=Q([m[B].coord,m[Y].coord,m[w].coord],!0)?1:-1;X.push({isect:Y,parent:-1,winding:b})}for(X.sort(function(t,n){return m[t.isect].coord>m[n.isect].coord?-1:1}),f=[];X.length>0;){var I=X.pop(),R=I.isect,P=I.parent,j=I.winding,k=f.length,S=[m[R].coord],W=R;if(m[R].ringAndEdge1Walkable)var O=m[R].ringAndEdge1,T=m[R].nxtIsectAlongRingAndEdge1;else O=m[R].ringAndEdge2,T=m[R].nxtIsectAlongRingAndEdge2;for(;!V(m[R].coord,m[T].coord);){S.push(m[T].coord);var q=void 0;for(r=0;r<X.length;r++)if(X[r].isect==T){q=r;break}if(null!=q&&X.splice(q,1),V(O,m[T].ringAndEdge1)){if(O=m[T].ringAndEdge2,m[T].ringAndEdge2Walkable=!1,m[T].ringAndEdge1Walkable){var F={isect:T};Q([m[W].coord,m[T].coord,m[m[T].nxtIsectAlongRingAndEdge2].coord],1==j)?(F.parent=P,F.winding=-j):(F.parent=k,F.winding=j),X.push(F)}W=T,T=m[T].nxtIsectAlongRingAndEdge2}else O=m[T].ringAndEdge1,m[T].ringAndEdge1Walkable=!1,m[T].ringAndEdge2Walkable&&(F={isect:T},Q([m[W].coord,m[T].coord,m[m[T].nxtIsectAlongRingAndEdge1].coord],1==j)?(F.parent=P,F.winding=-j):(F.parent=k,F.winding=j),X.push(F)),W=T,T=m[T].nxtIsectAlongRingAndEdge1}S.push(m[T].coord),f.push(o([S],{index:k,parent:P,winding:j,netWinding:void 0}))}function D(){for(var t=[],n=0;n<u.features.length;n++)-1==u.features[n].properties.parent&&t.push(n);if(t.length>1)for(n=0;n<t.length;n++){for(var e=-1,r=1/0,i=0;i<u.features.length;i++)t[n]!=i&&z(u.features[t[n]].geometry.coordinates[0][0],u.features[i],{ignoreBoundary:!0})&&_(u.features[i])<r&&(e=i);u.features[t[n]].properties.parent=e}}function J(){for(var t=0;t<u.features.length;t++)if(-1==u.features[t].properties.parent){var n=u.features[t].properties.winding;u.features[t].properties.netWinding=n,L(t,n)}}function L(t,n){for(var e=0;e<u.features.length;e++)if(u.features[e].properties.parent==t){var r=n+u.features[e].properties.winding;u.features[e].properties.netWinding=r,L(e,r)}}return u=i(f),D(),J(),u}var H=function(t,n,e,r,i){this.coord=t,this.param=n,this.ringAndEdgeIn=e,this.ringAndEdgeOut=r,this.nxtIsectAlongEdgeIn=i},K=function(t,n,e,r,i,o,a){this.coord=t,this.ringAndEdge1=n,this.ringAndEdge2=e,this.nxtIsectAlongRingAndEdge1=r,this.nxtIsectAlongRingAndEdge2=i,this.ringAndEdge1Walkable=o,this.ringAndEdge2Walkable=a};function Q(t,n){if(void 0===n&&(n=!0),3!=t.length)throw new Error("This function requires an array of three points [x,y]");return(t[1][0]-t[0][0])*(t[2][1]-t[0][1])-(t[1][1]-t[0][1])*(t[2][0]-t[0][0])>=0==n}function U(t){for(var n=0,e=0;e<t.length-1;e++)t[e][0]<t[n][0]&&(n=e);if(Q([t[Z(n-1,t.length-1)],t[n],t[Z(n+1,t.length-1)]],!0))var r=1;else r=-1;return r}function V(t,n){if(!t||!n)return!1;if(t.length!=n.length)return!1;for(var e=0,r=t.length;e<r;e++)if(t[e]instanceof Array&&n[e]instanceof Array){if(!V(t[e],n[e]))return!1}else if(t[e]!=n[e])return!1;return!0}function Z(t,n){return(t%n+n)%n}function $(t){var r=[];return n(t,function(t){"Polygon"===t.geometry.type&&e(G(t),function(n){r.push(o(n.geometry.coordinates,t.properties))})}),i(r)}var tt=$;export{tt as default,$ as unkinkPolygon};
