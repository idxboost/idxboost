import{r as o,A as x,y as e}from"./vendor-BZh8_evt.js";import{u as M}from"./state-in3dRHj9.js";import{s as h,t as E,v as g}from"./index-BZEBM8oo.js";import"./i18n-Dka-7LUO.js";const D=()=>{const m=M(),s=o.useRef(null),[d,u]=o.useState(""),[l,f]=o.useState(!1),w=t=>{const i=/(?:youtube\.com\/(?:watch\?v=|embed\/|shorts\/)|youtu\.be\/)([\w-]{11})/,r=/vimeo\.com\/(\d+)/,c=t.match(i);if(c)return`https://www.youtube.com/embed/${c[1]}?autoplay=1&loop=0&rel=0&showinfo=0`;const a=t.match(r);return a?`https://player.vimeo.com/video/${a[1]}?autoplay=1&loop=0`:t};o.useEffect(()=>{const t=r=>{const a=r.detail;a&&(u(w(a.video_url)),f(!0))},i=()=>{f(!1),u("")};return window.addEventListener(h,t),window.addEventListener(E,i),()=>{window.removeEventListener(h,t),window.removeEventListener(E,i)}},[m]);const y=document.getElementById("wpadminbar")?.offsetHeight,[v,p]=o.useState(!1),b=o.useCallback(()=>{s.current&&(s.current.pause(),s.current.src="",s.current.load()),p(!1),setTimeout(()=>{g()},300)},[m]);if(o.useEffect(()=>{l&&setTimeout(()=>p(!0),100)},[l]),!l)return null;const n=document.getElementById("video-modal")||document.createElement("div");return n.id||(n.id="video-modal",document.body.appendChild(n)),x.createPortal(e.jsx("div",{className:`ms-sf-modal active ${v?"in":""}`,tabIndex:-1,role:"dialog",id:"videoModal",children:e.jsx("div",{className:"ms-sf-modal-dialog",role:"document",children:e.jsxs("div",{className:`ms-sf-modal-content ${v?"active":""}`,style:{top:y},children:[e.jsx("div",{className:"ms-sf-modal-body wrapperVideoModal",children:d.includes("youtube")||d.includes("vimeo")?e.jsx("iframe",{id:"video-iframe",height:"360",width:"643",allow:"autoplay; encrypted-media",allowFullScreen:!0,style:{border:0},src:d}):e.jsx("video",{id:"video-iframe",ref:s,src:d,controls:!0,autoPlay:!0,playsInline:!0,controlsList:"nodownload nofullscreen noremoteplayback"})}),e.jsx("button",{className:"ms-sf-btn -close-modal -circle -standard -sm js-close-st-modal","data-id":"#videoModal",onClick:b,children:e.jsx("i",{className:"sf-icon-close"})})]})})}),n)};export{D as default};
