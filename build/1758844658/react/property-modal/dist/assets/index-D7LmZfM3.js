import{y as e,r as s,A as S}from"./vendor-BZh8_evt.js";import{u as L}from"./state-in3dRHj9.js";import{h as _,u as I,i as h,j as k,k as b,l as y,m as A,I as O,M as G,P,o as T,p as D,q as $,r as F}from"./index-BZEBM8oo.js";import{u as B}from"./i18n-Dka-7LUO.js";const H=({typeView:o,onChangeTypeView:r,onlyVisualizer:t=!1,property:i,handleFavorite:n,handleOpenContact:d,handleOpenShare:a,handleCloseModal:c})=>{const{isFavorite:u}=_(),{favoriteIcon:m}=I();return e.jsx("div",{className:"ms-sf-modal-header",children:e.jsxs("div",{className:"ms-sf-flex",children:[e.jsx("h3",{className:"ms-sf-title ms-sf-ellipsis",children:!t&&i&&e.jsxs(e.Fragment,{children:[i.address_short,e.jsx("span",{children:i.address_large})]})}),e.jsxs("div",{className:"ms-sf-action-buttons",children:[!h&&!t&&e.jsx("div",{className:"ms-sf-item",children:e.jsx("button",{className:`ms-sf-btn -favorite ${u?"active":""}`,"aria-label":"Favorite",type:"button","data-tool":"tooltip","data-tool-detail":"Save","data-tool-position":"bottom",onClick:p=>{p.stopPropagation(),n?.()},children:e.jsx("i",{className:`sf-icon-${m}`})})}),!t&&e.jsx("div",{className:"ms-sf-item",children:e.jsx("button",{className:`ms-sf-btn -circle -standard ${o==="view-slider"?"active":""}`,"aria-label":"Photos","data-tool":"tooltip","data-tool-detail":"Photos","data-tool-position":"bottom","data-view":"view-slider","data-parent":"#fullScreenMediaContent",onClick:()=>r("view-slider"),children:e.jsx("i",{className:"sf-icon-camera"})})}),!t&&e.jsx("div",{className:"ms-sf-item",children:e.jsx("button",{className:`ms-sf-btn -circle -standard ${o==="view-map"?"active":""}`,"aria-label":"Map","data-tool":"tooltip","data-tool-detail":"Map","data-tool-position":"bottom","data-view":"view-map","data-parent":"#fullScreenMediaContent",onClick:()=>r("view-map"),children:e.jsx("i",{className:"sf-icon-map"})})}),!h&&!t&&e.jsx("div",{className:"ms-sf-item",children:e.jsx("button",{className:"ms-sf-btn -circle -standard","aria-label":"Contact Agent","data-id":"#contactModal","data-tool":"tooltip","data-tool-detail":"Contact Agent","data-tool-position":"bottom",onClick:d,children:e.jsx("i",{className:"sf-icon-envelope-active"})})}),!h&&!t&&e.jsx("div",{className:"ms-sf-item",children:e.jsx("button",{className:"ms-sf-btn -circle -standard","data-id":"#shareModal","aria-label":"Share","data-tool":"tooltip","data-tool-detail":"Share","data-tool-position":"bottom",onClick:a,children:e.jsx("i",{className:"sf-icon-shared"})})}),e.jsx("div",{className:"ms-sf-item",children:e.jsx("button",{className:"ms-sf-btn -circle -standard js-close-st-modal","data-id":"#galleryModal","aria-label":"Close Modal","data-tool":"tooltip","data-tool-detail":"Close","data-tool-position":"bottom",onClick:c,children:e.jsx("i",{className:"sf-icon-close"})})})]})]})})},J=()=>{const o=L(),{t:r}=B(),i=document.getElementById("wpadminbar")?.offsetHeight,[n,d]=s.useState(!1),[a,c]=s.useState(null),[u]=k(),[m,p]=s.useState(!1),[v,x]=s.useState("view-slider");s.useEffect(()=>{const l=C=>{const N=C.detail;N&&(c(N),d(!0))},j=()=>{d(!1),c(null)};return window.addEventListener(b,l),window.addEventListener(y,j),()=>{window.removeEventListener(b,l),window.removeEventListener(y,j)}},[o]);const w=s.useCallback(()=>{p(!1),x("view-slider"),setTimeout(()=>{A()},300)},[o]);function g(){a?.property&&F()&&u(a?.property.mls_num)}function M(){if(!a?.property)return;const l=T(a?.property,r);D(l)}function E(){o($(!0))}if(s.useEffect(()=>{n&&setTimeout(()=>p(!0),100)},[n]),!n||!a)return null;const f=document.getElementById("gallery-modal")||document.createElement("div");return f.id||(f.id="gallery-modal",document.body.appendChild(f)),S.createPortal(e.jsx("div",{className:`ms-sf-modal active ${m?"in":""}`,tabIndex:-1,role:"dialog",id:"galleryModal",children:e.jsx("div",{className:"ms-sf-modal-dialog",role:"document",children:e.jsxs("div",{className:`ms-sf-modal-content ${m?"active":""}`,style:{top:i},children:[e.jsx(H,{typeView:v,onChangeTypeView:l=>x(l),onlyVisualizer:a.onlyVisualizer,property:a.property,handleFavorite:g,handleOpenContact:E,handleOpenShare:M,handleCloseModal:w}),e.jsx("div",{className:"ms-sf-modal-body",children:e.jsxs("div",{className:`ms-sf-media ${v}`,id:"fullScreenMediaContent",children:[e.jsx("div",{className:"ms-sf-wrapper-slider",children:a.image_urls&&e.jsx(O,{thumbnail:a.image_urls[0],images:a.image_urls,showControls:!0,selectedItem:a.selected_image_pos,infiniteLoop:!0})}),!a.onlyVisualizer&&e.jsx("div",{className:"ms-sf-wrapper-map",children:e.jsx(s.Suspense,{fallback:null,children:e.jsx(G,{strategy:"onInteraction",enabled:!0,children:e.jsx(P,{lat:Number(a.property?.lat),lng:Number(a.property?.lng),address:a.property?.address_large||"",id:"propertyViewerMapGallery"})})})}),e.jsx("div",{className:"ms-sf-wrapper-video",children:"video"})]})})]})})}),f)};export{J as default};
