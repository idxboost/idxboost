var xDown=null,yDown=null;!function(i){function t(){var a,t=i(".property-information").outerHeight()+i(".panel-options").outerHeight()-1,e=i("#property-description");e.length?a=e.outerHeight():(a=0,i(".temporal-content").css({"border-bottom":"0"})),i(".temporal-content").height(a).css({top:t+"px"}).animate({opacity:"1"})}function e(){var a,t=i(".ms-wrap-property-description");t.css({display:"block"}),t.length&&(a=t.outerHeight(),console.log(a),200<a&&(t.hasClass("ms-rd")||t.addClass("ms-rd")))}i(function(){i("body").on("touchstart","#full-slider",function(a){a.stopPropagation(),xDown=a.originalEvent.touches[0].clientX,yDown=a.originalEvent.touches[0].clientY}),i("body").on("touchstart","#modal_img_propertie .wrapper-img",function(a){a.stopPropagation(),xDown=a.originalEvent.touches[0].clientX,yDown=a.originalEvent.touches[0].clientY}),i("body").on("touchmove","#full-slider",function(a){var t,e;xDown&&yDown&&(t=a.originalEvent.touches[0].clientX,e=a.originalEvent.touches[0].clientY,t=xDown-t,e=yDown-e,Math.abs(t)>Math.abs(e)&&(a.preventDefault(),(0<t?i(this).find(".next"):i(this).find(".prev")).click()),yDown=xDown=null)}),i("body").on("touchmove","#modal_img_propertie .wrapper-img",function(a){var t,e;xDown&&yDown&&(t=a.originalEvent.touches[0].clientX,e=a.originalEvent.touches[0].clientY,t=xDown-t,e=yDown-e,Math.abs(t)>Math.abs(e)&&(a.preventDefault(),(0<t?i(this).find(".next"):i(this).find(".prev")).click()),yDown=xDown=null)})}),i(document).ready(function(){Cookies.set("reference_force_registration","no")}),i(window).on("load",function(){var a=i(".content-avatar-image .lazy-img").attr("data-src"),a=(void 0!==a&&i(".content-avatar-image .lazy-img").attr("src",a).removeAttr("data-src").addClass("active"),i("#min-map").attr("data-map-img"));void 0!==a&&i("#min-map").css("background-image","url('"+a+"')").removeAttr("data-map-img"),i(window).scroll(function(){window_y=i(window).scrollTop();var a=i("#content-map #map").attr("data-lat"),t=i("#content-map #map").attr("data-lng");300<=window_y&&(i(".similar-properties .lazy-img").each(function(){var a=i(this).attr("data-src");void 0!==a&&i(this).attr("src",a).removeAttr("data-src").addClass("active")}),void 0!==a&&void 0!==t&&(a=i("#map"),a={lat:parseFloat(a.data("lat")),lng:parseFloat(a.data("lng"))},t=new google.maps.Map(document.getElementById("map"),{zoom:16,center:a}),new google.maps.Marker({position:a,map:t}),i("#map").removeAttr("data-lat"),i("#map").removeAttr("data-lng")))}),t(),e()}),i(window).resize(function(){t(),e()}),jQuery(document).on("click","#ms-read",function(){i(this).hasClass("show")?(i(this).removeClass("show"),i(this).text(i(this).attr("data-before")),i(".ms-wrap-property-description").removeClass("active")):(i(this).addClass("show"),i(this).text(i(this).attr("data-after")),i(".ms-wrap-property-description").addClass("active"))});var a=i(window),o=a.width();function n(a,t){var e;void 0!==t&&t.length&&(e=t.length,a.css("width",e/d*100+"%"),t.css("width",100/e+"%"))}function r(){switch(!0){case o<768:d=1;break;case 768<=o&&o<1024:d=2;break;case 1024<=o:d=3}}a.on("resize",function(){o=a.width(),setTimeout(function(){r(),n(s,l)},100)});var s,l,d=0,c=(r(),i("#full-main"),i("#full-slider .wrap-slider"));c.length&&(s=c.find("ul"),1<(l=s.find("li")).length?(n(s,l),s.data("frame","1")):(c.find(".next, .prev").css("display","none"),console.log("no hay frames para crear el slider"))),i(function(){i(".chk_save_property").click(function(a){a.stopPropagation(),a.preventDefault();var t,e,o,n=i(this);if(i(".chk_save").hasClass("working"))return!1;"yes"==__flex_g_settings.anonymous?(i("#modal_login").addClass("active_modal").find("[data-tab]").removeClass("active"),i("#modal_login").addClass("active_modal").find("[data-tab]:eq(1)").addClass("active"),i("#modal_login").find(".item_tab").removeClass("active"),i("#tabRegister").addClass("active"),i("button.close-modal").addClass("ib-close-mproperty"),i(".overlay_modal").css("background-color","rgba(0,0,0,0.8);"),i("#modal_login h2").html(i("#modal_login").find("[data-tab]:eq(1)").data("text-force")),a=i(".header-tab a[data-tab='tabRegister']").attr("data-text"),i("#modal_login .modal_cm .content_md .heder_md .ms-title-modal").html(a)):(a=n.data("class-id"),t=n.data("mls"),e=n.attr("data-alert-token"),o=n.attr("data-address"),i(".chk_save").addClass("working"),i(this).find("span").hasClass("active")?i.ajax({url:flex_idx_property_params.ajaxUrl,method:"POST",data:{action:"flex_favorite",class_id:a,mls_num:t,type_action:"remove",token_alert:e,registration_key:"undefined"!=typeof IB_AGENT_REGISTRATION_KEY?IB_AGENT_REGISTRATION_KEY:null},dataType:"json",success:function(a){var t=n.attr("data-save");""!==t&&void 0!==t||(t="Save"),i(".chk_save").removeClass("working"),i(".chk_save").removeAttr("data-alert-token").find("span").removeClass("active").text(t)}}):i.ajax({url:flex_idx_property_params.ajaxUrl,method:"POST",data:{action:"flex_favorite",class_id:a,mls_num:t,subject:o,type_action:"add",registration_key:"undefined"!=typeof IB_AGENT_REGISTRATION_KEY?IB_AGENT_REGISTRATION_KEY:null},dataType:"json",success:function(a){var t=n.attr("data-remove");""!==t&&void 0!==t||(t="Remove"),i(".chk_save").removeClass("working"),i(".chk_save").attr("data-alert-token",a.token_alert).find("span").addClass("active").text(t)}}))})})}(jQuery);