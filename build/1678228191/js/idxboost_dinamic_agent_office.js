var ajax_request_filter,myLazyLoad,baths_slider,beds_slider,sqft_slider,lotsize_slider,price_sale_slider,price_rent_slider,year_built_slider,flex_filter_sort,flex_pagination,flex_search_rental_switch,flex_waterfront_switch,flex_parking_switch,flex_autocomplete,flex_autocomplete_inner,map,infoWindow,mapButtonsWrapper,mapZoomInButton,mapZoomOutButton,mapDrawButton,geocode,poly,move,IB_COMMERCIAL=$("#ib-template-property-sale-rent-sold"),$viewFilter=$(".filter-views"),$wrapResult=$(".wrap-result"),IB_PAGINATION=$("#ib-template-display-pagination"),flex_ui_loaded=!1,$cuerpo=jQuery("body"),$ventana=jQuery(window),arraytest_pryueba="",currentfiltemid="",xDown=null,yDown=null,markers=[],userIsDrawing=!1,userHasMapFigure=!1,renderedMarkers=!1,mapIsVisible=!1,polyStrokeColor="#015288",polyFillColor="#0099FF",hashed_properties=[],filtered_properties=[],unique_properties=[],infobox_content=[],properties=[];function initialize(){console.log("map init");var e=[];null!=style_map_idxboost&&""!=style_map_idxboost&&(e=JSON.parse(style_map_idxboost)),myLazyLoad=new LazyLoad({elements_selector:".flex-lazy-image",callback_load:function(){},callback_error:function(e){$(e).attr("src","https://idxboost.com/i/default_thumbnail.jpg").removeClass("error").addClass("loaded"),$(e).attr("data-origin","https://idxboost.com/i/default_thumbnail.jpg")}}),map=new google.maps.Map(document.getElementById("code-map"),{center:new google.maps.LatLng(25.76168,-80.19179),mapTypeId:google.maps.MapTypeId.ROADMAP,zoom:18,disableDoubleClickZoom:!0,scrollwheel:!1,panControl:!1,zoomControl:!1,disableDefaultUI:!0,clickableIcons:!1,styles:e,gestureHandling:"1"==__flex_g_settings.is_mobile?"greedy":"cooperative",streetViewControl:!0}),google.maps.event.addListenerOnce(map,"tilesloaded",setupMapControls)}function handleZoomInButton(e){e.stopPropagation(),e.preventDefault(),map.setZoom(map.getZoom()+1)}function handleZoomOutButton(e){e.stopPropagation(),e.preventDefault(),map.setZoom(map.getZoom()-1)}function handleDrawButton(e){e.stopPropagation(),e.preventDefault(),this.classList.contains("flex-map-is-drawing")?(google.maps.event.clearListeners(map.getDiv(),"mousedown"),google.maps.event.removeListener(move),stopDrawingMap()):(startDrawingMap(),google.maps.event.addDomListener(map.getDiv(),"mousedown",handleMouseDown))}function stopDrawingMap(){map.setOptions({draggable:!0,zoomControl:!0}),mapDrawButton.classList.remove("flex-map-is-drawing"),userIsDrawing=!1}function startDrawingMap(){infoWindow.isOpen()&&infoWindow.close(),map.setOptions({draggable:!1,zoomControl:!1}),!0===userHasMapFigure&&poly.setMap(null),mapDrawButton.classList.add("flex-map-is-drawing"),userIsDrawing=!0}function handleMapDrawing(){!1!==userIsDrawing&&(poly=new google.maps.Polyline({map:map,clickable:!1,strokeColor:polyStrokeColor,strokeOpacity:1,strokeWeight:1}),move=google.maps.event.addListener(map,"mousemove",handleMouseMove),google.maps.event.addListener(map,"mouseup",handleMouseUp))}function handleMouseMove(e){poly.getPath().push(e.latLng)}function handleMouseUp(e){if(google.maps.event.removeListener(move),!1!==userIsDrawing){poly.setMap(null);for(var t=poly.getPath(),a=t.getArray(),s=[],o={map:map,fillColor:polyFillColor,fillOpacity:.25,strokeColor:polyStrokeColor,strokeWeight:1,clickable:!1,zIndex:1,path:a,editable:!1},l=0,i=a.length;l<i;l++)s.push(a[l].lat()+" "+a[l].lng());t.getArray().length&&s.push(t.getAt(0).lat()+" "+t.getAt(0).lng()),(poly=new google.maps.Polygon(o)).setMap(map),google.maps.event.clearListeners(map.getDiv(),"mousedown"),userHasMapFigure=!!s.length&&(s.join(","),!0),stopDrawingMap()}}function handleMouseDown(e){e.stopPropagation(),e.preventDefault(),handleMapDrawing()}function handleSatelliteButton(e){e.stopPropagation(),e.preventDefault(),map.setMapTypeId(google.maps.MapTypeId.HYBRID),$(this).hasClass("is-active")?($(this).removeClass("is-active"),map.setMapTypeId(google.maps.MapTypeId.ROADMAP)):($(this).addClass("is-active"),map.setMapTypeId(google.maps.MapTypeId.HYBRID))}function handleZoomInButton(e){e.stopPropagation(),e.preventDefault(),map.setZoom(map.getZoom()+1)}function handleZoomOutButton(e){e.stopPropagation(),e.preventDefault(),map.setZoom(map.getZoom()-1)}function handlefullscreenButton(){var e=map.getDiv().firstChild;isFullscreen(e)?exitFullscreen():requestFullscreen(e),document.onwebkitfullscreenchange=document.onmsfullscreenchange=document.onmozfullscreenchange=document.onfullscreenchange=function(){isFullscreen(e)?fullscreenControl.classList.add("is-fullscreen"):fullscreenControl.classList.remove("is-fullscreen")}}function isFullscreen(e){return(document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement||document.msFullscreenElement)==e}function requestFullscreen(e){e.requestFullscreen?e.requestFullscreen():e.webkitRequestFullScreen?e.webkitRequestFullScreen():e.mozRequestFullScreen?e.mozRequestFullScreen():e.msRequestFullScreen&&e.msRequestFullScreen()}function exitFullscreen(){document.exitFullscreen?document.exitFullscreen():document.webkitExitFullscreen?document.webkitExitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.msExitFullscreen&&document.msExitFullscreen()}function removeMarkers(){if(hashed_properties.length&&(hashed_properties.length=0),filtered_properties.length&&(filtered_properties.length=0),unique_properties.length&&(unique_properties.length=0),markers.length){for(var e=0,t=markers.length;e<t;e++)markers[e].setMap(null);markers.length=0}}function setupMapControls(){(mapButtonsWrapper=document.createElement("div")).classList.add("flex-map-controls-ct"),(fullscreenControl=document.createElement("div")).classList.add("flex-map-fullscreen"),mapButtonsWrapper.appendChild(fullscreenControl),(mapZoomInButton=document.createElement("div")).classList.add("flex-map-zoomIn"),mapButtonsWrapper.appendChild(mapZoomInButton),(mapZoomOutButton=document.createElement("div")).classList.add("flex-map-zoomOut"),mapButtonsWrapper.appendChild(mapZoomOutButton),(satelliteMapButton=document.createElement("div")).classList.add("flex-satellite-button"),mapButtonsWrapper.appendChild(satelliteMapButton),google.maps.event.addDomListener(mapZoomInButton,"click",handleZoomInButton),google.maps.event.addDomListener(mapZoomOutButton,"click",handleZoomOutButton),google.maps.event.addDomListener(fullscreenControl,"click",handlefullscreenButton),google.maps.event.addDomListener(satelliteMapButton,"click",handleSatelliteButton),map.controls[google.maps.ControlPosition.TOP_RIGHT].push(mapButtonsWrapper)}var $wrapListResult=$("#wrap-list-result");function setupMarkers(e){arrayother=e;var t,a,s,o=new google.maps.LatLngBounds;if((infoWindow=new InfoBubble({map:map,disableAutoPan:!0,shadowStyle:0,padding:0,borderRadius:0,borderWidth:0,disableAnimation:!0,maxWidth:380})).addListener("domready",function(){$(".ib-load-property-iw").on("click",function(e){e.preventDefault(),e.stopPropagation();e=$(this).data("mls");loadPropertyInModal(e)})}),null!=e){for(var l=0,i=e.length;l<i;l++)s=e[l],geocode=s.lat+":"+s.lng,-1===_.indexOf(hashed_properties,geocode)&&(hashed_properties.push(geocode),filtered_properties.push(s));for(l=0,i=filtered_properties.length;l<i;l++){s=filtered_properties[l],geocode=[s.lat,s.lng];for(var n=[],r=0,d=e.length;r<d;r++)(inner=e[r]).lat==geocode[0]&&inner.lng==geocode[1]&&n.push(inner);unique_properties.push({item:s,group:n})}for(l=0;l<unique_properties.length;l++)a=unique_properties[l],(t=new RichMarker({position:new google.maps.LatLng(parseFloat(a.item.lat),parseFloat(a.item.lng)),map:map,flat:!0,draggable:!1,content:1<a.group.length?'<div class="dgt-richmarker-group"><strong>'+a.group.length+"</strong><span>Units</span></div>":'<div class="dgt-richmarker-single"><strong>$'+_.formatShortPrice(a.item.price)+"</strong></div>",anchor:RichMarkerPosition.TOP})).geocode=a.item.lat+":"+a.item.lng,o.extend(t.position),markers.push(t),google.maps.event.addListener(t,"click",handleMarkerClick(t,a,map)),google.maps.event.addListener(t,"mouseover",handleMarkerMouseOver(t)),google.maps.event.addListener(t,"mouseout",handleMarkerMouseOut(t))}void 0!==map&&map.fitBounds(o)}function handleMarkerMouseOver(e){return function(){e.setZIndex(google.maps.Marker.MAX_ZINDEX+1)}}function handleMarkerMouseOut(e){return function(){e.setZIndex(google.maps.Marker.MAX_ZINDEX-1)}}var $buttonsMap=$("#map-actions"),$openCloseMap=($buttonsMap.length&&$buttonsMap.on("click","button",function(){$wrapListResult.toggleClass("closed"),$(this).addClass("hide").siblings().removeClass("hide"),setTimeout(function(){google.maps.event.trigger(map,"resize"),setTimeout(function(){google.maps.event.trigger(map,"resize")},200)},100)}),$(".map-actions button"));function handleMarkerClick(n,r,d){return function(){if(1<r.group.length){infobox_content.push('<div class="mapview-container">'),infobox_content.push('<div class="mapviwe-header">'),infobox_content.push("<h2>"+r.item.heading+"</h2>"),infobox_content.push('<span class="build">'+r.group.length+"</span>"),infobox_content.push('<button class="closeInfo"><span>'+word_translate.close+"</span></button>"),infobox_content.push("</div>"),infobox_content.push('<div class="mapviwe-body">');for(var e=0,t=r.group.length;e<t;e++){var a=r.group[e],s=(infobox_content.push('<div class="mapviwe-item">'),infobox_content.push('<h2 title="'+a.address_short.replace(/# /,"#")+'"><span>'+a.address_short.replace(/# /,"#")+"</span></h2>"),infobox_content.push("<ul>"),infobox_content.push('<li class="address"><span>'+a.address_large.replace(/ , /,", ")+"</span></li>"),infobox_content.push('<li class="price">$'+_.formatPrice(a.price)+"</li>"),word_translate.beds),o=word_translate.baths,s=1<a.bed?word_translate.beds:word_translate.bed,o=1<a.bath?word_translate.baths:word_translate.bath;infobox_content.push('<li class="beds"><b>'+a.bed+"</b> <span> "+s+"</span></li>"),infobox_content.push('<li class="baths"><b>'+a.bath+"</b> <span> "+o+"</span></li>"),infobox_content.push('<li class="living-size"> <span>'+_.formatPrice(a.sqft)+"</span> Sq.Ft.<span>("+a.living_size_m2+" m²)</span></li>"),infobox_content.push('<li class="price-sf"><span>$'+a.price_sqft+" </span>/ Sq.Ft.<span>($"+a.price_sqft_m2+" m²)</span></li>"),infobox_content.push("</ul>"),infobox_content.push('<div class="mapviwe-img">'),__flex_g_settings.hasOwnProperty("board_info")&&__flex_g_settings.board_info.hasOwnProperty("board_logo_url")&&!["",null,void 0,"undefined","null"].includes(__flex_g_settings.board_info.board_logo_url)?infobox_content.push('<img title="'+a.address_short.replace(/# /,"#")+", "+a.address_large.replace(/ , /,", ")+'" alt="'+a.address_short.replace(/# /,"#")+", "+a.address_large.replace(/ , /,", ")+'" src="'+a.gallery[0]+'"><img src="'+__flex_g_settings.board_info.board_logo_url+'" style="position: absolute;bottom: 10px;z-index: 2;width: 80px;right: 10px;height:auto">'):infobox_content.push('<img title="'+a.address_short.replace(/# /,"#")+", "+a.address_large.replace(/ , /,", ")+'" alt="'+a.address_short.replace(/# /,"#")+", "+a.address_large.replace(/ , /,", ")+'" src="'+a.gallery[0]+'">'),infobox_content.push("</div>"),infobox_content.push('<a class="ib-load-property-iw" data-mls="'+a.mls_num+'" href="'+flex_idx_filter_params.propertyDetailPermalink+"/"+a.slug+'" title="'+a.address_short.replace(/# /,"#")+", "+a.address_large.replace(/ , /,", ")+'">'+a.address_short.replace(/# /,"#")+", "+a.address_large.replace(/ , /,", ")+"</a>"),infobox_content.push("</div>")}}else{var l="",l=("1"==r.item.is_rental&&(l="/"+word_translate.month),infobox_content.push('<div class="mapview-container">'),infobox_content.push('<div class="mapviwe-header">'),infobox_content.push("<h2>"+r.item.heading+"</h2>"),infobox_content.push('<button class="closeInfo"><span>'+word_translate.close+"</span></button>"),infobox_content.push("</div>"),infobox_content.push('<div class="mapviwe-body">'),infobox_content.push('<div class="mapviwe-item">'),infobox_content.push('<h2 title="'+r.item.address_short.replace(/# /,"#")+'"><span>'+r.item.address_short.replace(/# /,"#")+"</span></h2>"),infobox_content.push("<ul>"),infobox_content.push('<li class="address"><span>'+r.item.address_large.replace(/ , /,", ")+"</span></li>"),infobox_content.push('<li class="price">$'+_.formatPrice(r.item.price)+l+"</li>"),word_translate.beds),i=word_translate.baths,l=1<r.item.bed?word_translate.beds:word_translate.bed,i=1<r.item.bath?word_translate.baths:word_translate.bath;infobox_content.push('<li class="beds"><b>'+r.item.bed+"</b> <span> "+l+"</span></li>"),infobox_content.push('<li class="baths"><b>'+r.item.bath+"</b> <span> "+i+"</span></li>"),infobox_content.push('<li class="living-size"> <span>'+_.formatPrice(r.item.sqft)+"</span> Sq.Ft.<span>("+r.item.living_size_m2+" m²)</span></li>"),infobox_content.push('<li class="price-sf"><span>$'+r.item.price_sqft+" </span>/ Sq.Ft.<span>($"+r.item.price_sqft_m2+" m²)</span></li>"),infobox_content.push("</ul>"),infobox_content.push('<div class="mapviwe-img">'),__flex_g_settings.hasOwnProperty("board_info")&&__flex_g_settings.board_info.hasOwnProperty("board_logo_url")&&!["",null,void 0,"undefined","null"].includes(__flex_g_settings.board_info.board_logo_url)?infobox_content.push('<img title="'+r.item.address_short.replace(/# /,"#")+", "+r.item.address_large.replace(/ , /,", ")+'" alt="'+r.item.address_short.replace(/# /,"#")+", "+r.item.address_large.replace(/ , /,", ")+'" src="'+r.item.gallery[0]+'"><img src="'+__flex_g_settings.board_info.board_logo_url+'" style="position: absolute;bottom: 10px;z-index: 2;width: 80px;right: 10px;height:auto">'):infobox_content.push('<img title="'+r.item.address_short.replace(/# /,"#")+", "+r.item.address_large.replace(/ , /,", ")+'" alt="'+r.item.address_short.replace(/# /,"#")+", "+r.item.address_large.replace(/ , /,", ")+'" src="'+r.item.gallery[0]+'">'),infobox_content.push("</div>"),infobox_content.push('<a class="ib-load-property-iw" data-mls="'+r.item.mls_num+'" href="'+flex_idx_filter_params.propertyDetailPermalink+"/"+r.item.slug+'" title="'+r.item.address_short.replace(/# /,"#")+", "+r.item.address_large.replace(/ , /,", ")+'">'+r.item.address_short.replace(/# /,"#")+", "+r.item.address_large.replace(/ , /,", ")+"</a>"),infobox_content.push("</div>")}infobox_content.push("</div>"),infobox_content.push("</div>"),infobox_content.length&&(infoWindow.setContent(infobox_content.join("")),infoWindow.open(d,n),infobox_content.length=0)}}function filter_refresh_search(e){var o=parseInt(e,10);0<o||(o=0),$(".flex-idx-filter-form:eq(0)").attr("filtemid"),$("input[name='idx[oh]']").val();void 0!==ajax_request_filter&&ajax_request_filter.abort(),ajax_request_filter=$.ajax({url:flex_idx_filter_params.ajaxUrl,type:"POST",data:filter_metadata,dataType:"json",success:function(e){"yes"===__flex_g_settings.anonymous&&(t={search_url:location.href,search_count:e.counter,name:e.title,search_query:e.condition},localStorage.setItem("IB_SAVE_FILTER_PAYLOAD",JSON.stringify(t))),e.items;var t=e.pagination,a={},s=(setupMarkers(e.map_items),1<t.total_pages_count&&(a={pagination:e.pagination}),{properties:e.items}),s=Handlebars.compile(IB_COMMERCIAL.html())(s);$(".result-search-commercial").html(s);s=Handlebars.compile(IB_PAGINATION.html())(a);$("#nav-results").html(s),$("html, body").animate({scrollTop:o},0),$("#info-subfilters").html(word_translate.showing+" "+t.offset.start+" "+word_translate.to+" "+t.offset.end+" "+word_translate.of+" "+_.formatPrice(e.counter)+" "+word_translate.properties+"."),myLazyLoad.update(),idxboostTypeIcon()}})}function mutaSelectViews(e){var t,a;e?$viewFilter.find("ul").length||(e=$viewFilter.find("option:selected").val(),$viewFilter.find("option").each(function(){$(this).replaceWith('<li class="'+$(this).val()+'">'+$(this).text()+"</li>")}),(t=$viewFilter.find("select")).replaceWith("<ul>"+t.html()+"</ul>"),$viewFilter.find("."+e).addClass("active"),$viewFilter.removeClass(e)):$viewFilter.find("select").length||(t=$viewFilter.find(".active").index(),e=$viewFilter.find(".active").attr("class").split(" ")[0],$viewFilter.find("li").each(function(){$(this).replaceWith('<option value="'+$(this).attr("class").split(" ")[0]+'">'+$(this).text()+"</option>")}),(a=$viewFilter.find("ul")).replaceWith("<select>"+a.html()+"</select>"),$viewFilter.find("option").eq(t).prop("selected",!0).siblings().prop("selected",!1),$viewFilter.addClass(e))}void 0!==$openCloseMap&&$openCloseMap.on("click",function(){$openCloseMap.removeClass("no-show"),$(this).addClass("no-show"),$("#wrap-list-result").toggleClass("hidden-results")}),$(document).ready(function(){void 0===myLazyLoad&&(myLazyLoad=new LazyLoad({elements_selector:".flex-lazy-image",callback_load:function(){},callback_error:function(e){$(e).attr("src","https://idxboost.com/i/default_thumbnail.jpg").removeClass("error").addClass("loaded"),$(e).attr("data-origin","https://idxboost.com/i/default_thumbnail.jpg")}})),filter_refresh_search(),initialize()}),Handlebars.registerHelper("paginationBlock",function(e){console.log(e);var t=[];e.has_prev_page&&1<e.total_pages_count&&(t.push('<a href="#" data-page="1" title="First Page" id="firstp" class="ad visible">'),t.push('<span class="clidxboost-icon-arrow-select"></span>'),t.push('<span class="clidxboost-icon-arrow-select"></span>'),t.push("<span>First page</span>"),t.push("</a>")),e.has_prev_page&&(t.push('<a href="#" data-page="'+(e.current_page_number-1)+'" title="Prev Page" id="prevn" class="arrow clidxboost-icon-arrow-select prevn visible">'),t.push("<span>Previous page</span>"),t.push("</a>")),t.push('<ul id="principal-nav">');for(var a=0,s=e.range.length;a<s;a++){var o=e.range[a];e.current_page_number===o?t.push('<li class="active"><a href="#" data-page="'+o+'">'+o+"</a></li>"):t.push('<li><a href="#" data-page="'+o+'">'+o+"</a></li>")}return t.push("</ul>"),e.has_next_page&&(t.push('<a href="#" data-page="'+(e.current_page_number+1)+'" title="Prev Page" id="nextn" class="arrow clidxboost-icon-arrow-select nextn visible">'),t.push("<span>Next page</span>"),t.push("</a>")),e.has_next_page&&1<e.total_pages_count&&(t.push('<a href="#" data-page="'+e.total_pages_count+'" title="First Page" id="lastp" class="ad visible">'),t.push('<span class="clidxboost-icon-arrow-select"></span>'),t.push('<span class="clidxboost-icon-arrow-select"></span>'),t.push("<span>Last page</span>"),t.push("</a>")),t.join("")}),Handlebars.registerHelper("DFformatBathsHalf",function(e){return 0<e?".5":""}),Handlebars.registerHelper("DFhandleStatusProperty",function(e){return"yes"===e.recently_listed?0<e.min_ago&&""!=e.min_ago_txt?'<div class="flex-property-new-listing">'+e.min_ago_txt+"</div>":'<div class="flex-property-new-listing">'+word_translate.new_listing+"</div>":1!=e.status?'<div class="flex-property-new-listing">'+e.status_name+"</div>":void 0}),Handlebars.registerHelper("DFhandleTypeView",function(e){return'<h2 title="'+e.full_address+'" class="ms-property-address"><div class="ms-title-address -address-top">'+e.full_address_top+'</div><div class="ms-br-line">,</div><div class="ms-title-address -address-bottom">'+e.full_address_bottom+"</div></h2>"}),Handlebars.registerHelper("DFhandleOhContent",function(e){if(e.hasOwnProperty("oh_info")&&null!=e.oh_info){e=JSON.parse(e.oh_info);if("object"==typeof e&&e.hasOwnProperty("date")&&e.hasOwnProperty("timer"))return'<div class="ms-open"><span class="ms-wrap-open"><span class="ms-open-title">Open House</span><span class="ms-open-date">'+e.date+'</span><span class="ms-open-time">'+e.timer+"</span></span></div>"}}),Handlebars.registerHelper("DFhandleFormatAddress",function(e){var t;if(null!=e.address_large)return t=e.address_large.split(", ")," <span>"+e.address_short.replace(/# /,"#")+", "+t[0]+", "+t[1]+"</span>"}),Handlebars.registerHelper("DFformatPrice",function(e){return"$"+_.formatPrice(e)}),Handlebars.registerHelper("DFrentalType",function(e){var t="";return t="1"==e?"/"+word_translate.month:t}),Handlebars.registerHelper("DFidxReduced",function(e){return""==e?'<li class="pr">'+e+"</li>":e<0?'<li class="pr down">'+e+"%</li>":'<li class="pr up">'+e+"%</li>"}),Handlebars.registerHelper("DFhandleDevelopment",function(e){return""!==e.development&&null!==e.development?'<li class="development"><span>'+e.development+"</span></li>":""!==e.complex&&null!==e.complex?'<li class="development"><span>'+e.complex+"</span></li>":'<li class="development"><span>'+e.subdivision+"</span></li>"}),Handlebars.registerHelper("DFidxGalleryImages",function(e){var t=[],a="";e.gallery.length<=1&&(a="no-zoom"),t.push('<div class="wrap-slider '+a+'">'),t.push("<ul>");for(var s=0,o=e.gallery.length;s<o;s++)t.push(s<=0?'<li class="flex-slider-current"><img class="flex-lazy-image" data-original="'+e.gallery[s]+'"></li>':'<li class="flex-slider-item-hidden"><img class="flex-lazy-image" data-original="'+e.gallery[s]+'"></li>');return t.push("</ul>"),1<e.gallery.length&&(t.push('<button class="prev flex-slider-prev"><span class="clidxboost-icon-arrow-select"></span></button>'),t.push('<button class="next flex-slider-next"><span class="clidxboost-icon-arrow-select"></span></button>')),e.hasOwnProperty("status")&&"2"!=e.status&&(e.is_favorite?t.push('<button class="clidxboost-btn-check flex-favorite-btn"><span class="clidxboost-icon-check active"></span></button>'):t.push('<button class="clidxboost-btn-check flex-favorite-btn"><span class="clidxboost-icon-check"></span></button>')),t.push("</div>"),t.join("")}),Handlebars.registerHelper("DFformatSqft",function(e){return _.formatPrice(e)}),Handlebars.registerHelper("DFidxPermalinkModal",function(e){return __flex_idx_search_filter.propertyDetailPermalink+"/"+e}),Handlebars.registerHelper("DFformatLotSize",function(e){return _.formatPrice(e)}),Handlebars.registerHelper("DFidxPermalink",function(e){return flex_idx_filter_params.propertyDetailPermalink+"/"+e}),$(document).on("click",".flex-slider-next",function(e){e.stopPropagation();var e=$(this).prev().prev().find("li.flex-slider-current").index();$(this).prev().prev().find("li").length-1<=e?e=0:e+=1,$(this).prev().prev().find("li").removeClass("flex-slider-current"),$(this).prev().prev().find("li").addClass("flex-slider-item-hidden"),$(this).prev().prev().find("li").eq(e).removeClass("flex-slider-item-hidden").addClass("flex-slider-current"),myLazyLoad.update(),"yes"===__flex_g_settings.anonymous&&__flex_g_settings.hasOwnProperty("force_registration")&&1==__flex_g_settings.force_registration&&3<=++countClickAnonymous&&($("#modal_login").addClass("active_modal").find("[data-tab]").removeClass("active"),$("#modal_login").addClass("active_modal").find("[data-tab]:eq(1)").addClass("active"),$("#modal_login").find(".item_tab").removeClass("active"),$("#tabRegister").addClass("active"),$("#modal_login #msRst").empty().html($("#mstextRst").html()),$("button.close-modal").addClass("ib-close-mproperty"),e=$(".header-tab a[data-tab='tabRegister']").attr("data-text"),$("#modal_login .modal_cm .content_md .heder_md .ms-title-modal").html(e),countClickAnonymous=0)}),$(document).on("click",".flex-slider-prev",function(e){e.stopPropagation();var e=$(this).prev().find("li.flex-slider-current").index(),t=$(this).prev().find("li").length,e=0===e?t-1:e-1;$(this).prev().find("li").removeClass("flex-slider-current"),$(this).prev().find("li").addClass("flex-slider-item-hidden"),$(this).prev().find("li").eq(e).removeClass("flex-slider-item-hidden").addClass("flex-slider-current"),myLazyLoad.update(),"yes"===__flex_g_settings.anonymous&&__flex_g_settings.hasOwnProperty("force_registration")&&1==__flex_g_settings.force_registration&&3<=++countClickAnonymous&&($("#modal_login").addClass("active_modal").find("[data-tab]").removeClass("active"),$("#modal_login").addClass("active_modal").find("[data-tab]:eq(1)").addClass("active"),$("#modal_login").find(".item_tab").removeClass("active"),$("#tabRegister").addClass("active"),$("#modal_login #msRst").empty().html($("#mstextRst").html()),$("button.close-modal").addClass("ib-close-mproperty"),t=$(".header-tab a[data-tab='tabRegister']").attr("data-text"),$("#modal_login .modal_cm .content_md .heder_md .ms-title-modal").html(t),countClickAnonymous=0)}),$viewFilter.on("change","select",function(){switch(console.log($viewFilter),$(this).find("option:selected").val()){case"grid":$viewFilter.removeClass("list map").addClass("grid"),$wrapResult.removeClass("view-list view-map").addClass("view-grid"),$cuerpo.removeClass("view-list view-map"),$("#idx_view").val("grid");break;case"list":$viewFilter.removeClass("grid map").addClass("list"),$wrapResult.removeClass("view-grid view-map").addClass("view-list"),$cuerpo.addClass("view-list").removeClass("view-map"),$("#idx_view").val("list");break;case"map":$viewFilter.removeClass("list grid").addClass("map"),$wrapResult.removeClass("view-list view-grid").addClass("view-map"),$cuerpo.removeClass("view-list").addClass("view-map"),$("#idx_view").val("map"),setTimeout(function(){var e=map.getCenter(),t=map.getZoom();if(google.maps.event.trigger(map,"resize"),!1===renderedMarkers){for(var a=new google.maps.LatLngBounds,s=0,o=markers.length;s<o;s++)a.extend(markers[s].position);map.fitBounds(a)}else map.setCenter(e),map.setZoom(t)},100)}new LazyLoad({callback_error:function(e){$(e).attr("src","https://idxboost.com/i/default_thumbnail.jpg").removeClass("error").addClass("loaded"),$(e).attr("data-origin","https://idxboost.com/i/default_thumbnail.jpg")}})}),$viewFilter.on("click","li",function(){switch(currentfiltemid=$(this).parent("ul").parent("li").attr("filtemid"),$(this).addClass("active").siblings().removeClass("active"),$(this).attr("class").split(" ")[0]){case"grid":$(".idxboost-content-filter-"+currentfiltemid+" ").find($wrapResult).removeClass("view-list view-map").addClass("view-grid"),$cuerpo.removeClass("view-list view-map");break;case"list":$(".idxboost-content-filter-"+currentfiltemid+" ").find($wrapResult).removeClass("view-grid view-map").addClass("view-list"),$cuerpo.addClass("view-list").removeClass("view-map");break;case"map":$(".idxboost-content-filter-"+currentfiltemid+" ").find($wrapResult).removeClass("view-list view-grid").addClass("view-map"),$cuerpo.removeClass("view-list").addClass("view-map")}new LazyLoad({callback_error:function(e){$(e).attr("src","https://idxboost.com/i/default_thumbnail.jpg").removeClass("error").addClass("loaded"),$(e).attr("data-origin","https://idxboost.com/i/default_thumbnail.jpg")}})}),$("#filter-views").on("click","li",function(){$(this).hasClass("map")?(mapIsVisible=!0,setTimeout(function(){var e=map.getCenter(),t=map.getZoom();if(google.maps.event.trigger(map,"resize"),!1===renderedMarkers){for(var a=new google.maps.LatLngBounds,s=0,o=markers.length;s<o;s++)a.extend(markers[s].position);map.fitBounds(a)}else map.setCenter(e),map.setZoom(t)},100)):mapIsVisible=!1,new LazyLoad({callback_error:function(e){$(e).attr("src","https://idxboost.com/i/default_thumbnail.jpg").removeClass("error").addClass("loaded"),$(e).attr("data-origin","https://idxboost.com/i/default_thumbnail.jpg")}})}),(flex_pagination=$(".nav-results")).length&&flex_pagination.on("click","a",function(e){e.preventDefault();e=$(this).data("page"),filter_metadata.page=e,e=$(".clidxboost-sc-filters");filter_refresh_search(e=e.length?+$(".clidxboost-sc-filters").offset().top-100:0)}),FILTER_PAGE_URL=$("#flex_idx_sort").data("permalink"),FILTER_PAGE_CURRENT=$("#flex_idx_sort").data("currpage"),view_options=$(".filter-views li"),sort_options=$(".flex_idx_sort"),view_options.length&&view_options.on("click",function(){currentfiltemid=$(this).attr("filtemid"),$(this).hasClass("active")||($(this).html().toLowerCase(),sort_options.val())}),sort_options.length&&sort_options.on("change",function(){currentfiltemid=$(this).attr("filtemid");$("#filter-views li.active:eq(0)").html();var e=$(this).val();filter_metadata.order_by=e,filter_refresh_search()}),flex_ui_loaded=!0,768<=$ventana.width()&&mutaSelectViews(!0),$ventana.on("resize",function(){var e=$ventana.width();768<=e?mutaSelectViews(!0):e<768&&mutaSelectViews(!1)}),$("#wrap-list-result").on("scroll",function(){myLazyLoad.update()}),"ib_boost_dinamic_data_agent_office"==filter_metadata.action&&$("#result-search, .result-search-commercial").on("click",".view-detail",function(e){e.stopPropagation(),e.preventDefault();e=$(this).parent("li").data("mls");loadPropertyInModal(e)}),$("#result-search, .result-search-commercial").on("click",".flex-favorite-btn",function(e){e.stopPropagation(),e.preventDefault();var t,a,s,o=$(this);"yes"===__flex_g_settings.anonymous?($("#modal_login").addClass("active_modal").find("[data-tab]").removeClass("active"),$("#modal_login").addClass("active_modal").find("[data-tab]:eq(1)").addClass("active"),$("#modal_login").find(".item_tab").removeClass("active"),$("#tabRegister").addClass("active"),$("button.close-modal").addClass("ib-close-mproperty"),$(".overlay_modal").css("background-color","rgba(0,0,0,0.8);"),$("#modal_login h2").html($("#modal_login").find("[data-tab]:eq(1)").data("text-force")),e=$(".header-tab a[data-tab='tabRegister']").attr("data-text"),$("#modal_login .modal_cm .content_md .heder_md .ms-title-modal").html(e)):(e=$(this).parents(".propertie").data("class-id"),t=$(this).parents(".propertie").data("mls"),a=$(this).parents(".propertie").data("address"),$(this).find(".clidxboost-icon-check").hasClass("active")?($(this).find(".clidxboost-icon-check").removeClass("active"),s=$(this).attr("data-alert-token"),$.ajax({url:flex_idx_filter_params.ajaxUrl,method:"POST",data:{action:"flex_favorite",class_id:e,mls_num:t,type_action:"remove",token_alert:s},dataType:"json",success:function(e){$(o).attr("data-alert-token","")}})):($(this).find(".clidxboost-icon-check").addClass("active"),$.ajax({url:flex_idx_filter_params.ajaxUrl,method:"POST",data:{action:"flex_favorite",class_id:e,mls_num:t,subject:a,search_url:window.location.href,type_action:"add"},dataType:"json",success:function(e){$(o).attr("data-alert-token",e.token_alert)}})))});