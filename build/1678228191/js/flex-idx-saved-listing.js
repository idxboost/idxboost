!function(i){i(function(){i("#ss_preferred_time").timepicker(),i("#ss_preferred_date").datepicker(),i(".dgt-remove-favorite").on("click",function(t){var e=i(this).data("class-id"),a=i(this).data("mls"),o=i(this).attr("data-alert-token"),s=i(this);swal({title:word_translate.are_you_sure,text:word_translate.are_you_sure_you_want_to_remove_this_property,type:"warning",showCancelButton:!0,confirmButtonColor:"#DD6B55",confirmButtonText:word_translate.yes_delete_it,closeOnConfirm:!1},function(){i.ajax({url:flex_idx_saved_listing.ajaxUrl,method:"POST",data:{action:"flex_favorite",class_id:e,mls_num:a,token_alert:o,type_action:"remove"},dataType:"json",success:function(t){swal({title:word_translate.deleted,text:word_translate.the_property_has_been_removed_from_your_favorites,type:"success",timer:2e3,showConfirmButton:!1});var e=s.data("mls"),a=parseInt(i("#ib-saved-properties-cnt").html(),10);i('.flex-body[data-mls="'+e+'"]').hide().remove(),i("#ib-saved-properties-cnt").html(a-1)}})})}),i(".flex-idx-favorites-add-comment").on("click",function(t){t.stopPropagation();var t=i(this).prev().val(),e=i(this).data("type-action"),o=i(this).data("mls");i.ajax({url:flex_idx_saved_listing.ajaxUrl,method:"POST",data:{action:"flex_favorite_comments",comment:t,mls:o,type_action:e},dataType:"json",success:function(t){var e,a;!0===t.success&&((e=i("#flex-idx-comment_placeholder-"+o)).empty(),(a=[]).push("<blockquote>"+t.comment+"</blockquote"),a.push('<div class="flex-idx-favorite-actions">'),a.push("<p>"),a.push('<a data-mls="'+o+'" href="#" data-action="edit">Edit</a> | <a data-mls="'+o+'" href="#" data-action="remove">Remove</a>'),a.push("</p>"),a.push("</div>"),e.html(a.join(""))),alert(t.message)}})}),i(".comment-bt").on("click",function(){var t=i(this).data("rel"),t=i("#flex-idx_comments-"+t);t.toggle(),t.find("textarea:eq(0)").focus()}),i(".flex-idx-favorite-actions").on("click","a",function(t){t.preventDefault();var e,a=i(this).data("mls");switch(i(this).data("action")){case"edit":(e=i("#flex-idx_comments-"+a)).show(),e.find("textarea:eq(0)").focus(),e.find("button:eq(0)").data("for","update");break;case"remove":i(this).parent().parent().parent().empty(),(e=i("#flex-idx_comments-"+a)).find("button:eq(0)").data("for","add"),e.find("textarea:eq(0)").val("").focus(),i.ajax({url:flex_idx_saved_listing.ajaxUrl,method:"POST",data:{action:"flex_favorite_comments_remove",mls:a},dataType:"json",success:function(t){alert(t.message)}})}}),i(".flex-idx-favorites-rating").on("click","i",function(t){t.stopPropagation();var t=i(this).data("count"),e=i(this).data("mls");i.ajax({url:flex_idx_saved_listing.ajaxUrl,method:"POST",data:{action:"flex_favorite_rate",count:t,mls:e},dataType:"json",success:function(t){alert(t.message)}})})})}(jQuery);