var xDown=null,yDown=null;!function(i){function a(){var t,a=i(".property-information").outerHeight()+i(".panel-options").outerHeight()+i(".ib-pdescription-title").outerHeight()-1,e=i("#property-description");e.length?t=e.outerHeight():(t=0,i(".temporal-content").css({"border-bottom":"0"})),i(".temporal-content").height(t).css({top:a+"px"}).animate({opacity:"1"})}function e(){var t,a=i(".ms-wrap-property-description");a.css({display:"block"}),a.length&&(t=a.outerHeight(),console.log(t),200<t&&(a.hasClass("ms-rd")||a.addClass("ms-rd")))}i(function(){i("body").on("touchstart","#full-slider",function(t){t.stopPropagation(),xDown=t.originalEvent.touches[0].clientX,yDown=t.originalEvent.touches[0].clientY}),i("body").on("touchstart","#modal_img_propertie .wrapper-img",function(t){t.stopPropagation(),xDown=t.originalEvent.touches[0].clientX,yDown=t.originalEvent.touches[0].clientY}),i("body").on("touchmove","#full-slider",function(t){var a,e;xDown&&yDown&&(a=t.originalEvent.touches[0].clientX,e=t.originalEvent.touches[0].clientY,a=xDown-a,e=yDown-e,Math.abs(a)>Math.abs(e)&&(t.preventDefault(),(0<a?i(this).find(".next"):i(this).find(".prev")).click()),yDown=xDown=null)}),i("body").on("touchmove","#modal_img_propertie .wrapper-img",function(t){var a,e;xDown&&yDown&&(a=t.originalEvent.touches[0].clientX,e=t.originalEvent.touches[0].clientY,a=xDown-a,e=yDown-e,Math.abs(a)>Math.abs(e)&&(t.preventDefault(),(0<a?i(this).find(".next"):i(this).find(".prev")).click()),yDown=xDown=null)})}),i(document).ready(function(){Cookies.set("reference_force_registration","no")}),i(window).on("load",function(){var t=i(".content-avatar-image .lazy-img").attr("data-src"),t=(void 0!==t&&i(".content-avatar-image .lazy-img").attr("src",t).removeAttr("data-src").addClass("active"),i("#min-map").attr("data-map-img"));void 0!==t&&i("#min-map").css("background-image","url('"+t+"')").removeAttr("data-map-img"),i(window).scroll(function(){window_y=i(window).scrollTop();var t=i("#content-map #map").attr("data-lat"),a=i("#content-map #map").attr("data-lng");300<=window_y&&(i(".similar-properties .lazy-img").each(function(){var t=i(this).attr("data-src");void 0!==t&&i(this).attr("src",t).removeAttr("data-src").addClass("active")}),void 0!==t&&void 0!==a&&(t=i("#map"),t={lat:parseFloat(t.data("lat")),lng:parseFloat(t.data("lng"))},a=new google.maps.Map(document.getElementById("map"),{zoom:16,center:t}),new google.maps.Marker({position:t,map:a}),i("#map").removeAttr("data-lat"),i("#map").removeAttr("data-lng")))}),a(),e()}),i(window).resize(function(){a(),e()}),jQuery(document).on("click","#ms-read",function(){i(this).hasClass("show")?(i(this).removeClass("show"),i(this).text(i(this).attr("data-before")),i(".ms-wrap-property-description").removeClass("active")):(i(this).addClass("show"),i(this).text(i(this).attr("data-after")),i(".ms-wrap-property-description").addClass("active"))});var t=i(window),o=t.width();function n(t,a){var e;void 0!==a&&a.length&&(e=a.length,t.css("width",e/d*100+"%"),a.css("width",100/e+"%"))}function r(){switch(!0){case o<768:d=1;break;case 768<=o&&o<1024:d=2;break;case 1024<=o:d=3}}t.on("resize",function(){o=t.width(),setTimeout(function(){r(),n(s,l)},100)});var s,l,d=0,c=(r(),i("#full-main"),i("#full-slider .wrap-slider"));c.length&&(s=c.find("ul"),1<(l=s.find("li")).length?(n(s,l),s.data("frame","1")):(c.find(".next, .prev").css("display","none"),console.log("no hay frames para crear el slider"))),i(function(){i(".chk_save_property").click(function(t){t.stopPropagation(),t.preventDefault();var a,e,o,n=i(this);if(i(".chk_save").hasClass("working"))return!1;"yes"==__flex_g_settings.anonymous?(i("#modal_login").addClass("active_modal").find("[data-tab]").removeClass("active"),i("#modal_login").addClass("active_modal").find("[data-tab]:eq(1)").addClass("active"),i("#modal_login").find(".item_tab").removeClass("active"),i("#tabRegister").addClass("active"),i("button.close-modal").addClass("ib-close-mproperty"),i(".overlay_modal").css("background-color","rgba(0,0,0,0.8);"),i("#modal_login h2").html(i("#modal_login").find("[data-tab]:eq(1)").data("text-force")),t=i(".header-tab a[data-tab='tabRegister']").attr("data-text"),i("#modal_login .modal_cm .content_md .heder_md .ms-title-modal").html(t)):(t=n.data("class-id"),a=n.data("mls"),e=n.attr("data-alert-token"),o=n.attr("data-address"),i(".chk_save").addClass("working"),i(this).find("span").hasClass("active")?i.ajax({url:flex_idx_property_params.ajaxUrl,method:"POST",data:{action:"flex_favorite",class_id:t,mls_num:a,type_action:"remove",token_alert:e,registration_key:"undefined"!=typeof IB_AGENT_REGISTRATION_KEY?IB_AGENT_REGISTRATION_KEY:null},dataType:"json",success:function(t){var a=n.attr("data-save");""!==a&&void 0!==a||(a="Save"),i(".chk_save").removeClass("working"),i(".chk_save").removeAttr("data-alert-token").find("span").removeClass("active").text(a)}}):i.ajax({url:flex_idx_property_params.ajaxUrl,method:"POST",data:{action:"flex_favorite",class_id:t,mls_num:a,subject:o,type_action:"add",registration_key:"undefined"!=typeof IB_AGENT_REGISTRATION_KEY?IB_AGENT_REGISTRATION_KEY:null},dataType:"json",success:function(t){var a=n.attr("data-remove");""!==a&&void 0!==a||(a="Remove"),i(".chk_save").removeClass("working"),i(".chk_save").attr("data-alert-token",t.token_alert).find("span").addClass("active").text(a)}}))})})}(jQuery);