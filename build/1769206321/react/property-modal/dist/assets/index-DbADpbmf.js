import{j as e,a as s,b as a,d as r,n as t,u as i,e as l,r as n,C as o}from"./bootstrap-Bia-j1yN.js";import{r as c,u as m}from"./i18n-CBvvWIm0.js";import{u as d}from"./state-DCJ-GHTM.js";import{f as p,b as h}from"./index-yM6ESJ1Z.js";import"./phone-input-DMd9JE98.js";const u=({url:s,additionalText:a="",image_url:r,description:t,openEmailForm:i})=>{const{t:l}=m(),[n,o]=c.useState(!1),d=(()=>{const e=c.useRef(null);return c.useEffect(()=>()=>{e.current&&clearTimeout(e.current)},[]),(...s)=>{e.current&&clearTimeout(e.current),e.current=setTimeout(()=>{(()=>{o(!1)})(...s)},2e3)}})(),p=e=>{const i=encodeURIComponent(s);let l="";switch(e){case"whatsapp":l=`https://api.whatsapp.com/send?text=${i}`;break;case"telegram":l=`https://t.me/share/url?url=${i}`;break;case"facebook":l=`https://www.facebook.com/sharer/sharer.php?u=${i}`;break;case"pinterest":{const e=encodeURIComponent(r);l=`https://pinterest.com/pin/create/button/?url=${i}${e?`&media=${e}`:""}&description=${encodeURIComponent(t)}`;break}case"linkedin":l=`https://www.linkedin.com/sharing/share-offsite/?url=${i}`;break;case"x":{const e=encodeURIComponent(a);l=`https://x.com/intent/post?url=${i}${e?`&text=${e}`:""}`;break}default:return void console.error("Platform not supported")}/iPhone|iPad|iPod|Android/i.test(navigator.userAgent)?window.location.href=l:window.open(l,"_blank","left=0,top=0,width=550,height=450,personalbar=0,toolbar=0,scrollbars=0,resizable=0")};return e.jsx("div",{className:"ms-sf-share-options",children:e.jsxs("ul",{children:[e.jsx("li",{children:e.jsxs("button",{className:"ms-sf-btn -silver","aria-label":"Copy Link",onClick:async()=>{try{await navigator.clipboard.writeText(s),o(!0),d()}catch(e){console.error("Error copying link: ",e)}},children:[e.jsx("i",{className:"sf-icon-copy"}),e.jsxs("span",{children:[l("Copy Link")," ",n&&e.jsxs("span",{className:"ms-sf-label-copy",children:[l("Copied"),"!"]})]})]})}),!!i&&e.jsx("li",{children:e.jsxs("button",{className:"ms-sf-btn -silver","aria-label":"Email",onClick:i,children:[e.jsx("i",{className:"sf-icon-envelope"}),e.jsx("span",{children:l("Email")})]})}),e.jsx("li",{children:e.jsxs("button",{className:"ms-sf-btn -silver","aria-label":"Facebook",onClick:()=>p("facebook"),children:[e.jsx("i",{className:"sf-icon-facebook-sp"}),e.jsx("span",{children:"Facebook"})]})}),e.jsx("li",{children:e.jsxs("button",{className:"ms-sf-btn -silver","aria-label":"WhatsApp",onClick:()=>p("whatsapp"),children:[e.jsx("i",{className:"sf-icon-whatsapp"}),e.jsx("span",{children:"WhatsApp"})]})}),e.jsx("li",{children:e.jsxs("button",{className:"ms-sf-btn -silver","aria-label":"Linkedin",onClick:()=>p("linkedin"),children:[e.jsx("i",{className:"sf-icon-linkedin-sp"}),e.jsx("span",{children:"Linkedin"})]})}),e.jsx("li",{children:e.jsxs("button",{className:"ms-sf-btn -silver","aria-label":"X",onClick:()=>p("x"),children:[e.jsx("i",{className:"sf-icon-twitter"}),e.jsx("span",{children:"X"})]})}),e.jsx("li",{children:e.jsxs("button",{className:"ms-sf-btn -silver","aria-label":"Telegram",onClick:()=>p("telegram"),children:[e.jsx("i",{className:"sf-icon-telegram"}),e.jsx("span",{children:"Telegram"})]})}),e.jsx("li",{children:e.jsxs("button",{className:"ms-sf-btn -silver","aria-label":"Pinterest",onClick:()=>p("pinterest"),children:[e.jsx("i",{className:"sf-icon-pinterest-sp"}),e.jsx("span",{children:"Pinterest"})]})})]})})},f=({mlsNumber:i,onClose:l})=>{const{t:n}=m(),{infoLead:o}=s(),{executeRecaptcha:d,isLoading:p}=a(),[h,{isLoading:u}]=r(),f=p||u,[x,j]=c.useState(""),[b,v]=c.useState(""),[y,N]=c.useState(o.email||""),[g,w]=c.useState(""),[k,C]=c.useState("");function E({name:e,lastName:s,email:a}){const r=`${e||""} ${s||""}`.trim();r&&w(r),a&&N(a)}const I=c.useCallback(()=>{j(""),v(""),E(o),C("")},[o]);return c.useEffect(()=>{E(o)},[o]),e.jsxs("form",{className:"ms-sf-contact-form",onSubmit:async function(e){e.preventDefault();try{const e=await d("submit"),s={targetEmail:x,sourceEmail:y,targetName:b,sourceName:g,comments:k,mlsNumber:i,recaptchaToken:e};await h(s).unwrap(),l?.(),I(),t({title:"Email Sent!",text:"Your email was sent successfully",type:"success",timer:2e3})}catch(s){t({title:"Email Sending Failed",text:"An error occurred while sending your email. Please try again later.",type:"error",showConfirmButton:!0})}},children:[e.jsxs("div",{className:"ms-sf-wrapper-input",children:[e.jsxs("label",{htmlFor:"femail",children:[n("To"),"*"]}),e.jsx("input",{id:"femail",name:"femail",type:"email",placeholder:`${n("Recipient email")}*`,value:x,onChange:e=>j(e.target.value),required:!0})]}),e.jsxs("div",{className:"ms-sf-wrapper-input",children:[e.jsxs("label",{htmlFor:"Fname",children:[n("Name"),"*"]}),e.jsx("input",{id:"Fname",name:"Fname",type:"text",placeholder:`${n("Recipient name")}*`,value:b,onChange:e=>v(e.target.value),required:!0})]}),e.jsxs("div",{className:"ms-sf-wrapper-input",children:[e.jsxs("label",{htmlFor:"Yemail",children:[n("From"),"*"]}),e.jsx("input",{id:"Yemail",name:"Yemail",type:"email",placeholder:`${n("Enter your email")}*`,value:y,onChange:e=>N(e.target.value),required:!0})]}),e.jsxs("div",{className:"ms-sf-wrapper-input",children:[e.jsxs("label",{htmlFor:"Yname",children:[n("Name"),"*"]}),e.jsx("input",{id:"Yname",name:"Yname",type:"text",placeholder:`${n("Enter your full name")}*`,value:g,onChange:e=>w(e.target.value),required:!0})]}),e.jsxs("div",{className:"ms-sf-wrapper-input -full",children:[e.jsx("label",{htmlFor:"message",children:n("Message")}),e.jsx("textarea",{name:"message",id:"message",placeholder:n("Message"),value:k,onChange:e=>C(e.target.value)})]}),e.jsx("div",{className:"ms-sf-wrapper-input",children:e.jsxs("span",{className:"ms-sf-small-text",children:["* ",n("Required fields")]})}),e.jsxs("div",{className:"ms-sf-wrapper-btn -flex",children:[e.jsx("button",{className:"ms-sf-btn -silver -xl",type:"button",onClick:()=>{I(),l?.()},children:n("Cancel")}),e.jsx("button",{className:"ms-sf-btn -black -xl -full",type:"submit",disabled:f,children:n(f?"Loading...":"Continue")})]})]})},x=()=>{const{t:s}=m(),a=d(),[r,t]=c.useState(!1),[x,j]=c.useState(!1),[b,v]=c.useState(null);i(r),c.useEffect(()=>{const e=e=>{const s=e.detail;s&&(v(s),t(!0))},s=()=>{t(!1),v(null),j(!1)};return window.addEventListener(p,e),window.addEventListener(h,s),()=>{window.removeEventListener(p,e),window.removeEventListener(h,s)}},[a]);const y=document.getElementById("wpadminbar"),N=y?.offsetHeight||0,[g,w]=c.useState(!1),k=c.useCallback(()=>{w(!1),setTimeout(()=>{l()},300)},[a]);if(c.useEffect(()=>{r&&setTimeout(()=>w(!0),100)},[r]),!r||!b)return null;const C=document.getElementById("share-modal")||document.createElement("div");return C.id||(C.id="share-modal",document.body.appendChild(C)),n.createPortal(e.jsx("div",{className:"ms-sf-modal active "+(g?"in":""),tabIndex:-1,role:"dialog",id:"shareModal",children:e.jsx("div",{className:"ms-sf-modal-dialog -md",role:"document",children:e.jsxs("div",{className:"ms-sf-modal-content "+(g?"active":""),style:{top:N},children:[e.jsx("div",{className:"ms-sf-modal-header ms-sf-ct",children:e.jsx("div",{className:"ms-sf-flex",children:e.jsx("h5",{className:"ms-sf-title",children:(()=>{if(!b?.type)return s("Share");switch(b.type){case"building":return s("Share this Building");case"property":return s("Share this Property");default:return s("Share")}})()})})}),e.jsxs("div",{className:"ms-sf-modal-body ms-sf-ct",children:[e.jsx("div",{className:"ms-sf-paragraph",children:x?e.jsx("p",{children:s("Recommend this to a friend, just enter their email below.")}):e.jsx("p",{children:s("Recommend this to a friend.")})}),e.jsxs("div",{className:"ms-sf-form",children:[e.jsxs("div",{className:"ms-sf-property-detail",children:[e.jsx("div",{className:"ms-sf-property-image",children:e.jsx(o,{url:b.image_url})}),e.jsxs("div",{className:"ms-sf-property-info",children:["property"===b.type&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"ms-sf-property-price",children:b.propertyInfo?.price}),e.jsxs("div",{className:"ms-sf-property-detail",children:[b.propertyInfo?.commercialType?e.jsx("div",{className:"ms-sf-property-item",children:s(b.propertyInfo?.commercialType)}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"ms-sf-property-item",children:[e.jsx("strong",{children:b.propertyInfo?.beds})," ",1===b.propertyInfo?.beds?s("Bed"):s("Beds")]}),e.jsxs("div",{className:"ms-sf-property-item",children:[e.jsx("strong",{children:b.propertyInfo?.baths})," ",1===b.propertyInfo?.baths?s("Bath"):s("Baths")]})]}),e.jsxs("div",{className:"ms-sf-property-item",children:[e.jsx("strong",{children:b.propertyInfo?.area.value})," ",b.propertyInfo?.area.measurement]})]}),e.jsx("div",{className:"ms-sf-property-address",children:b.propertyInfo?.address_short}),e.jsx("div",{className:"ms-sf-property-address",children:b.propertyInfo?.address_large})]}),"building"===b.type&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"ms-sf-property-price",children:b.buildingInfo?.name}),e.jsx("div",{className:"ms-sf-property-address",children:b.full_address})]})]})]}),e.jsxs("div",{className:"ms-sf-wrapper-share-options "+(x?"active":""),children:[e.jsx(u,{url:b.url,image_url:b.image_url,additionalText:b.additionalText,description:b.full_address,openEmailForm:"property"===b.type?()=>j(!0):void 0}),"property"===b.type&&!!b.propertyInfo&&e.jsx("div",{className:"ms-sf-form-hidden",children:e.jsx(f,{mlsNumber:b.propertyInfo.mls_num,onClose:()=>j(!1)})})]})]})]}),e.jsx("button",{className:"ms-sf-btn -close-modal -circle -standard -sm js-close-st-modal","data-id":"#shareModal",onClick:k,children:e.jsx("i",{className:"sf-icon-close"})})]})})}),C)};export{x as default};
