import{r as e,z as t,u as a,a as n,b as r,c as s,R as l,F as o,d as i,C as c,e as m,A as d,f as u,L as _,g as f}from"./vendor-26fbf5da.js";import{U as p}from"./phone-input-44c1570e.js";const g={user:{},api:{idxboost:"https://api.idxboost.dev"},apiKey:{googleMaps:"AIzaSyBU6VY2oHfII-RPAcZZu9qq843bpE3pLNo"},form:{type:window.idx_buy_sell_rent_forms?.form_type||"sell",accessToken:window.idx_buy_sell_rent_forms?.access_token||"ZGViN2ExN2ExYjgyZDk1MjAxNGZiOWEzNWQ4Yzg0YjNlY2E3MjU4NzU0ZDIwOGFiNmE4ZDdkYThhMTk0Mzk4NA",leadToken:window.idx_buy_sell_rent_forms?.lead_token||"",firstName:window.idx_buy_sell_rent_forms?.lead.name||"",lastName:window.idx_buy_sell_rent_forms?.lead.lastname||"",email:window.idx_buy_sell_rent_forms?.lead.email||"",phone:window.idx_buy_sell_rent_forms?.lead.new_phone||""}};var E=Object.defineProperty;class y{constructor(){var e,t,a;e=this,t="baseUrl",a=`${g.api.idxboost}/idxforms`,((e,t,a)=>{t in e?E(e,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[t]=a})(e,"symbol"!=typeof t?t+"":t,a)}buildQuery(e){const t=new URLSearchParams;return Object.entries(e).forEach(([e,a])=>{null!=a&&t.append(e,String(a))}),t.toString()}async getById({id:e}){const t=await fetch(`${this.baseUrl}/${e}`);if(!t.ok)throw new Error("Error fetching idxform by ID");return t.json()}async getBySlug({slug:e,accessToken:t}){const a=new FormData;a.append("access_token",t);const n=await fetch(`${this.baseUrl}/slug-rk/${e}`,{method:"POST",body:a});if(!n.ok)throw new Error("Error fetching idxform by slug");return n.json()}async getIpLead(){try{const e=await fetch(`${g.api.idxboost}/get/ip_lead`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({})});if(!e.ok)throw new Error(`Error fetching IP lead: ${e.status}`);return e.json()}catch(e){return console.error("Error fetching IP lead:",e),null}}async sendIdxForm({client_ip:e,origin:t,referer:a,agent:n,access_token:r,lead_token:s,form_data:l,autologinForms:o}){if(!e){const t=await this.getIpLead();e=t?.ip||"",l.country_code=t?.country||""}const i={client_ip:e,origin:t,referer:a,agent:n,access_token:r,lead_token:s,form_data:JSON.stringify(l),autologinForms:o},c=new FormData;Object.entries(i).forEach(([e,t])=>{c.append(e,String(t))});const m=await fetch(`${this.baseUrl}/handle`,{method:"POST",body:c});if(!m.ok){const e=await m.text();throw new Error(`Error sending idxform: ${e}`)}return m.json()}}var h=(e=>(e.SelectSingle="select_single",e.Contact="contact",e.Text="text",e.Address="address",e))(h||{});const b=t.object({first_name:t.string().nonempty("First name is required"),last_name:t.string().nonempty("Last name is required"),email:t.string().email("Invalid email").nonempty("Email is required"),phone:t.string().nonempty("Phone is required").regex(/^\+\d{7,15}$/,"Invalid phone number"),comments:t.string().optional(),questions:t.array(t.object({question:t.string(),questionType:t.enum(["address","select_single","text","contact"]),answer:t.string().optional(),options:t.array(t.string())}).refine(e=>"contact"===e.questionType||null!=e.answer&&e.answer.trim().length>0,{message:"This field is required",path:["answer"]}))}),w=()=>{const t=e.useMemo(()=>new y,[]),[i,c]=e.useState(null),m=a({resolver:n(b),defaultValues:{questions:[]}}),{handleSubmit:d,control:u,reset:_,trigger:f,formState:{errors:p}}=m,{fields:E}=r({control:u,name:"questions"}),[w,N]=e.useState(0),[k,v]=e.useState(!1),x=E[w],q=w===(E?.length&&E.length-1),T=0===w,M=i?.background_image,O=s({control:u,name:`questions.${w}.answer`});return e.useEffect(()=>{t.getBySlug({slug:g.form.type,accessToken:g.form.accessToken}).then(e=>c(e))},[]),e.useEffect(()=>{i?.steps&&_({questions:i.steps.map(e=>({...e,answer:""})),first_name:g.form.firstName,last_name:g.form.lastName,email:g.form.email,phone:g.form.phone,comments:""})},[i?.steps]),i&&x?k?l.createElement("div",{className:"form-wizard"},l.createElement("div",{className:"form-background",style:{backgroundImage:`url(${M})`}}),l.createElement("div",{className:"form-content"},l.createElement(j,{onReset:()=>{_(),N(0),v(!1)}}))):l.createElement(o,{...m},l.createElement("form",{className:"_form-wizard_1126g_2",onSubmit:e=>e.preventDefault()},l.createElement("div",{className:"_form-background_1126g_9",style:{backgroundImage:`url(${M})`}}),l.createElement("div",{className:"_form-content_1126g_33"},l.createElement("div",{className:"_step-container_1126g_42"},l.createElement("div",{className:"_back-button-container_1126g_81"},!T&&l.createElement(A,{onClick:()=>N(e=>e-1)}))," ",l.createElement("div",{className:"_step-content_1126g_51"},l.createElement("div",{className:"_step-header_1126g_67"},l.createElement(I,{question:x.question,subtitle:"contact"===x.questionType?"Please provide your contact information below and we will be in touch very soon!":""})),x.questionType===h.SelectSingle&&l.createElement(C,{name:`questions.${w}.answer`,options:x.options}),x.questionType===h.Address&&l.createElement(F,{name:`questions.${w}.answer`}),x.questionType===h.Text&&l.createElement(S,{name:`questions.${w}.answer`}),x.questionType===h.Contact&&l.createElement($,null),l.createElement("div",{className:"_navigation-buttons_1126g_73"},l.createElement(P,{disabled:!(q||O&&""!==O.trim()),onClick:q?d(async e=>{e.steps=e.questions.filter(e=>"contact"!==e.questionType).map(e=>({question:e.question,answer:e.answer})),delete e.questions,e.name=`${e.first_name} ${e.last_name}`,delete e.first_name,delete e.last_name;const{message:a,success:n}=await t.sendIdxForm({agent:window.navigator.userAgent,form_data:e,origin:window.origin,referer:document.referrer,access_token:g.form.accessToken,lead_token:g.form.leadToken,autologinForms:!1});n&&v(!0)}):async()=>{await f(`questions.${w}.answer`)&&N(e=>e+1)}},q?"Submit":"Continue"))))))):null},N="_form-row_kfrw7_8",k="_link_kfrw7_18",v="_field-phone_1e976_14",x=({name:e,label:t,placeholder:a})=>{const{control:n}=i();return l.createElement("div",{className:"_field-group_1e976_2"},t&&l.createElement("label",{className:"_field-label_1e976_6"},t),l.createElement(c,{name:e,control:n,rules:{required:"Phone is required"},render:({field:e,fieldState:t})=>l.createElement(l.Fragment,null,l.createElement(p,{defaultCountry:"us",placeholder:a,value:e.value||"",onChange:e.onChange,inputClassName:`${v} _field-phone__input_1e976_28`,countrySelectorStyleProps:{buttonClassName:`${v} _field-phone__country_1e976_25`}}),t.error&&l.createElement("div",{className:"_field-error_1e976_46"},t.error.message))}))},q={"field-label":"_field-label_1fc8e_2","field-input":"_field-input_1fc8e_11","field-error":"_field-error_1fc8e_33","contact-textarea":"_contact-textarea_1fc8e_39"},S=({name:e,label:t,placeholder:a})=>{const{control:n}=i(),{field:r,fieldState:{error:s}}=m({name:e,control:n});return l.createElement("div",{className:q["field-group"]},t&&l.createElement("label",{className:q["field-label"]},t),l.createElement("input",{type:"text",className:q["field-input"],placeholder:a,...r}),s&&l.createElement("div",{className:q["field-error"]},s.message))},T=({name:e,label:t,placeholder:a})=>{const{control:n}=i(),{field:r,fieldState:{error:s}}=m({name:e,control:n});return l.createElement("div",{className:q["field-group"]},t&&l.createElement("label",{className:q["field-label"]},t),l.createElement("textarea",{className:`${q["field-input"]} ${q["contact-textarea"]}`,placeholder:a,...r}),s&&l.createElement("div",{className:q["field-error"]},s.message))},$=()=>l.createElement("div",{className:"_contact-form_kfrw7_2"},l.createElement("div",{className:N},l.createElement(S,{name:"first_name",placeholder:"First Name *"}),l.createElement(S,{name:"last_name",placeholder:"Last Name *"})),l.createElement("div",{className:N},l.createElement(x,{name:"phone",placeholder:"Phone *"}),l.createElement(S,{name:"email",placeholder:"Email *"})),l.createElement("div",{className:`${N} _full_kfrw7_14`},l.createElement(T,{name:"comments",placeholder:"Comments"})),l.createElement("div",{style:{display:"flex",gap:"10px",fontSize:"10px"}},l.createElement("input",{type:"checkbox",style:{transform:"scale(1.5)"}})," ",l.createElement("p",{className:"_agreement_text_kfrw7_22"},"I agree to be contacted by test via call, email, and text for real estate services. To opt out, you can reply 'stop' at any time or reply 'help' for assistance. You can also click the unsubscribe link in the emails. Message and data rates may apply. Message frequency may vary."," ",l.createElement("a",{className:k,href:"https://google.com"},"Privacy Policy")," ","and"," ",l.createElement("a",{className:k,href:"https://google.com"},"Terms of Service"),"."))),C=({name:e,options:t})=>{const{control:a}=i();return l.createElement(c,{name:e,control:a,render:({field:e})=>l.createElement("div",{className:"_options-grid_ex9j6_2"},t.map(t=>l.createElement("button",{key:t,type:"button",className:"_option-button_ex9j6_9 "+(e.value===t?"_selected_ex9j6_29":""),onClick:()=>e.onChange(t)},t)))})},j=({onReset:e=()=>{}})=>l.createElement("div",{className:"_success-container_14xsd_2"},l.createElement("div",{className:"_success-icon_14xsd_7"},l.createElement("svg",{width:"40",height:"40",viewBox:"0 0 24 24",fill:"none",stroke:"white",strokeWidth:"3"},l.createElement("polyline",{points:"20 6 9 17 4 12"}))),l.createElement("h2",{className:"_success-title_14xsd_27"},"Thank You!"),l.createElement("p",{className:"_success-message_14xsd_33"},"Your information has been submitted successfully.",l.createElement("br",null),"We'll be in touch with you shortly."),l.createElement("button",{className:"_nav-button_14xsd_40 _next_14xsd_51",onClick:e},"Submit Another Response")),I=({question:e,subtitle:t})=>l.createElement(l.Fragment,null,l.createElement("h1",{className:"_step-question_1bter_1"},e),t&&l.createElement("p",{className:"_step-subtitle_1bter_8"},t)),P=({onClick:e=()=>{},disabled:t,children:a})=>l.createElement("button",{className:"_form-button_1qdj5_2",onClick:e,disabled:t,type:"button"},a),F=({name:t})=>{const{setValue:a}=i(),[n,r]=e.useState(null),[s,o]=e.useState(null);return l.createElement(d,{onLoad:e=>{r(e)},onPlaceChanged:()=>{if(null!==n){const e=n.getPlace();if(!e.geometry)return;const r=e.geometry.location?.lat()||0,s=e.geometry.location?.lng()||0,l=e.formatted_address||"";o({lat:r,lng:s,address:l}),a(t,l)}},options:{types:["address"]}},l.createElement(S,{name:t,label:"Property Address *",placeholder:"Enter your address here"}))},A=({onClick:e=()=>{}})=>l.createElement("button",{className:"_nav-button_l9r4l_1 _back_l9r4l_16",type:"button",onClick:e},l.createElement(u,null)," Back"),M=["places"],O=({children:e})=>l.createElement(_,{googleMapsApiKey:g.apiKey.googleMaps,libraries:M},e);f(document.getElementById("root-dinamic-forms")).render(l.createElement(l.StrictMode,null,l.createElement(O,null,l.createElement(w,null))));
