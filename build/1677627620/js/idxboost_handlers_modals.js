var originalPositionY,IB_CURRENT_LEFT_CLICKS,IB_MODAL_SLIDER,IB_TRACKING_IFRAME,initial_href=document.URL,ib_path_filters=__flex_idx_filter_regular.searchFilterPermalink,IB_HAS_LEFT_CLICKS=__flex_g_settings.hasOwnProperty("signup_left_clicks")&&null!=__flex_g_settings.signup_left_clicks,$=jQuery,IB_ACCESS_TOKEN=__flex_idx_filter_regular.accessToken,IB_MODAL_WRAPPER=$("#flex_idx_modal_wrapper"),IB_MODAL_TPL=$("#ib-modal-template"),IB_LISTINGS_CT=$(".ib-listings-ct:eq(0)"),IB_HEADING_CT=$(".ib-heading-ct:eq(0)"),style_map=[];function markPropertyAsFavorite(t,e,a){var n=__flex_idx_filter_regular.trackListingsDetail.replace(/{{mlsNumber}}/g,t);console.dir([t,e,a]),$.ajax({type:"POST",url:n,data:{access_token:IB_ACCESS_TOKEN,flex_credentials:Cookies.get("ib_lead_token"),url_origin:location.origin,url_referer:document.referrer,user_agent:navigator.userAgent,registration_key:"undefined"!=typeof IB_AGENT_REGISTRATION_KEY?IB_AGENT_REGISTRATION_KEY:null},success:function(e){"add"===e.type?$(this).data("token-alert",e.token_alert):$(this).data("token-alert",""),"modal"===a&&("add"===e.type?($(".ib-filter-slider-building .js-flex-favorite-btn").each(function(){console.log($(this).parent().attr("data-mls")+"--"+t),$(this).parent().attr("data-mls")==t&&(console.log("ingreso add 1"),$(this).addClass("active"))}),$(".ib_content_views_building .flex-favorite-btn").each(function(){(null!=$(this).parent().data("mls")?$(this):$(this).parent()).parent().data("mls")==t&&(console.log("ingreso add 2"),$(this).find("span").addClass("active flex-active-fav"))}),IB_LISTINGS_CT.find(".ib-pfavorite").each(function(){$(this).data("mls")===t&&($(this).addClass("ib-pf-active"),$(this).data("token-alert",e.token_alert))}),$("#wrap-list-result ul#result-search").find("li.propertie").each(function(){$(this).data("mls")==t&&($(this).find(".clidxboost-icon-check").addClass("active"),$(this).find(".flex-favorite-btn").data("alert-token",e.token_alert),$(this).attr("data-token-alert",e.token_alert))})):($(".ib_content_views_building .flex-favorite-btn").each(function(){(null!=$(this).parent().data("mls")?$(this):$(this).parent()).parent().data("mls")==t&&$(this).find("span").removeClass("active flex-active-fav")}),$(".ib-filter-slider-building .js-flex-favorite-btn").each(function(){$(this).parent().attr("data-mls")==t&&$(this).removeClass("active flex-active-fav")}),IB_LISTINGS_CT.find(".ib-pfavorite").each(function(){$(this).data("mls")===t&&$(this).removeClass("ib-pf-active")}),$("#wrap-list-result ul#result-search").find("li.propertie").each(function(){$(this).data("mls")==t&&($(this).find(".clidxboost-icon-check").removeClass("active"),$(this).find(".flex-favorite-btn").data("alert-token",""),$(this).attr("data-token-alert",""))}))),jQuery("#_ib_lead_activity_tab").length&&jQuery("#_ib_lead_activity_tab button:eq(1)").click()}}),console.log("Track #"+t+" as favorite.")}function calculate_mortgage(e,t,a,n){console.log("mortgage calculator"),e=e.replace(/[^\d]/g,""),t=parseFloat(t),a=a.replace(/[^\d]/g,""),n=parseFloat(n);for(var i=0,o=e*(t/100),e=e-o,l=1+(n/=100)/12,r=l,s=0;s<12*a;s++)i+=1/r,r*=l;var n=e/i,c=0,t=n+(c=t<20?e/1e5*55:c);return{mortgage:_.formatPrice(e),down_payment:_.formatPrice(o),monthly:_.formatPrice(n,2),total_monthly:_.formatPrice(t,2)}}null!=style_map_idxboost&&""!=style_map_idxboost&&(style_map=JSON.parse(style_map_idxboost)),_.mixin({formatPrice:function(e,t,a,n,i,o,l){a="\\d(?=(\\d{"+(a||3)+"})+"+(0<t?"\\D":"$")+")",e=Number(e).toFixed(Math.max(0,~~t));return(o&&l?o:"")+(i?e.replace(".",i):e).replace(new RegExp(a,"g"),"$&"+(n||","))+(o&&!l?o:"")},formatShortPrice:function(e){var t,e=Number(e);return e<1e3?e:e<1e4?(t=Math.ceil(e/100)/10)+"K":e<1e6?(t=Math.ceil(e/1e3))<100?String(t).substr(0,2)+"K":1e3<=t?"1M":t+"K":(t=e<1e7?Math.ceil(e/1e4)/100:Math.ceil(e/1e5)/10,(t=-1!==String(t,".")?String(t).substr(0,4):t)+"M")},getMLSImage:function(e,t){return["https://retsimages.s3.amazonaws.com",e.substr(-2),t].join("/")},getMLSListImage:function(e,t,a){return["https://retsimages.s3.amazonaws.com",e.substr(-2),e].join("/")+"_"+a+".jpg"}}),Handlebars.registerHelper("idxBoardDisclaimer",function(t){let a="";if((window.property=t).hasOwnProperty("board_info")&&t.board_info.hasOwnProperty("board_disclaimer")&&!["",null,void 0,"undefined","null"].includes(t.board_info.board_disclaimer)){let e=t.board_info.board_disclaimer.replace("{officeName}",t.office_name);e=e.replace("{office_phone}",'<a href="tel:'+t.phone_office+'">'+t.phone_office+"</a>"),a="<p>"+e+"</p>"}return a}),Handlebars.registerHelper("idxBoardDisclaimerExist",function(e){let t=!1;return t=e.hasOwnProperty("board_info")&&e.board_info.hasOwnProperty("board_disclaimer")&&!["",null,void 0,"undefined","null"].includes(e.board_info.board_disclaimer)?!0:t}),Handlebars.registerHelper("formatPrice",function(e){return"$"+_.formatPrice(e)}),Handlebars.registerHelper("formatSqft",function(e){return[null,"",void 0,"undefined",0,"0"].includes(e)?"N/A":_.formatPrice(e)}),Handlebars.registerHelper("propertyPermalink",function(e){return"undefined"!=typeof IB_AGENT_PERMALINK?IB_AGENT_PERMALINK+"/property/"+e:__flex_idx_filter_regular.propertyDetailPermalink+"/"+e}),Handlebars.registerHelper("agentPhoto",function(e){return"undefined"!=typeof IB_AGENT_AVATAR_IMAGE?IB_AGENT_AVATAR_IMAGE.length?IB_AGENT_AVATAR_IMAGE:"https://idxboost-spw-assets.idxboost.us/photos/avatar.jpg":__flex_idx_filter_regular.agentPhoto}),Handlebars.registerHelper("agentFullName",function(e){return"undefined"!=typeof IB_AGENT_FULL_NAME?IB_AGENT_FULL_NAME:__flex_idx_filter_regular.agentFullName}),Handlebars.registerHelper("agentPhoneNumber",function(e){return("undefined"!=typeof IB_AGENT_PHONE_NUMBER?IB_AGENT_PHONE_NUMBER:__flex_idx_filter_regular.agentPhone).replace(/[^\d+]/g,"")}),Handlebars.registerHelper("agentPhone",function(e){return"undefined"!=typeof IB_AGENT_PHONE_NUMBER?IB_AGENT_PHONE_NUMBER:__flex_idx_filter_regular.agentPhone}),Handlebars.registerHelper("idxReduced",function(e){return e<0?'<div class="ib-pipanumber ib-pipadown">'+e+"%</div>":0<e?'<div class="ib-pipanumber">'+e+"%</div>":""}),Handlebars.registerHelper("isNotSingleorCondos",function(e){return"1"!=e.tw&&"1"!=e.mf&&"1"!=e.is_vacant||""==e.more_info_info.style?"":'<li><span class="ib-plist-st">'+word_translate.style+'</span><span class="ib-plist-pt">'+e.more_info_info.style+"</span></li>"}),Handlebars.registerHelper("isSingleorCondos",function(e){return"1"!=e.tw&&"1"!=e.mf&&"1"!=e.is_vacant&&""!=e.more_info_info.style?'<li><span class="ib-plist-st">'+word_translate.style+'</span><span class="ib-plist-pt">'+e.more_info_info.style+"</span></li>":""}),Handlebars.registerHelper("leadFirstName",function(e){return __flex_idx_filter_regular.leadFirstName}),Handlebars.registerHelper("leadLastName",function(e){return __flex_idx_filter_regular.leadLastName}),Handlebars.registerHelper("leadEmailAddress",function(e){return __flex_idx_filter_regular.leadEmailAddress}),Handlebars.registerHelper("leadPhoneNumber",function(e){return __flex_idx_filter_regular.leadPhoneNumber}),Handlebars.registerHelper("markClassActiveTab",function(e){return 0<parseInt(e.img_cnt,10)?"ib-pva-photos":"ib-pva-map"}),Handlebars.registerHelper("idxFavoriteText",function(e){return""===e.token_alert?word_translate.save:word_translate.remove}),Handlebars.registerHelper("formatPriceSqft",function(e){return 0<e.sqft&&0<e.price?_.formatPrice(e.price/e.sqft):""}),Handlebars.registerHelper("idxImage",function(e){return 0<e.img_cnt?_.getMLSImage(e.mls_num,e.image):"https://www.idxboost.com/i/default_thumbnail.jpg"}),Handlebars.registerHelper("idxRelatedImage",function(e){return""!=e.image?_.getMLSImage(e.mls_num,e.image):"https://www.idxboost.com/i/default_thumbnail.jpg"}),Handlebars.registerHelper("idxImageEmpty",function(e){return e.img_cnt<2?"ib-piwoimgs":""}),Handlebars.registerHelper("markPhotosActive",function(e){return 0<parseInt(e.img_cnt,10)?"ib-pvi-active":""}),Handlebars.registerHelper("markMapActive",function(e){return 0==parseInt(e.img_cnt,10)?"ib-pvi-active":""}),Handlebars.registerHelper("formatAcres",function(e,t=null){return[null,"",void 0,"undefined",0,"0"].includes(e)?"N/A":2e4<=(e=parseFloat(e.replaceAll(",","")))?"total"==t?_.formatPrice(e)+" Sq.Ft / "+parseFloat((e/43560).toFixed(2))+" Acre":parseFloat((e/43560).toFixed(2))+" Acre":_.formatPrice(e)}),Handlebars.registerHelper("hasAcre",function(e){return![null,"",void 0,"undefined",0,"0"].includes(e)&&2e4<=(e=parseFloat(e.replaceAll(",","")))}),Handlebars.registerHelper("idxFavoriteClass",function(e){var t=["ib-pfheart","ib-pfstar","ib-pfcube"][__flex_idx_filter_regular.search.view_icon_type],a=[];return a.push(t),e.hasOwnProperty("token_alert")&&e.token_alert.length&&a.push("ib-pf-active"),a.join(" ")}),Handlebars.registerHelper("isRentalType",function(e){return e.hasOwnProperty("is_rental")&&"1"==e.is_rental?"/"+word_translate.month:""}),Handlebars.registerHelper("idxSliderLoop",function(e){sliderItems=[];var t=e.gallery.length;return 0<e.gallery.length&&(e.gallery.forEach(function(e){sliderItems.push('<img class="ib-pvsitem" src="'+e+'">')}),1==t?(sliderItems.push('<img class="ib-pvsitem" src="https://www.idxboost.com/i/default_thumbnail.jpg">'),sliderItems.push('<img class="ib-pvsitem" src="https://www.idxboost.com/i/default_thumbnail.jpg">')):2==t&&sliderItems.push('<img class="ib-pvsitem" src="https://www.idxboost.com/i/default_thumbnail.jpg">')),sliderItems.join("")}),$(document).ready(function(){var e=window.location.search.split("&"),t=new URLSearchParams(window.location.search);e.forEach(function(e){-1!=e.split("=")[0].indexOf("savesearch")&&"yes"!=flex_idx_filter_params.anonymous&&active_modal($("#modal_login"))}),idxboost_filter_countacti=!0,t.has("show")&&(e=t.get("show"),originalPositionY=Math.max(window.pageYOffset,document.documentElement.scrollTop,document.body.scrollTop),console.log("opening..."),loadPropertyInModal(e))}),$(document).on("click",".ib-mmclose",function(){var e=$(event.target).parents(".ib-modal-master");e.addClass("ib-md-hiding"),setTimeout(function(){e.removeClass("ib-md-active ib-md-hiding")},250)}),$(".ib-dbsave").on("click",function(){var e;"yes"===__flex_g_settings.anonymous?$(".register").length&&($(".register").click(),e=$(".header-tab a[data-tab='tabRegister']").attr("data-text"),$("#modal_login .modal_cm .content_md .heder_md .ms-title-modal").html(e)):$("#ib-fsearch-save-modal").addClass("ib-md-active")}),$(".ib-listings-ct:eq(0)").on("click",".gs-next-arrow",function(){var a,e,t,n=$(this).parents(".ib-pislider");if(!n.hasClass("gs-builded"))return a="",e=n.attr("data-mls"),t=n.attr("data-img-cnt"),null==e?console.log("MLS code no found!"):null==t?console.log("Counter not found!"):($.each(getGallery(e,t,2),function(e,t){a+='<img data-lazy="'+t+'" class="gs-lazy">'}),n.html(a),void n.greatSlider({type:"fade",nav:!0,bullets:!1,autoHeight:!1,lazyLoad:!0,layout:{arrowDefaultStyles:!1}}))}),$("body").on("click",".ib-pshared",function(){$(this).toggleClass("ib-ps-active")});{function loadPropertyInModal(e){/webOS|iPhone|iPad/i.test(navigator.userAgent)&&$("body").addClass("only-mobile"),lastOpenedProperty=e,"undefined"!=typeof infoWindow&&infoWindow.isOpen()&&infoWindow.close();var t=__flex_idx_filter_regular.lookupListingsDetail.replace(/{{mlsNumber}}/g,e);$.ajax({type:"POST",url:t,data:{access_token:IB_ACCESS_TOKEN,flex_credentials:Cookies.get("ib_lead_token"),registration_key:"undefined"!=typeof IB_AGENT_REGISTRATION_KEY?IB_AGENT_REGISTRATION_KEY:null,onimage:"noresize"},success:function(t){if(jQuery("#_ib_lead_activity_tab").length&&jQuery("#_ib_lead_activity_tab button:eq(0)").click(),void 0!==IB_TRACKING_IFRAME&&$(IB_TRACKING_IFRAME).remove(),"undefined"!=typeof dataLayer&&__flex_g_settings.hasOwnProperty("has_dynamic_ads")&&"1"==__flex_g_settings.has_dynamic_ads&&t.hasOwnProperty("mls_num")&&t.hasOwnProperty("price")&&(i=parseInt(t.price.replace(/[^\d+]/g,"")),dataLayer.push({event:"view_item",value:i,items:[{id:t.mls_num,google_business_vertical:"real_estate"}]})),setTimeout(function(){var e;0<$(".ib-property-mortage-submit").length&&(e=t.price,$(".ib-property-mortgage-f:eq(0)").trigger("reset"),e=calculate_mortgage(e,$(".ib-property-mc-dp:eq(0)").val(),$(".ib-property-mc-ty:eq(0)").val(),$(".ib-property-mc-ir:eq(0)").val()),$(".ib-price-calculator").text("$"+e.monthly+"/mo"),$(".js-est-payment").hide(),"0"==t.is_rental&&$(".js-est-payment").show())},1e3),(IB_TRACKING_IFRAME=document.createElement("iframe")).setAttribute("id","__ib-tracking-iframe"),"undefined"!=typeof IB_AGENT_PERMALINK?IB_TRACKING_IFRAME.setAttribute("src",IB_AGENT_PERMALINK+"/property/"+t.slug):IB_TRACKING_IFRAME.setAttribute("src",__flex_g_settings.propertyDetailPermalink+"/"+t.slug),IB_TRACKING_IFRAME.style.width="1px",IB_TRACKING_IFRAME.style.height="1px",document.body.appendChild(IB_TRACKING_IFRAME),IB_TRACKING_IFRAME.onload=function(){setTimeout(function(){$(IB_TRACKING_IFRAME).remove()},3e3)},t.hasOwnProperty("development")&&""==t.development&&t.hasOwnProperty("complex")&&(t.development=t.complex),IB_MODAL_WRAPPER.length&&IB_MODAL_TPL.length){var a,n,e,i=Handlebars.compile(IB_MODAL_TPL.html()),o=(t.oh_bool=!1,"1"==t.oh&&(t.oh_bool=!0),t.hasOwnProperty("oh")&&"1"==t.oh&&t.hasOwnProperty("oh_info")&&(null!=(o=JSON.parse(t.oh_info))&&"object"==typeof o&&o.hasOwnProperty("date")&&o.hasOwnProperty("timer")&&(t.oh_info_parce_date=o.date,t.oh_info_parce_timer=o.timer)),IB_MODAL_WRAPPER.html(i(t)),void 0!==Cookies.get("_ib_user_firstname")?Cookies.get("_ib_user_firstname"):""),i=void 0!==Cookies.get("_ib_user_lastname")?Cookies.get("_ib_user_lastname"):"",l=void 0!==Cookies.get("_ib_user_email")?Cookies.get("_ib_user_email"):"",r=void 0!==Cookies.get("_ib_user_phone")&&"null"!=Cookies.get("_ib_user_phone")?Cookies.get("_ib_user_phone"):"",s=$(".ib-propery-inquiry-f");s.find('[name="first_name"]').val(o),s.find('[name="last_name"]').val(i),s.find('[name="email_address"]').val(l),s.find('[name="phone_number"]').val(r),0<parseInt(t.img_cnt,10)&&(IB_MODAL_SLIDER=(IB_MODAL_SLIDER=IB_MODAL_WRAPPER.find(".ib-pvslider:eq(0)")).greatSlider({type:"swipe",nav:!0,bullets:!1,lazyLoad:!0,navSpeed:150,layout:{fsButtonDefaultStyles:!1,fsButtonClass:"ib-btnfs"},fullscreen:!0,breakPoints:{640:{items:2},1024:{items:3}},onInited:function(){767<$(window).width()&&IB_MODAL_WRAPPER.find(".gs-item-slider").on("click",function(){IB_MODAL_SLIDER.fullscreen("in",$(this).index()+1)});var e=IB_MODAL_WRAPPER.find(".ib-pvsinumber");e.length?IB_MODAL_WRAPPER.find(".ib-pvsinumber").text(IB_MODAL_WRAPPER.find(".gs-item-active").index()+1+" of "+IB_MODAL_WRAPPER.find(".ib-pvsitem").length):IB_MODAL_WRAPPER.find(".gs-container-items").append('<span class="ib-pvsinumber">'+(IB_MODAL_WRAPPER.find(".gs-item-active").index()+1)+" of "+IB_MODAL_WRAPPER.find(".ib-pvsitem").length+"</span>")},onFullscreenIn:()=>{IB_MODAL_WRAPPER.find(".ib-pvsititle").length||IB_MODAL_WRAPPER.find(".gs-container-items").append('<span class="ib-pvsititle">'+$(".ib-ptitle").text()+" "+$(".ib-pstitle").text()+"</span>")},onStepEnd:(e,t)=>{IB_MODAL_WRAPPER.find(".ib-pvsinumber").text(t+" of "+IB_MODAL_WRAPPER.find(".ib-pvsitem").length)}}));{function c(e){e.stopPropagation(),e.preventDefault(),a.setMapTypeId(google.maps.MapTypeId.HYBRID),$(this).hasClass("is-active")?($(this).removeClass("is-active"),a.setMapTypeId(google.maps.MapTypeId.ROADMAP)):($(this).addClass("is-active"),a.setMapTypeId(google.maps.MapTypeId.HYBRID))}function d(e){e.stopPropagation(),e.preventDefault(),a.setZoom(a.getZoom()+1)}function p(e){e.stopPropagation(),e.preventDefault(),a.setZoom(a.getZoom()-1)}function m(){var e=a.getDiv().firstChild;u(e)?f():_(e),document.onwebkitfullscreenchange=document.onmsfullscreenchange=document.onmozfullscreenchange=document.onfullscreenchange=function(){u(e)?fullscreenControl.classList.add("is-fullscreen"):fullscreenControl.classList.remove("is-fullscreen")}}function u(e){return(document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement||document.msFullscreenElement)==e}function _(e){e.requestFullscreen?e.requestFullscreen():e.webkitRequestFullScreen?e.webkitRequestFullScreen():e.mozRequestFullScreen?e.mozRequestFullScreen():e.msRequestFullScreen&&e.msRequestFullScreen()}function f(){document.exitFullscreen?document.exitFullscreen():document.webkitExitFullscreen?document.webkitExitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.msExitFullscreen&&document.msExitFullscreen()}0===parseInt(t.img_cnt,10)&&(o={lat:parseFloat(t.lat),lng:parseFloat(t.lng)},a=new google.maps.Map(IB_MODAL_WRAPPER.find(".ib-pmap")[0],{zoom:18,center:o,styles:style_map,gestureHandling:"cooperative",panControl:!1,scrollwheel:!1,disableDoubleClickZoom:!0,disableDefaultUI:!0,streetViewControl:!0}),new google.maps.Marker({position:o,map:a}),google.maps.event.addListenerOnce(a,"tilesloaded",function(){(mapButtonsWrapper=document.createElement("div")).classList.add("flex-map-controls-ct"),(fullscreenControl=document.createElement("div")).classList.add("flex-map-fullscreen"),mapButtonsWrapper.appendChild(fullscreenControl),(mapZoomInButton=document.createElement("div")).classList.add("flex-map-zoomIn"),mapButtonsWrapper.appendChild(mapZoomInButton),(mapZoomOutButton=document.createElement("div")).classList.add("flex-map-zoomOut"),mapButtonsWrapper.appendChild(mapZoomOutButton),(satelliteMapButton=document.createElement("div")).classList.add("flex-satellite-button"),mapButtonsWrapper.appendChild(satelliteMapButton),google.maps.event.addDomListener(mapZoomInButton,"click",d),google.maps.event.addDomListener(mapZoomOutButton,"click",p),google.maps.event.addDomListener(fullscreenControl,"click",m),google.maps.event.addDomListener(satelliteMapButton,"click",c),a.controls[google.maps.ControlPosition.TOP_RIGHT].push(mapButtonsWrapper)}))}{function c(e){e.stopPropagation(),e.preventDefault(),n.setMapTypeId(google.maps.MapTypeId.HYBRID),$(this).hasClass("is-active")?($(this).removeClass("is-active"),n.setMapTypeId(google.maps.MapTypeId.ROADMAP)):($(this).addClass("is-active"),n.setMapTypeId(google.maps.MapTypeId.HYBRID))}function d(e){e.stopPropagation(),e.preventDefault(),n.setZoom(n.getZoom()+1)}function p(e){e.stopPropagation(),e.preventDefault(),n.setZoom(n.getZoom()-1)}function m(){var e=n.getDiv().firstChild;u(e)?f():_(e),document.onwebkitfullscreenchange=document.onmsfullscreenchange=document.onmozfullscreenchange=document.onfullscreenchange=function(){u(e)?fullscreenControl.classList.add("is-fullscreen"):fullscreenControl.classList.remove("is-fullscreen")}}function u(e){return(document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement||document.msFullscreenElement)==e}function _(e){e.requestFullscreen?e.requestFullscreen():e.webkitRequestFullScreen?e.webkitRequestFullScreen():e.mozRequestFullScreen?e.mozRequestFullScreen():e.msRequestFullScreen&&e.msRequestFullScreen()}function f(){document.exitFullscreen?document.exitFullscreen():document.webkitExitFullscreen?document.webkitExitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.msExitFullscreen&&document.msExitFullscreen()}$("#ib-modal-property-map").length&&(i={lat:parseFloat(t.lat),lng:parseFloat(t.lng)},n=new google.maps.Map(document.getElementById("ib-modal-property-map"),{zoom:18,center:i,styles:style_map,gestureHandling:"cooperative",panControl:!1,scrollwheel:!1,disableDoubleClickZoom:!0,disableDefaultUI:!0,streetViewControl:!0}),new google.maps.Marker({position:i,map:n}),google.maps.event.addListenerOnce(n,"tilesloaded",function(){(mapButtonsWrapper=document.createElement("div")).classList.add("flex-map-controls-ct"),(fullscreenControl=document.createElement("div")).classList.add("flex-map-fullscreen"),mapButtonsWrapper.appendChild(fullscreenControl),(mapZoomInButton=document.createElement("div")).classList.add("flex-map-zoomIn"),mapButtonsWrapper.appendChild(mapZoomInButton),(mapZoomOutButton=document.createElement("div")).classList.add("flex-map-zoomOut"),mapButtonsWrapper.appendChild(mapZoomOutButton),(satelliteMapButton=document.createElement("div")).classList.add("flex-satellite-button"),mapButtonsWrapper.appendChild(satelliteMapButton),google.maps.event.addDomListener(mapZoomInButton,"click",d),google.maps.event.addDomListener(mapZoomOutButton,"click",p),google.maps.event.addDomListener(fullscreenControl,"click",m),google.maps.event.addDomListener(satelliteMapButton,"click",c),n.controls[google.maps.ControlPosition.TOP_RIGHT].push(mapButtonsWrapper)}))}/iPhone|iPad|iPod|Android/i.test(navigator.userAgent)?(document.title="Checkout this property #"+t.mls_num+" "+t.address_short+" "+t.address_large,"undefined"!=typeof IB_AGENT_PERMALINK?history.pushState(null,null,IB_AGENT_PERMALINK+"/property/"+t.slug):history.pushState(null,null,__flex_g_settings.propertyDetailPermalink+"/"+t.slug)):((l=new URLSearchParams(window.location.search)).set("show",t.mls_num),history.pushState(null,null,"?"+l.toString())),void 0===Cookies.get("_ib_disabled_forcereg")&&(!0===IB_HAS_LEFT_CLICKS?(IB_CURRENT_LEFT_CLICKS=parseInt(Cookies.get("_ib_left_click_force_registration"),10)-1,Cookies.set("_ib_left_click_force_registration",IB_CURRENT_LEFT_CLICKS),0!=typeof idxboost_force_registration&&null!=idxboost_force_registration&&1==idxboost_force_registration&&parseInt(Cookies.get("_ib_left_click_force_registration"),10)<=0&&"yes"===__flex_g_settings.anonymous&&($("#modal_login").addClass("active_modal").find("[data-tab]").removeClass("active"),$("#modal_login").addClass("active_modal").find("[data-tab]:eq(1)").addClass("active"),$("#modal_login").find(".item_tab").removeClass("active"),$("#tabRegister").addClass("active"),$("#modal_login #msRst").empty().html($("#mstextRst").html()),$("button.close-modal").addClass("ib-close-mproperty"),$(".overlay_modal").css("background-color","rgba(0,0,0,0.8);"),$("#modal_login h2").html($("#modal_login").find("[data-tab]:eq(1)").data("text-force")),e=$(".header-tab a[data-tab='tabRegister']").attr("data-text"),$("#modal_login .modal_cm .content_md .heder_md .ms-title-modal").html(e))):"yes"===__flex_g_settings.anonymous&&(__flex_g_settings.hasOwnProperty("force_registration")&&1==__flex_g_settings.force_registration||0!=typeof idxboost_force_registration&&"undefined"!=typeof idxboost_force_registration&&null!=idxboost_force_registration&&1==idxboost_force_registration)&&($("#modal_login").addClass("active_modal").find("[data-tab]").removeClass("active"),$("#modal_login").addClass("active_modal").find("[data-tab]:eq(1)").addClass("active"),$("#modal_login").find(".item_tab").removeClass("active"),$("#tabRegister").addClass("active"),$("#modal_login #msRst").empty().html($("#mstextRst").html()),$("button.close-modal").addClass("ib-close-mproperty"),$(".overlay_modal").css("background-color","rgba(0,0,0,0.8);"),$("#modal_login h2").html($("#modal_login").find("[data-tab]:eq(1)").data("text-force")),e=$(".header-tab a[data-tab='tabRegister']").attr("data-text"),$("#modal_login .modal_cm .content_md .heder_md .ms-title-modal").html(e))),__flex_g_settings.hasOwnProperty("google_recaptcha_public_key")&&""!=__flex_g_settings.google_recaptcha_public_key&&($(".ib-propery-inquiry-f:eq(0)").find('input[name="recaptcha_response"]').remove(),grecaptcha.execute(__flex_g_settings.google_recaptcha_public_key).then(function(e){$(".ib-propery-inquiry-f:eq(0)").append('<input type="hidden" name="recaptcha_response" value="'+e+'">'),console.dir(e)}))}}}),console.log("Open Property #"+e+" in modal.")}void 0===loadPropertyInModal&&(window.loadPropertyInModal=loadPropertyInModal)}IB_MODAL_WRAPPER.length&&(IB_MODAL_WRAPPER.on("click",".ib-rel-property",function(e){e.preventDefault(),loadPropertyInModal($(this).data("mls"))}),IB_MODAL_WRAPPER.on("click",".ib-pfavorite",function(e){var t;"yes"===__flex_g_settings.anonymous?$(".register").length&&($(".register").click(),t=$(".header-tab a[data-tab='tabRegister']").attr("data-text"),$("#modal_login .modal_cm .content_md .heder_md .ms-title-modal").html(t)):(t=$(this).data("mls"),$(this).data("token-alert"),$(this).hasClass("ib-pf-active")?$(this).children().html(word_translate.save):$(this).children().html(word_translate.remove),$(this).toggleClass("ib-pf-active"),markPropertyAsFavorite(t,e.target,"modal"))}),IB_MODAL_WRAPPER.on("click",".ib-pbtnopen",function(){var e=$(this).data("permalink");"undefined"!=typeof is_references_active&&"yes"==is_references_active&&Cookies.set("reference_force_registration","yes"),window.open(e)}),IB_MODAL_WRAPPER.on("click",".ib-pbtnclose",function(){var e;IB_MODAL_WRAPPER.find(".ib-modal-master").removeClass("ib-md-active"),IB_MODAL_WRAPPER.empty(),$("body").removeClass("only-mobile"),/iPhone|iPad|iPod|Android/i.test(navigator.userAgent)?(document.title=initial_title,history.pushState(null,null,initial_href)):((e=new URLSearchParams(window.location.search)).delete("show"),""===e.toString()?history.pushState(null,null,ib_path_filters):history.pushState(null,null,"?"+e.toString())),$("html").removeClass("ib-mpropertie-open"),void 0!==originalPositionY&&(console.log("restoring to: "+originalPositionY),window.scrollTo(0,originalPositionY))}),IB_MODAL_WRAPPER.on("click",".ib-plsifb",function(e){e.preventDefault();var t,a="https://www.facebook.com/sharer/sharer.php?",n={u:$(this).attr("href")};for(t in n)a+="&"+t+"="+encodeURIComponent(n[t]);e=window.open(a,"","left=0,top=0,width=550,height=450,personalbar=0,toolbar=0,scrollbars=0,resizable=0");e.focus&&e.focus()}),IB_MODAL_WRAPPER.on("click",".ib-plsitw",function(e){e.preventDefault();var t,a="http://twitter.com/share?",e=[],n=1==$(this).data("rental")?"Rent ":"Sale ",i=(e.push($(this).data("type")),e.push(" for "+n),e.push($(this).data("price")),e.push(" #"+$(this).data("mls")),e.push(" in "),e.push($(this).data("address")+" "),{url:$(this).attr("href"),text:e.join("")});for(t in i)a+="&"+t+"="+encodeURIComponent(i[t]);n=window.open(a,"","left=0,top=0,width=550,height=450,personalbar=0,toolbar=0,scrollbars=0,resizable=0");n.focus&&n.focus()}),IB_MODAL_WRAPPER.on("click",".ib-pscalculator",function(){var e=$(this).data("price").replace(/[^\d]/g,""),t=($(".ib-property-mortgage-f:eq(0)").trigger("reset"),$(".ib-property-mc-dp:eq(0)").val()),a=$(".ib-property-mc-ty:eq(0)").val(),n=$(".ib-property-mc-ir:eq(0)").val(),e=($(".ib-property-mc-pp").val("$"+_.formatPrice(e)),calculate_mortgage(e,t,a,n));$(".ib-calc-mc-mortgage").html("$"+e.mortgage),$(".ib-calc-mc-down-payment").html("$"+e.down_payment),$(".ib-calc-mc-monthly").html("$"+e.monthly),$(".ib-calc-mc-totalmonthly").html("$"+e.total_monthly),console.dir(e),console.log("open mortgage calculator"),$("#ib-mortage-calculator").addClass("ib-md-active")}),$(".ib-property-mortage-submit").on("click",function(){var e=calculate_mortgage($(".ib-property-mc-pp:eq(0)").val(),$(".ib-property-mc-dp:eq(0)").val(),$(".ib-property-mc-ty:eq(0)").val(),$(".ib-property-mc-ir:eq(0)").val());$(".ib-calc-mc-mortgage").html("$"+e.mortgage),$(".ib-calc-mc-down-payment").html("$"+e.down_payment),$(".ib-calc-mc-monthly").html("$"+e.monthly),$(".ib-calc-mc-totalmonthly").html("$"+e.total_monthly),$(".ib-price-calculator").text("$"+e.monthly+"/mo")}),IB_MODAL_WRAPPER.on("click",".ib-psemailfriend",function(){var e=$(this).data("mls");$(".ib-property-share-friend-f:eq(0)").trigger("reset"),$(".ib-property-share-mls-num:eq(0)").val(e),$("#ib-email-to-friend").addClass("ib-md-active")}),$(".ib-property-share-friend-f").on("submit",function(e){e.preventDefault();var n=$(this);__flex_g_settings.hasOwnProperty("has_enterprise_recaptcha")?"1"!=__flex_g_settings.has_enterprise_recaptcha&&grecaptcha.ready(function(){grecaptcha.execute(__flex_g_settings.google_recaptcha_public_key,{action:"share_property_with_friend"}).then(function(e){n.prepend('<input type="hidden" name="recaptcha_response" value="'+e+'">');var e=n.serialize(),t=n.find("input[name='mls_number']:eq(0)").val(),t=__flex_idx_filter_regular.shareWithFriendEndpoint.replace(/{{mlsNumber}}/g,t),a=$("#idxboost_collection_xr").find('[name="building_id"]').val();null!=a&&(t=__flex_idx_filter_regular.shareWithFriendBuildingEndpoint.replace(/{{codBuilding}}/g,a),e=e+"&url="+encodeURIComponent(window.location.href)),$.ajax({type:"POST",url:t,data:{access_token:IB_ACCESS_TOKEN,flex_credentials:Cookies.get("ib_lead_token"),form_data:e},success:function(e){}}),$("#ib-email-to-friend").removeClass("ib-md-active"),$("#ib-email-thankyou").addClass("ib-md-active")})}):grecaptcha.ready(function(){grecaptcha.execute(__flex_g_settings.google_recaptcha_public_key,{action:"share_property_with_friend"}).then(function(e){n.prepend('<input type="hidden" name="recaptcha_response" value="'+e+'">');var e=n.serialize(),t=n.find("input[name='mls_number']:eq(0)").val(),t=__flex_idx_filter_regular.shareWithFriendEndpoint.replace(/{{mlsNumber}}/g,t);$.ajax({type:"POST",url:t,data:{access_token:IB_ACCESS_TOKEN,flex_credentials:Cookies.get("ib_lead_token"),form_data:e},success:function(e){}}),$("#ib-email-to-friend").removeClass("ib-md-active"),$("#ib-email-thankyou").addClass("ib-md-active")})})}),IB_MODAL_WRAPPER.on("click",".ib-psprint",function(){var e=$("#printMessageBox"),t=$(".ib-property-detail:eq(0)");e.fadeIn(),t.addClass("ib-phw-print").printArea({onClose:function(){e.fadeOut("fast"),t.removeClass("ib-phw-print")}})}),IB_MODAL_WRAPPER.on("submit",".ib-propery-inquiry-f",function(e){e.preventDefault();var e=$(this).serialize(),t=(console.log(e),console.log("handle share property"),$(this).find("input[name='mls_number']:eq(0)").val()),t=__flex_idx_filter_regular.requestInformationEndpoint.replace(/{{mlsNumber}}/g,t);console.log(t),$.ajax({type:"POST",url:t,data:{access_token:IB_ACCESS_TOKEN,flex_credentials:Cookies.get("ib_lead_token"),form_data:e},success:function(e){}}),$(".ib-propery-inquiry-f:eq(0)").trigger("reset"),$("#ib-email-thankyou").addClass("ib-md-active")}),IB_MODAL_WRAPPER.on("click",".ib-btnfs",function(){void 0!==IB_MODAL_SLIDER&&IB_MODAL_SLIDER.fullscreen("in")}),IB_MODAL_WRAPPER.on("click",".ib-paitem",function(){$(this).toggleClass("ib-pai-active")}),IB_MODAL_WRAPPER.on("click",".ib-pvitem",function(e){var t,a,n=$(this).data("id");function i(e){e.stopPropagation(),e.preventDefault(),a.setMapTypeId(google.maps.MapTypeId.HYBRID),$(this).hasClass("is-active")?($(this).removeClass("is-active"),a.setMapTypeId(google.maps.MapTypeId.ROADMAP)):($(this).addClass("is-active"),a.setMapTypeId(google.maps.MapTypeId.HYBRID))}function o(e){e.stopPropagation(),e.preventDefault(),a.setZoom(a.getZoom()+1)}function l(e){e.stopPropagation(),e.preventDefault(),a.setZoom(a.getZoom()-1)}function r(){var e,t=a.getDiv().firstChild;s(t)?document.exitFullscreen?document.exitFullscreen():document.webkitExitFullscreen?document.webkitExitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.msExitFullscreen&&document.msExitFullscreen():(e=t).requestFullscreen?e.requestFullscreen():e.webkitRequestFullScreen?e.webkitRequestFullScreen():e.mozRequestFullScreen?e.mozRequestFullScreen():e.msRequestFullScreen&&e.msRequestFullScreen(),document.onwebkitfullscreenchange=document.onmsfullscreenchange=document.onmozfullscreenchange=document.onfullscreenchange=function(){s(t)?fullscreenControl.classList.add("is-fullscreen"):fullscreenControl.classList.remove("is-fullscreen")}}function s(e){return(document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement||document.msFullscreenElement)==e}$(this).hasClass("ib-pvi-active")||"video"==n||($(this).parent().find(">li").removeClass("ib-pvi-active"),$(this).addClass("ib-pvi-active"),$(this).parent().parent().parent().removeClass("ib-pva-photos ib-pva-map").addClass("ib-pva-"+n),"map"===n&&(n=$(this).data("lat"),t=$(this).data("lng"),"no"===$(this).data("loaded")&&(n={lat:parseFloat(n),lng:parseFloat(t)},a=new google.maps.Map(IB_MODAL_WRAPPER.find(".ib-pmap")[0],{zoom:18,center:n,styles:style_map,gestureHandling:"cooperative",panControl:!1,scrollwheel:!1,disableDoubleClickZoom:!0,disableDefaultUI:!0,streetViewControl:!0}),new google.maps.Marker({position:n,map:a}),google.maps.event.addListenerOnce(a,"tilesloaded",function(){(mapButtonsWrapper=document.createElement("div")).classList.add("flex-map-controls-ct"),(fullscreenControl=document.createElement("div")).classList.add("flex-map-fullscreen"),mapButtonsWrapper.appendChild(fullscreenControl),(mapZoomInButton=document.createElement("div")).classList.add("flex-map-zoomIn"),mapButtonsWrapper.appendChild(mapZoomInButton),(mapZoomOutButton=document.createElement("div")).classList.add("flex-map-zoomOut"),mapButtonsWrapper.appendChild(mapZoomOutButton),(satelliteMapButton=document.createElement("div")).classList.add("flex-satellite-button"),mapButtonsWrapper.appendChild(satelliteMapButton),google.maps.event.addDomListener(mapZoomInButton,"click",o),google.maps.event.addDomListener(mapZoomOutButton,"click",l),google.maps.event.addDomListener(fullscreenControl,"click",r),google.maps.event.addDomListener(satelliteMapButton,"click",i),a.controls[google.maps.ControlPosition.TOP_RIGHT].push(mapButtonsWrapper)}))))}));