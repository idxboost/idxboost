var xDown=null,yDown=null;!function(n){function temporalHeight(){var t,a=n(".property-information").outerHeight()+n(".panel-options").outerHeight()+n(".ib-pdescription-title").outerHeight()-1,e=n("#property-description");e.length?t=e.outerHeight():(t=0,n(".temporal-content").css({"border-bottom":"0"})),n(".temporal-content").height(t).css({top:a+"px"}).animate({opacity:"1"})}function temporalHeightBuilding(){var t,a=n(".ms-wrap-property-description");a.css({display:"block"}),a.length&&(t=a.outerHeight(),console.log(t),200<t&&(a.hasClass("ms-rd")||a.addClass("ms-rd")))}n(function(){n("body").on("touchstart","#full-slider",function(t){t.stopPropagation(),xDown=t.originalEvent.touches[0].clientX,yDown=t.originalEvent.touches[0].clientY}),n("body").on("touchstart","#modal_img_propertie .wrapper-img",function(t){t.stopPropagation(),xDown=t.originalEvent.touches[0].clientX,yDown=t.originalEvent.touches[0].clientY}),n("body").on("touchmove","#full-slider",function(t){var a,e;xDown&&yDown&&(a=t.originalEvent.touches[0].clientX,e=t.originalEvent.touches[0].clientY,a=xDown-a,e=yDown-e,Math.abs(a)>Math.abs(e)&&(t.preventDefault(),(0<a?n(this).find(".next"):n(this).find(".prev")).click()),yDown=xDown=null)}),n("body").on("touchmove","#modal_img_propertie .wrapper-img",function(t){var a,e;xDown&&yDown&&(a=t.originalEvent.touches[0].clientX,e=t.originalEvent.touches[0].clientY,a=xDown-a,e=yDown-e,Math.abs(a)>Math.abs(e)&&(t.preventDefault(),(0<a?n(this).find(".next"):n(this).find(".prev")).click()),yDown=xDown=null)})}),n(document).ready(function(){Cookies.set("reference_force_registration","no")}),n(window).on("load",function(){var t=n(".content-avatar-image .lazy-img").attr("data-src"),t=(void 0!==t&&n(".content-avatar-image .lazy-img").attr("src",t).removeAttr("data-src").addClass("active"),n("#min-map").attr("data-map-img"));void 0!==t&&n("#min-map").css("background-image","url('"+t+"')").removeAttr("data-map-img"),n(window).scroll(function(){window_y=n(window).scrollTop();var t=n("#content-map #map").attr("data-lat"),a=n("#content-map #map").attr("data-lng");300<=window_y&&(n(".similar-properties .lazy-img").each(function(){var t=n(this).attr("data-src");void 0!==t&&n(this).attr("src",t).removeAttr("data-src").addClass("active")}),void 0!==t&&void 0!==a&&function showFullMap(){var t=n("#map"),t={lat:parseFloat(t.data("lat")),lng:parseFloat(t.data("lng"))},a=new google.maps.Map(document.getElementById("map"),{zoom:16,center:t});new google.maps.Marker({position:t,map:a});n("#map").removeAttr("data-lat"),n("#map").removeAttr("data-lng")}())}),temporalHeight(),temporalHeightBuilding()}),n(window).resize(function(){temporalHeight(),temporalHeightBuilding()}),jQuery(document).on("click","#ms-read",function(){n(this).hasClass("show")?(n(this).removeClass("show"),n(this).text(n(this).attr("data-before")),n(".ms-wrap-property-description").removeClass("active")):(n(this).addClass("show"),n(this).text(n(this).attr("data-after")),n(".ms-wrap-property-description").addClass("active"))});var t=n(window),a=t.width();function anchoRelativoSlider(t,a){var e;void 0!==a&&a.length&&(e=a.length,t.css("width",e/i*100+"%"),a.css("width",100/e+"%"))}function framesPorSwipe(){switch(!0){case a<768:i=1;break;case 768<=a&&a<1024:i=2;break;case 1024<=a:i=3}}t.on("resize",function(){a=t.width(),setTimeout(function(){framesPorSwipe(),anchoRelativoSlider(e,o)},100)});var e,o,i=0,r=(framesPorSwipe(),n("#full-main"),n("#full-slider .wrap-slider"));r.length&&(e=r.find("ul"),1<(o=e.find("li")).length?(anchoRelativoSlider(e,o),e.data("frame","1")):(r.find(".next, .prev").css("display","none"),console.log("no hay frames para crear el slider"))),n(function(){n(".chk_save_property").click(function(t){t.stopPropagation(),t.preventDefault();var a,e,o,i=n(this);if(n(".chk_save").hasClass("working"))return!1;"yes"==__flex_g_settings.anonymous?(n("#modal_login").addClass("active_modal").find("[data-tab]").removeClass("active"),n("#modal_login").addClass("active_modal").find("[data-tab]:eq(1)").addClass("active"),n("#modal_login").find(".item_tab").removeClass("active"),n("#tabRegister").addClass("active"),n("button.close-modal").addClass("ib-close-mproperty"),n(".overlay_modal").css("background-color","rgba(0,0,0,0.8);"),n("#modal_login h2").html(n("#modal_login").find("[data-tab]:eq(1)").data("text-force")),t=n(".header-tab a[data-tab='tabRegister']").attr("data-text"),n("#modal_login .modal_cm .content_md .heder_md .ms-title-modal").html(t)):(t=i.data("class-id"),a=i.data("mls"),e=i.attr("data-alert-token"),o=i.attr("data-address"),n(".chk_save").addClass("working"),n(this).find("span").hasClass("active")?n.ajax({url:flex_idx_property_params.ajaxUrl,method:"POST",data:{action:"flex_favorite",class_id:t,mls_num:a,type_action:"remove",token_alert:e,registration_key:"undefined"!=typeof IB_AGENT_REGISTRATION_KEY?IB_AGENT_REGISTRATION_KEY:null},dataType:"json",success:function(t){var a=i.attr("data-save");""!==a&&void 0!==a||(a="Save"),n(".chk_save").removeClass("working"),n(".chk_save").removeAttr("data-alert-token").find("span").removeClass("active").text(a)}}):n.ajax({url:flex_idx_property_params.ajaxUrl,method:"POST",data:{action:"flex_favorite",class_id:t,mls_num:a,subject:o,type_action:"add",registration_key:"undefined"!=typeof IB_AGENT_REGISTRATION_KEY?IB_AGENT_REGISTRATION_KEY:null},dataType:"json",success:function(t){var a=i.attr("data-remove");""!==a&&void 0!==a||(a="Remove"),n(".chk_save").removeClass("working"),n(".chk_save").attr("data-alert-token",t.token_alert).find("span").addClass("active").text(a)}}))})})}(jQuery);