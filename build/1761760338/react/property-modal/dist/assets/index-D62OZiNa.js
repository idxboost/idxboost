import{j as e,u as s,a,b as r,n as t,d as l,r as i,C as n}from"./bootstrap-uJqstb5I.js";import{r as o,u as c}from"./i18n-D0PRNWcO.js";import{u as m}from"./state-BCq8qzba.js";import{f as d,b as p}from"./index-C8WMa5gw.js";const h=({url:s,additionalText:a="",image_url:r,description:t,openEmailForm:l})=>{const{t:i}=c(),[n,m]=o.useState(!1),d=(()=>{const e=o.useRef(null);return o.useEffect(()=>()=>{e.current&&clearTimeout(e.current)},[]),(...s)=>{e.current&&clearTimeout(e.current),e.current=setTimeout(()=>{(()=>{m(!1)})(...s)},2e3)}})(),p=e=>{const l=encodeURIComponent(s);let i="";switch(e){case"whatsapp":i=`https://api.whatsapp.com/send?text=${l}`;break;case"telegram":i=`https://t.me/share/url?url=${l}`;break;case"facebook":i=`https://www.facebook.com/sharer/sharer.php?u=${l}`;break;case"pinterest":{const e=encodeURIComponent(r);i=`https://pinterest.com/pin/create/button/?url=${l}${e?`&media=${e}`:""}&description=${encodeURIComponent(t)}`;break}case"linkedin":i=`https://www.linkedin.com/sharing/share-offsite/?url=${l}`;break;case"x":{const e=encodeURIComponent(a);i=`https://x.com/intent/post?url=${l}${e?`&text=${e}`:""}`;break}default:return void console.error("Platform not supported")}/iPhone|iPad|iPod|Android/i.test(navigator.userAgent)?window.location.href=i:window.open(i,"_blank","left=0,top=0,width=550,height=450,personalbar=0,toolbar=0,scrollbars=0,resizable=0")};return e.jsx("div",{className:"ms-sf-share-options",children:e.jsxs("ul",{children:[e.jsx("li",{children:e.jsxs("button",{className:"ms-sf-btn -silver","aria-label":"Copy Link",onClick:async()=>{try{await navigator.clipboard.writeText(s),m(!0),d()}catch(e){console.error("Error copying link: ",e)}},children:[e.jsx("i",{className:"sf-icon-copy"}),e.jsxs("span",{children:[i("Copy Link")," ",n&&e.jsxs("span",{className:"ms-sf-label-copy",children:[i("Copied"),"!"]})]})]})}),!!l&&e.jsx("li",{children:e.jsxs("button",{className:"ms-sf-btn -silver","aria-label":"Email",onClick:l,children:[e.jsx("i",{className:"sf-icon-envelope"}),e.jsx("span",{children:i("Email")})]})}),e.jsx("li",{children:e.jsxs("button",{className:"ms-sf-btn -silver","aria-label":"Facebook",onClick:()=>p("facebook"),children:[e.jsx("i",{className:"sf-icon-facebook-sp"}),e.jsx("span",{children:"Facebook"})]})}),e.jsx("li",{children:e.jsxs("button",{className:"ms-sf-btn -silver","aria-label":"WhatsApp",onClick:()=>p("whatsapp"),children:[e.jsx("i",{className:"sf-icon-whatsapp"}),e.jsx("span",{children:"WhatsApp"})]})}),e.jsx("li",{children:e.jsxs("button",{className:"ms-sf-btn -silver","aria-label":"Linkedin",onClick:()=>p("linkedin"),children:[e.jsx("i",{className:"sf-icon-linkedin-sp"}),e.jsx("span",{children:"Linkedin"})]})}),e.jsx("li",{children:e.jsxs("button",{className:"ms-sf-btn -silver","aria-label":"X",onClick:()=>p("x"),children:[e.jsx("i",{className:"sf-icon-twitter"}),e.jsx("span",{children:"X"})]})}),e.jsx("li",{children:e.jsxs("button",{className:"ms-sf-btn -silver","aria-label":"Telegram",onClick:()=>p("telegram"),children:[e.jsx("i",{className:"sf-icon-telegram"}),e.jsx("span",{children:"Telegram"})]})}),e.jsx("li",{children:e.jsxs("button",{className:"ms-sf-btn -silver","aria-label":"Pinterest",onClick:()=>p("pinterest"),children:[e.jsx("i",{className:"sf-icon-pinterest-sp"}),e.jsx("span",{children:"Pinterest"})]})})]})})},u=({mlsNumber:l,onClose:i})=>{const{t:n}=c(),{infoLead:m}=s(),{executeRecaptcha:d,isLoading:p}=a(),[h,{isLoading:u}]=r(),f=p||u,[x,j]=o.useState(""),[b,v]=o.useState(""),[y,N]=o.useState(m.email||""),[g,w]=o.useState(""),[k,C]=o.useState("");function E({name:e,lastName:s,email:a}){const r=`${e||""} ${s||""}`.trim();r&&w(r),a&&N(a)}const I=o.useCallback(()=>{j(""),v(""),E(m),C("")},[m]);return o.useEffect(()=>{E(m)},[m]),e.jsxs("form",{className:"ms-sf-contact-form",onSubmit:async function(e){e.preventDefault();try{const e=await d("submit"),s={targetEmail:x,sourceEmail:y,targetName:b,sourceName:g,comments:k,mlsNumber:l,recaptchaToken:e};await h(s).unwrap(),i?.(),I(),t({title:"Email Sent!",text:"Your email was sent successfully",type:"success",timer:2e3})}catch(s){t({title:"Email Sending Failed",text:"An error occurred while sending your email. Please try again later.",type:"error",showConfirmButton:!0})}},children:[e.jsxs("div",{className:"ms-sf-wrapper-input",children:[e.jsxs("label",{htmlFor:"femail",children:[n("To"),"*"]}),e.jsx("input",{id:"femail",name:"femail",type:"email",placeholder:`${n("Recipient email")}*`,value:x,onChange:e=>j(e.target.value),required:!0})]}),e.jsxs("div",{className:"ms-sf-wrapper-input",children:[e.jsxs("label",{htmlFor:"Fname",children:[n("Name"),"*"]}),e.jsx("input",{id:"Fname",name:"Fname",type:"text",placeholder:`${n("Recipient name")}*`,value:b,onChange:e=>v(e.target.value),required:!0})]}),e.jsxs("div",{className:"ms-sf-wrapper-input",children:[e.jsxs("label",{htmlFor:"Yemail",children:[n("From"),"*"]}),e.jsx("input",{id:"Yemail",name:"Yemail",type:"email",placeholder:`${n("Enter your email")}*`,value:y,onChange:e=>N(e.target.value),required:!0})]}),e.jsxs("div",{className:"ms-sf-wrapper-input",children:[e.jsxs("label",{htmlFor:"Yname",children:[n("Name"),"*"]}),e.jsx("input",{id:"Yname",name:"Yname",type:"text",placeholder:`${n("Enter your full name")}*`,value:g,onChange:e=>w(e.target.value),required:!0})]}),e.jsxs("div",{className:"ms-sf-wrapper-input -full",children:[e.jsx("label",{htmlFor:"message",children:n("Message")}),e.jsx("textarea",{name:"message",id:"message",placeholder:n("Message"),value:k,onChange:e=>C(e.target.value)})]}),e.jsx("div",{className:"ms-sf-wrapper-input",children:e.jsxs("span",{className:"ms-sf-small-text",children:["* ",n("Required fields")]})}),e.jsxs("div",{className:"ms-sf-wrapper-btn -flex",children:[e.jsx("button",{className:"ms-sf-btn -silver -xl",type:"button",onClick:()=>{I(),i?.()},children:n("Cancel")}),e.jsx("button",{className:"ms-sf-btn -black -xl -full",type:"submit",disabled:f,children:n(f?"Loading...":"Continue")})]})]})},f=()=>{const{t:s}=c(),a=m(),[r,t]=o.useState(!1),[f,x]=o.useState(!1),[j,b]=o.useState(null);o.useEffect(()=>{const e=e=>{const s=e.detail;s&&(b(s),t(!0))},s=()=>{t(!1),b(null),x(!1)};return window.addEventListener(d,e),window.addEventListener(p,s),()=>{window.removeEventListener(d,e),window.removeEventListener(p,s)}},[a]);const v=document.getElementById("wpadminbar"),y=v?.offsetHeight||0,[N,g]=o.useState(!1),w=o.useCallback(()=>{g(!1),setTimeout(()=>{l()},300)},[a]);if(o.useEffect(()=>{const e=document.querySelectorAll(".ms-sf-modal.active").length;r||e?(document.body.classList.add("openModal"),setTimeout(()=>g(!0),100)):document.body.classList.remove("openModal")},[r]),!r||!j)return null;const k=document.getElementById("share-modal")||document.createElement("div");return k.id||(k.id="share-modal",document.body.appendChild(k)),i.createPortal(e.jsx("div",{className:"ms-sf-modal active "+(N?"in":""),tabIndex:-1,role:"dialog",id:"shareModal",children:e.jsx("div",{className:"ms-sf-modal-dialog -md",role:"document",children:e.jsxs("div",{className:"ms-sf-modal-content "+(N?"active":""),style:{top:y},children:[e.jsx("div",{className:"ms-sf-modal-header ms-sf-ct",children:e.jsx("div",{className:"ms-sf-flex",children:e.jsx("h5",{className:"ms-sf-title",children:(()=>{if(!j?.type)return s("Share");switch(j.type){case"building":return s("Share this Building");case"property":return s("Share this Property");default:return s("Share")}})()})})}),e.jsxs("div",{className:"ms-sf-modal-body ms-sf-ct",children:[e.jsx("div",{className:"ms-sf-paragraph",children:f?e.jsx("p",{children:s("Recommend this to a friend, just enter their email below.")}):e.jsx("p",{children:s("Recommend this to a friend.")})}),e.jsxs("div",{className:"ms-sf-form",children:[e.jsxs("div",{className:"ms-sf-property-detail",children:[e.jsx("div",{className:"ms-sf-property-image",children:e.jsx(n,{url:j.image_url})}),e.jsxs("div",{className:"ms-sf-property-info",children:["property"===j.type&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"ms-sf-property-price",children:j.propertyInfo?.price}),e.jsxs("div",{className:"ms-sf-property-detail",children:[j.propertyInfo?.commercialType?e.jsx("div",{className:"ms-sf-property-item",children:s(j.propertyInfo?.commercialType)}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"ms-sf-property-item",children:[e.jsx("strong",{children:j.propertyInfo?.beds})," ",1===j.propertyInfo?.beds?s("Bed"):s("Beds")]}),e.jsxs("div",{className:"ms-sf-property-item",children:[e.jsx("strong",{children:j.propertyInfo?.baths})," ",1===j.propertyInfo?.baths?s("Bath"):s("Baths")]})]}),e.jsxs("div",{className:"ms-sf-property-item",children:[e.jsx("strong",{children:j.propertyInfo?.area.value})," ",j.propertyInfo?.area.measurement]})]}),e.jsx("div",{className:"ms-sf-property-address",children:j.propertyInfo?.address_short}),e.jsx("div",{className:"ms-sf-property-address",children:j.propertyInfo?.address_large})]}),"building"===j.type&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"ms-sf-property-price",children:j.buildingInfo?.name}),e.jsx("div",{className:"ms-sf-property-address",children:j.full_address})]})]})]}),e.jsxs("div",{className:"ms-sf-wrapper-share-options "+(f?"active":""),children:[e.jsx(h,{url:j.url,image_url:j.image_url,additionalText:j.additionalText,description:j.full_address,openEmailForm:"property"===j.type?()=>x(!0):void 0}),"property"===j.type&&!!j.propertyInfo&&e.jsx("div",{className:"ms-sf-form-hidden",children:e.jsx(u,{mlsNumber:j.propertyInfo.mls_num,onClose:()=>x(!1)})})]})]})]}),e.jsx("button",{className:"ms-sf-btn -close-modal -circle -standard -sm js-close-st-modal","data-id":"#shareModal",onClick:w,children:e.jsx("i",{className:"sf-icon-close"})})]})})}),k)};export{f as default};
