import{m as e,r as o,j as t}from"./bootstrap-uJqstb5I.js";import{r as s}from"./i18n-D0PRNWcO.js";import{u as a}from"./state-BCq8qzba.js";import{i as d,d as i}from"./index-C8WMa5gw.js";const l=()=>{const l=a(),n=s.useRef(null),[r,c]=s.useState(""),[m,u]=s.useState(!1);s.useEffect(()=>{const e=e=>{const o=e.detail;o&&(c((e=>{const o=e.match(/(?:youtube\.com\/(?:watch\?v=|embed\/|shorts\/)|youtu\.be\/)([\w-]{11})/);if(o)return`https://www.youtube.com/embed/${o[1]}?autoplay=1&loop=0&rel=0&showinfo=0`;const t=e.match(/vimeo\.com\/(\d+)/);return t?`https://player.vimeo.com/video/${t[1]}?autoplay=1&loop=0`:e})(o.video_url)),u(!0))},o=()=>{u(!1),c("")};return window.addEventListener(d,e),window.addEventListener(i,o),()=>{window.removeEventListener(d,e),window.removeEventListener(i,o)}},[l]);const f=document.getElementById("wpadminbar"),v=f?.offsetHeight,[p,w]=s.useState(!1),y=s.useCallback(()=>{n.current&&(n.current.pause(),n.current.src="",n.current.load()),w(!1),setTimeout(()=>{e()},300)},[l]);if(s.useEffect(()=>{m&&setTimeout(()=>w(!0),100)},[m]),!m)return null;const h=document.getElementById("video-modal")||document.createElement("div");return h.id||(h.id="video-modal",document.body.appendChild(h)),o.createPortal(t.jsx("div",{className:"ms-sf-modal active "+(p?"in":""),tabIndex:-1,role:"dialog",id:"videoModal",children:t.jsx("div",{className:"ms-sf-modal-dialog",role:"document",children:t.jsxs("div",{className:"ms-sf-modal-content "+(p?"active":""),style:{top:v},children:[t.jsx("div",{className:"ms-sf-modal-body wrapperVideoModal",children:r.includes("youtube")||r.includes("vimeo")?t.jsx("iframe",{id:"video-iframe",height:"360",width:"643",allow:"autoplay; encrypted-media",allowFullScreen:!0,style:{border:0},src:r}):t.jsx("video",{id:"video-iframe",ref:n,src:r,controls:!0,autoPlay:!0,playsInline:!0,controlsList:"nodownload nofullscreen noremoteplayback"})}),t.jsx("button",{className:"ms-sf-btn -close-modal -circle -standard -sm js-close-st-modal","data-id":"#videoModal",onClick:y,children:t.jsx("i",{className:"sf-icon-close"})})]})})}),h)};export{l as default};
