import{feature as g}from"./index-ByNvCHXr.js";import{g as w,a as c}from"./index-4Bb7E7wr.js";function P(e,u={}){var t=typeof u=="object"?u.mutate:u;if(!e)throw new Error("geojson is required");var r=w(e),i=[];switch(r){case"LineString":i=h(e,r);break;case"MultiLineString":case"Polygon":c(e).forEach(function(a){i.push(h(a,r))});break;case"MultiPolygon":c(e).forEach(function(a){var o=[];a.forEach(function(l){o.push(h(l,r))}),i.push(o)});break;case"Point":return e;case"MultiPoint":var n={};c(e).forEach(function(a){var o=a.join("-");Object.prototype.hasOwnProperty.call(n,o)||(i.push(a),n[o]=!0)});break;default:throw new Error(r+" geometry not supported")}return e.coordinates?t===!0?(e.coordinates=i,e):{type:r,coordinates:i}:t===!0?(e.geometry.coordinates=i,e):g({type:r,coordinates:i},e.properties,{bbox:e.bbox,id:e.id})}function h(e,u){var t=c(e);if(t.length===2&&!v(t[0],t[1]))return t;var r=[],i=t.length-1,n=r.length;r.push(t[0]);for(var a=1;a<i;a++){var o=r[r.length-1];t[a][0]===o[0]&&t[a][1]===o[1]||(r.push(t[a]),n=r.length,n>2&&d(r[n-3],r[n-1],r[n-2])&&r.splice(r.length-2,1))}if(r.push(t[t.length-1]),n=r.length,(u==="Polygon"||u==="MultiPolygon")&&v(t[0],t[t.length-1])&&n<4)throw new Error("invalid polygon");return u==="LineString"&&n<3||d(r[n-3],r[n-1],r[n-2])&&r.splice(r.length-2,1),r}function v(e,u){return e[0]===u[0]&&e[1]===u[1]}function d(e,u,t){var r=t[0],i=t[1],n=e[0],a=e[1],o=u[0],l=u[1],p=r-n,y=i-a,f=o-n,s=l-a,b=p*s-y*f;return b!==0?!1:Math.abs(f)>=Math.abs(s)?f>0?n<=r&&r<=o:o<=r&&r<=n:s>0?a<=i&&i<=l:l<=i&&i<=a}var L=P;export{P as cleanCoords,L as default};
