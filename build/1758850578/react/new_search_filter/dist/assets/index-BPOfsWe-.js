import{a as In,f as kn,b as qn}from"./index-Dds9rs_F.js";import{earthRadius as dn,featureCollection as ln,polygon as hn}from"./index-ByNvCHXr.js";import{b as Cn,c as Tn}from"./index-4Bb7E7wr.js";function Dn(t,n,e,i,r){Mn(t,n,e||0,i||t.length-1,r||Nn)}function Mn(t,n,e,i,r){for(;i>e;){if(i-e>600){var a=i-e+1,l=n-e+1,h=Math.log(a),c=.5*Math.exp(2*h/3),o=.5*Math.sqrt(h*c*(a-c)/a)*(l-a/2<0?-1:1),d=Math.max(e,Math.floor(n-l*c/a+o)),f=Math.min(i,Math.floor(n+(a-l)*c/a+o));Mn(t,n,d,f,r)}var g=t[n],u=e,v=i;for(H(t,e,n),r(t[i],g)>0&&H(t,e,i);u<v;){for(H(t,u,v),u++,v--;r(t[u],g)<0;)u++;for(;r(t[v],g)>0;)v--}r(t[e],g)===0?H(t,e,v):(v++,H(t,v,i)),v<=n&&(e=v+1),n<=v&&(i=v-1)}}function H(t,n,e){var i=t[n];t[n]=t[e],t[e]=i}function Nn(t,n){return t<n?-1:t>n?1:0}class En{constructor(n=9){this._maxEntries=Math.max(4,n),this._minEntries=Math.max(2,Math.ceil(this._maxEntries*.4)),this.clear()}all(){return this._all(this.data,[])}search(n){let e=this.data;const i=[];if(!en(n,e))return i;const r=this.toBBox,a=[];for(;e;){for(let l=0;l<e.children.length;l++){const h=e.children[l],c=e.leaf?r(h):h;en(n,c)&&(e.leaf?i.push(h):on(n,c)?this._all(h,i):a.push(h))}e=a.pop()}return i}collides(n){let e=this.data;if(!en(n,e))return!1;const i=[];for(;e;){for(let r=0;r<e.children.length;r++){const a=e.children[r],l=e.leaf?this.toBBox(a):a;if(en(n,l)){if(e.leaf||on(n,l))return!0;i.push(a)}}e=i.pop()}return!1}load(n){if(!(n&&n.length))return this;if(n.length<this._minEntries){for(let i=0;i<n.length;i++)this.insert(n[i]);return this}let e=this._build(n.slice(),0,n.length-1,0);if(!this.data.children.length)this.data=e;else if(this.data.height===e.height)this._splitRoot(this.data,e);else{if(this.data.height<e.height){const i=this.data;this.data=e,e=i}this._insert(e,this.data.height-e.height-1,!0)}return this}insert(n){return n&&this._insert(n,this.data.height-1),this}clear(){return this.data=G([]),this}remove(n,e){if(!n)return this;let i=this.data;const r=this.toBBox(n),a=[],l=[];let h,c,o;for(;i||a.length;){if(i||(i=a.pop(),c=a[a.length-1],h=l.pop(),o=!0),i.leaf){const d=Wn(n,i.children,e);if(d!==-1)return i.children.splice(d,1),a.push(i),this._condense(a),this}!o&&!i.leaf&&on(i,r)?(a.push(i),l.push(h),h=0,c=i,i=i.children[0]):c?(h++,i=c.children[h],o=!1):i=null}return this}toBBox(n){return n}compareMinX(n,e){return n.minX-e.minX}compareMinY(n,e){return n.minY-e.minY}toJSON(){return this.data}fromJSON(n){return this.data=n,this}_all(n,e){const i=[];for(;n;)n.leaf?e.push(...n.children):i.push(...n.children),n=i.pop();return e}_build(n,e,i,r){const a=i-e+1;let l=this._maxEntries,h;if(a<=l)return h=G(n.slice(e,i+1)),U(h,this.toBBox),h;r||(r=Math.ceil(Math.log(a)/Math.log(l)),l=Math.ceil(a/Math.pow(l,r-1))),h=G([]),h.leaf=!1,h.height=r;const c=Math.ceil(a/l),o=c*Math.ceil(Math.sqrt(l));gn(n,e,i,o,this.compareMinX);for(let d=e;d<=i;d+=o){const f=Math.min(d+o-1,i);gn(n,d,f,c,this.compareMinY);for(let g=d;g<=f;g+=c){const u=Math.min(g+c-1,f);h.children.push(this._build(n,g,u,r-1))}}return U(h,this.toBBox),h}_chooseSubtree(n,e,i,r){for(;r.push(e),!(e.leaf||r.length-1===i);){let a=1/0,l=1/0,h;for(let c=0;c<e.children.length;c++){const o=e.children[c],d=rn(o),f=Ln(n,o)-d;f<l?(l=f,a=d<a?d:a,h=o):f===l&&d<a&&(a=d,h=o)}e=h||e.children[0]}return e}_insert(n,e,i){const r=i?n:this.toBBox(n),a=[],l=this._chooseSubtree(r,this.data,e,a);for(l.children.push(n),Z(l,r);e>=0&&a[e].children.length>this._maxEntries;)this._split(a,e),e--;this._adjustParentBBoxes(r,a,e)}_split(n,e){const i=n[e],r=i.children.length,a=this._minEntries;this._chooseSplitAxis(i,a,r);const l=this._chooseSplitIndex(i,a,r),h=G(i.children.splice(l,i.children.length-l));h.height=i.height,h.leaf=i.leaf,U(i,this.toBBox),U(h,this.toBBox),e?n[e-1].children.push(h):this._splitRoot(i,h)}_splitRoot(n,e){this.data=G([n,e]),this.data.height=n.height+1,this.data.leaf=!1,U(this.data,this.toBBox)}_chooseSplitIndex(n,e,i){let r,a=1/0,l=1/0;for(let h=e;h<=i-e;h++){const c=K(n,0,h,this.toBBox),o=K(n,h,i,this.toBBox),d=Un(c,o),f=rn(c)+rn(o);d<a?(a=d,r=h,l=f<l?f:l):d===a&&f<l&&(l=f,r=h)}return r||i-e}_chooseSplitAxis(n,e,i){const r=n.leaf?this.compareMinX:Vn,a=n.leaf?this.compareMinY:Fn,l=this._allDistMargin(n,e,i,r),h=this._allDistMargin(n,e,i,a);l<h&&n.children.sort(r)}_allDistMargin(n,e,i,r){n.children.sort(r);const a=this.toBBox,l=K(n,0,e,a),h=K(n,i-e,i,a);let c=nn(l)+nn(h);for(let o=e;o<i-e;o++){const d=n.children[o];Z(l,n.leaf?a(d):d),c+=nn(l)}for(let o=i-e-1;o>=e;o--){const d=n.children[o];Z(h,n.leaf?a(d):d),c+=nn(h)}return c}_adjustParentBBoxes(n,e,i){for(let r=i;r>=0;r--)Z(e[r],n)}_condense(n){for(let e=n.length-1,i;e>=0;e--)n[e].children.length===0?e>0?(i=n[e-1].children,i.splice(i.indexOf(n[e]),1)):this.clear():U(n[e],this.toBBox)}}function Wn(t,n,e){if(!e)return n.indexOf(t);for(let i=0;i<n.length;i++)if(e(t,n[i]))return i;return-1}function U(t,n){K(t,0,t.children.length,n,t)}function K(t,n,e,i,r){r||(r=G(null)),r.minX=1/0,r.minY=1/0,r.maxX=-1/0,r.maxY=-1/0;for(let a=n;a<e;a++){const l=t.children[a];Z(r,t.leaf?i(l):l)}return r}function Z(t,n){return t.minX=Math.min(t.minX,n.minX),t.minY=Math.min(t.minY,n.minY),t.maxX=Math.max(t.maxX,n.maxX),t.maxY=Math.max(t.maxY,n.maxY),t}function Vn(t,n){return t.minX-n.minX}function Fn(t,n){return t.minY-n.minY}function rn(t){return(t.maxX-t.minX)*(t.maxY-t.minY)}function nn(t){return t.maxX-t.minX+(t.maxY-t.minY)}function Ln(t,n){return(Math.max(n.maxX,t.maxX)-Math.min(n.minX,t.minX))*(Math.max(n.maxY,t.maxY)-Math.min(n.minY,t.minY))}function Un(t,n){const e=Math.max(t.minX,n.minX),i=Math.max(t.minY,n.minY),r=Math.min(t.maxX,n.maxX),a=Math.min(t.maxY,n.maxY);return Math.max(0,r-e)*Math.max(0,a-i)}function on(t,n){return t.minX<=n.minX&&t.minY<=n.minY&&n.maxX<=t.maxX&&n.maxY<=t.maxY}function en(t,n){return n.minX<=t.maxX&&n.minY<=t.maxY&&n.maxX>=t.minX&&n.maxY>=t.minY}function G(t){return{children:t,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function gn(t,n,e,i,r){const a=[n,e];for(;a.length;){if(e=a.pop(),n=a.pop(),e-n<=i)continue;const l=n+Math.ceil((e-n)/i/2)*i;Dn(t,l,n,e,r),a.push(n,l,l,e)}}function Jn(t){return In(t,(n,e)=>n+Gn(e),0)}function Gn(t){let n=0,e;switch(t.type){case"Polygon":return mn(t.coordinates);case"MultiPolygon":for(e=0;e<t.coordinates.length;e++)n+=mn(t.coordinates[e]);return n;case"Point":case"MultiPoint":case"LineString":case"MultiLineString":return 0}return 0}function mn(t){let n=0;if(t&&t.length>0){n+=Math.abs(vn(t[0]));for(let e=1;e<t.length;e++)n-=Math.abs(vn(t[e]))}return n}var On=dn*dn/2,an=Math.PI/180;function vn(t){const n=t.length-1;if(n<=2)return 0;let e=0,i=0;for(;i<n;){const r=t[i],a=t[i+1===n?0:i+1],l=t[i+2>=n?(i+2)%n:i+2],h=r[0]*an,c=a[1]*an,o=l[0]*an;e+=(o-h)*Math.sin(c),i++}return e*On}const W=11102230246251565e-32,q=134217729,Qn=(3+8*W)*W;function sn(t,n,e,i,r){let a,l,h,c,o=n[0],d=i[0],f=0,g=0;d>o==d>-o?(a=o,o=n[++f]):(a=d,d=i[++g]);let u=0;if(f<t&&g<e)for(d>o==d>-o?(l=o+a,h=a-(l-o),o=n[++f]):(l=d+a,h=a-(l-d),d=i[++g]),a=l,h!==0&&(r[u++]=h);f<t&&g<e;)d>o==d>-o?(l=a+o,c=l-a,h=a-(l-c)+(o-c),o=n[++f]):(l=a+d,c=l-a,h=a-(l-c)+(d-c),d=i[++g]),a=l,h!==0&&(r[u++]=h);for(;f<t;)l=a+o,c=l-a,h=a-(l-c)+(o-c),o=n[++f],a=l,h!==0&&(r[u++]=h);for(;g<e;)l=a+d,c=l-a,h=a-(l-c)+(d-c),d=i[++g],a=l,h!==0&&(r[u++]=h);return(a!==0||u===0)&&(r[u++]=a),u}function Hn(t,n){let e=n[0];for(let i=1;i<t;i++)e+=n[i];return e}function j(t){return new Float64Array(t)}const Kn=(3+16*W)*W,Zn=(2+12*W)*W,$n=(9+64*W)*W*W,J=j(4),pn=j(8),xn=j(12),wn=j(16),C=j(4);function zn(t,n,e,i,r,a,l){let h,c,o,d,f,g,u,v,p,x,m,s,w,A,M,X,y,E;const B=t-r,b=e-r,_=n-a,R=i-a;A=B*R,g=q*B,u=g-(g-B),v=B-u,g=q*R,p=g-(g-R),x=R-p,M=v*x-(A-u*p-v*p-u*x),X=_*b,g=q*_,u=g-(g-_),v=_-u,g=q*b,p=g-(g-b),x=b-p,y=v*x-(X-u*p-v*p-u*x),m=M-y,f=M-m,J[0]=M-(m+f)+(f-y),s=A+m,f=s-A,w=A-(s-f)+(m-f),m=w-X,f=w-m,J[1]=w-(m+f)+(f-X),E=s+m,f=E-s,J[2]=s-(E-f)+(m-f),J[3]=E;let k=Hn(4,J),N=Zn*l;if(k>=N||-k>=N||(f=t-B,h=t-(B+f)+(f-r),f=e-b,o=e-(b+f)+(f-r),f=n-_,c=n-(_+f)+(f-a),f=i-R,d=i-(R+f)+(f-a),h===0&&c===0&&o===0&&d===0)||(N=$n*l+Qn*Math.abs(k),k+=B*d+R*h-(_*o+b*c),k>=N||-k>=N))return k;A=h*R,g=q*h,u=g-(g-h),v=h-u,g=q*R,p=g-(g-R),x=R-p,M=v*x-(A-u*p-v*p-u*x),X=c*b,g=q*c,u=g-(g-c),v=c-u,g=q*b,p=g-(g-b),x=b-p,y=v*x-(X-u*p-v*p-u*x),m=M-y,f=M-m,C[0]=M-(m+f)+(f-y),s=A+m,f=s-A,w=A-(s-f)+(m-f),m=w-X,f=w-m,C[1]=w-(m+f)+(f-X),E=s+m,f=E-s,C[2]=s-(E-f)+(m-f),C[3]=E;const L=sn(4,J,4,C,pn);A=B*d,g=q*B,u=g-(g-B),v=B-u,g=q*d,p=g-(g-d),x=d-p,M=v*x-(A-u*p-v*p-u*x),X=_*o,g=q*_,u=g-(g-_),v=_-u,g=q*o,p=g-(g-o),x=o-p,y=v*x-(X-u*p-v*p-u*x),m=M-y,f=M-m,C[0]=M-(m+f)+(f-y),s=A+m,f=s-A,w=A-(s-f)+(m-f),m=w-X,f=w-m,C[1]=w-(m+f)+(f-X),E=s+m,f=E-s,C[2]=s-(E-f)+(m-f),C[3]=E;const Y=sn(L,pn,4,C,xn);A=h*d,g=q*h,u=g-(g-h),v=h-u,g=q*d,p=g-(g-d),x=d-p,M=v*x-(A-u*p-v*p-u*x),X=c*o,g=q*c,u=g-(g-c),v=c-u,g=q*o,p=g-(g-o),x=o-p,y=v*x-(X-u*p-v*p-u*x),m=M-y,f=M-m,C[0]=M-(m+f)+(f-y),s=A+m,f=s-A,w=A-(s-f)+(m-f),m=w-X,f=w-m,C[1]=w-(m+f)+(f-X),E=s+m,f=E-s,C[2]=s-(E-f)+(m-f),C[3]=E;const Q=sn(Y,xn,4,C,wn);return wn[Q-1]}function jn(t,n,e,i,r,a){const l=(n-a)*(e-r),h=(t-r)*(i-a),c=l-h,o=Math.abs(l+h);return Math.abs(c)>=Kn*o?c:-zn(t,n,e,i,r,a,o)}function ne(t,n){var e,i,r=0,a,l,h,c,o,d,f,g=t[0],u=t[1],v=n.length;for(e=0;e<v;e++){i=0;var p=n[e],x=p.length-1;if(d=p[0],d[0]!==p[x][0]&&d[1]!==p[x][1])throw new Error("First and last coordinates in a ring must be the same");for(l=d[0]-g,h=d[1]-u,i;i<x;i++){if(f=p[i+1],c=f[0]-g,o=f[1]-u,h===0&&o===0){if(c<=0&&l>=0||l<=0&&c>=0)return 0}else if(o>=0&&h<=0||o<=0&&h>=0){if(a=jn(l,c,h,o,0,0),a===0)return 0;(a>0&&o>0&&h<=0||a<0&&o<=0&&h>0)&&r++}d=f,h=o,l=c}}return r%2!==0}function ee(t,n,e={}){if(!t)throw new Error("point is required");if(!n)throw new Error("polygon is required");const i=Cn(t),r=Tn(n),a=r.type,l=n.bbox;let h=r.coordinates;if(l&&te(i,l)===!1)return!1;a==="Polygon"&&(h=[h]);let c=!1;for(var o=0;o<h.length;++o){const d=ne(i,h[o]);if(d===0)return!e.ignoreBoundary;d&&(c=!0)}return c}function te(t,n){return n[0]<=t[0]&&n[1]<=t[1]&&n[2]>=t[0]&&n[3]>=t[1]}function ie(t,n,e){if(t.geometry.type!=="Polygon")throw new Error("The input feature must be a Polygon");e===void 0&&(e=1);var i=t.geometry.coordinates,r=[],a={};if(e){for(var l=[],h=0;h<i.length;h++)for(var c=0;c<i[h].length-1;c++)l.push(x(h,c));var o=new En;o.load(l)}for(var d=0;d<i.length;d++)for(var f=0;f<i[d].length-1;f++)if(e){var g=o.search(x(d,f));g.forEach(function(m){var s=m.ring,w=m.edge;p(d,f,s,w)})}else for(var u=0;u<i.length;u++)for(var v=0;v<i[u].length-1;v++)p(d,f,u,v);return n||(r={type:"Feature",geometry:{type:"MultiPoint",coordinates:r}}),r;function p(m,s,w,A){var M=i[m][s],X=i[m][s+1],y=i[w][A],E=i[w][A+1],B=re(M,X,y,E);if(B!==null){var b,_;if(X[0]!==M[0]?b=(B[0]-M[0])/(X[0]-M[0]):b=(B[1]-M[1])/(X[1]-M[1]),E[0]!==y[0]?_=(B[0]-y[0])/(E[0]-y[0]):_=(B[1]-y[1])/(E[1]-y[1]),!(b>=1||b<=0||_>=1||_<=0)){var R=B,k=!a[R];k&&(a[R]=!0),n?r.push(n(B,m,s,M,X,b,w,A,y,E,_,k)):r.push(B)}}}function x(m,s){var w=i[m][s],A=i[m][s+1],M,X,y,E;return w[0]<A[0]?(M=w[0],X=A[0]):(M=A[0],X=w[0]),w[1]<A[1]?(y=w[1],E=A[1]):(y=A[1],E=w[1]),{minX:M,minY:y,maxX:X,maxY:E,ring:m,edge:s}}}function re(t,n,e,i){if($(t,e)||$(t,i)||$(n,e)||$(i,e))return null;var r=t[0],a=t[1],l=n[0],h=n[1],c=e[0],o=e[1],d=i[0],f=i[1],g=(r-l)*(o-f)-(a-h)*(c-d);if(g===0)return null;var u=((r*h-a*l)*(c-d)-(r-l)*(c*f-o*d))/g,v=((r*h-a*l)*(o-f)-(a-h)*(c*f-o*d))/g;return[u,v]}function $(t,n){if(!t||!n||t.length!==n.length)return!1;for(var e=0,i=t.length;e<i;e++)if(t[e]instanceof Array&&n[e]instanceof Array){if(!$(t[e],n[e]))return!1}else if(t[e]!==n[e])return!1;return!0}function oe(t){if(t.type!="Feature")throw new Error("The input must a geojson object of type Feature");if(t.geometry===void 0||t.geometry==null)throw new Error("The input must a geojson object with a non-empty geometry");if(t.geometry.type!="Polygon")throw new Error("The input must be a geojson Polygon");for(var n=t.geometry.coordinates.length,e=[],s=0;s<n;s++){var i=t.geometry.coordinates[s];z(i[0],i[i.length-1])||i.push(i[0]);for(var r=0;r<i.length-1;r++)e.push(i[r])}if(!se(e))throw new Error("The input polygon may not have duplicate vertices (except for the first and last vertex of each ring)");var a=e.length,l=ie(t,function(P,T,V,F,Bn,Xn,Yn,_n,bn,Pn,Rn,Sn){return[P,T,V,F,Bn,Xn,Yn,_n,bn,Pn,Rn,Sn]}),h=l.length;if(h==0){for(var y=[],s=0;s<n;s++)y.push(hn([t.geometry.coordinates[s]],{parent:-1,winding:ae(t.geometry.coordinates[s])}));var S=ln(y);return fn(),cn(),S}for(var c=[],o=[],s=0;s<n;s++){c.push([]);for(var r=0;r<t.geometry.coordinates[s].length-1;r++)c[s].push([new An(t.geometry.coordinates[s][O(r+1,t.geometry.coordinates[s].length-1)],1,[s,r],[s,O(r+1,t.geometry.coordinates[s].length-1)],void 0)]),o.push(new yn(t.geometry.coordinates[s][r],[s,O(r-1,t.geometry.coordinates[s].length-1)],[s,r],void 0,void 0,!1,!0))}for(var s=0;s<h;s++)c[l[s][1]][l[s][2]].push(new An(l[s][0],l[s][5],[l[s][1],l[s][2]],[l[s][6],l[s][7]],void 0)),l[s][11]&&o.push(new yn(l[s][0],[l[s][1],l[s][2]],[l[s][6],l[s][7]],void 0,void 0,!0,!0));for(var d=o.length,s=0;s<c.length;s++)for(var r=0;r<c[s].length;r++)c[s][r].sort(function(T,V){return T.param<V.param?-1:1});for(var f=[],s=0;s<d;s++)f.push({minX:o[s].coord[0],minY:o[s].coord[1],maxX:o[s].coord[0],maxY:o[s].coord[1],index:s});var g=new En;g.load(f);for(var s=0;s<c.length;s++)for(var r=0;r<c[s].length;r++)for(var u=0;u<c[s][r].length;u++){var v;u==c[s][r].length-1?v=c[s][O(r+1,t.geometry.coordinates[s].length-1)][0].coord:v=c[s][r][u+1].coord;var p=g.search({minX:v[0],minY:v[1],maxX:v[0],maxY:v[1]})[0];c[s][r][u].nxtIsectAlongEdgeIn=p.index}for(var s=0;s<c.length;s++)for(var r=0;r<c[s].length;r++)for(var u=0;u<c[s][r].length;u++){var v=c[s][r][u].coord,p=g.search({minX:v[0],minY:v[1],maxX:v[0],maxY:v[1]})[0],x=p.index;x<a?o[x].nxtIsectAlongRingAndEdge2=c[s][r][u].nxtIsectAlongEdgeIn:z(o[x].ringAndEdge1,c[s][r][u].ringAndEdgeIn)?o[x].nxtIsectAlongRingAndEdge1=c[s][r][u].nxtIsectAlongEdgeIn:o[x].nxtIsectAlongRingAndEdge2=c[s][r][u].nxtIsectAlongEdgeIn}for(var m=[],s=0,r=0;r<n;r++){for(var w=s,u=0;u<t.geometry.coordinates[r].length-1;u++)o[s].coord[0]<o[w].coord[0]&&(w=s),s++;for(var A=o[w].nxtIsectAlongRingAndEdge2,u=0;u<o.length;u++)if(o[u].nxtIsectAlongRingAndEdge1==w||o[u].nxtIsectAlongRingAndEdge2==w){var M=u;break}var X=tn([o[M].coord,o[w].coord,o[A].coord],!0)?1:-1;m.push({isect:w,parent:-1,winding:X})}m.sort(function(I,P){return o[I.isect].coord>o[P.isect].coord?-1:1});for(var y=[];m.length>0;){var E=m.pop(),B=E.isect,b=E.parent,_=E.winding,R=y.length,k=[o[B].coord],N=B;if(o[B].ringAndEdge1Walkable)var L=o[B].ringAndEdge1,Y=o[B].nxtIsectAlongRingAndEdge1;else var L=o[B].ringAndEdge2,Y=o[B].nxtIsectAlongRingAndEdge2;for(;!z(o[B].coord,o[Y].coord);){k.push(o[Y].coord);for(var Q=void 0,s=0;s<m.length;s++)if(m[s].isect==Y){Q=s;break}if(Q!=null&&m.splice(Q,1),z(L,o[Y].ringAndEdge1)){if(L=o[Y].ringAndEdge2,o[Y].ringAndEdge2Walkable=!1,o[Y].ringAndEdge1Walkable){var D={isect:Y};tn([o[N].coord,o[Y].coord,o[o[Y].nxtIsectAlongRingAndEdge2].coord],_==1)?(D.parent=b,D.winding=-_):(D.parent=R,D.winding=_),m.push(D)}N=Y,Y=o[Y].nxtIsectAlongRingAndEdge2}else{if(L=o[Y].ringAndEdge1,o[Y].ringAndEdge1Walkable=!1,o[Y].ringAndEdge2Walkable){var D={isect:Y};tn([o[N].coord,o[Y].coord,o[o[Y].nxtIsectAlongRingAndEdge1].coord],_==1)?(D.parent=b,D.winding=-_):(D.parent=R,D.winding=_),m.push(D)}N=Y,Y=o[Y].nxtIsectAlongRingAndEdge1}}k.push(o[Y].coord),y.push(hn([k],{index:R,parent:b,winding:_,netWinding:void 0}))}var S=ln(y);fn(),cn();function fn(){for(var I=[],P=0;P<S.features.length;P++)S.features[P].properties.parent==-1&&I.push(P);if(I.length>1)for(var P=0;P<I.length;P++){for(var T=-1,V=1/0,F=0;F<S.features.length;F++)I[P]!=F&&ee(S.features[I[P]].geometry.coordinates[0][0],S.features[F],{ignoreBoundary:!0})&&Jn(S.features[F])<V&&(T=F);S.features[I[P]].properties.parent=T}}function cn(){for(var I=0;I<S.features.length;I++)if(S.features[I].properties.parent==-1){var P=S.features[I].properties.winding;S.features[I].properties.netWinding=P,un(I,P)}}function un(I,P){for(var T=0;T<S.features.length;T++)if(S.features[T].properties.parent==I){var V=P+S.features[T].properties.winding;S.features[T].properties.netWinding=V,un(T,V)}}return S}var An=function(t,n,e,i,r){this.coord=t,this.param=n,this.ringAndEdgeIn=e,this.ringAndEdgeOut=i,this.nxtIsectAlongEdgeIn=r},yn=function(t,n,e,i,r,a,l){this.coord=t,this.ringAndEdge1=n,this.ringAndEdge2=e,this.nxtIsectAlongRingAndEdge1=i,this.nxtIsectAlongRingAndEdge2=r,this.ringAndEdge1Walkable=a,this.ringAndEdge2Walkable=l};function tn(t,n){if(typeof n>"u"&&(n=!0),t.length!=3)throw new Error("This function requires an array of three points [x,y]");var e=(t[1][0]-t[0][0])*(t[2][1]-t[0][1])-(t[1][1]-t[0][1])*(t[2][0]-t[0][0]);return e>=0==n}function ae(t){for(var n=0,e=0;e<t.length-1;e++)t[e][0]<t[n][0]&&(n=e);if(tn([t[O(n-1,t.length-1)],t[n],t[O(n+1,t.length-1)]],!0))var i=1;else var i=-1;return i}function z(t,n){if(!t||!n||t.length!=n.length)return!1;for(var e=0,i=t.length;e<i;e++)if(t[e]instanceof Array&&n[e]instanceof Array){if(!z(t[e],n[e]))return!1}else if(t[e]!=n[e])return!1;return!0}function O(t,n){return(t%n+n)%n}function se(t){for(var n={},e=1,i=0,r=t.length;i<r;++i){if(Object.prototype.hasOwnProperty.call(n,t[i])){e=0;break}n[t[i]]=1}return e}function le(t){var n=[];return kn(t,function(e){e.geometry.type==="Polygon"&&qn(oe(e),function(i){n.push(hn(i.geometry.coordinates,e.properties))})}),ln(n)}var ue=le;export{ue as default,le as unkinkPolygon};
